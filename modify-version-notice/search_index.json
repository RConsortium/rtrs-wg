[["index.html", "Tables in Clinical Trials with R Chapter 1 About 1.1 Introduction 1.2 Call for Contributions 1.3 Data Used For Examples 1.4 Installing the R packages", " Tables in Clinical Trials with R R Consortium Tables Working Group 2023-09-07 Chapter 1 About You are currently reading the development version (1.1.001) of the book whose URL is https://rconsortium.github.io/rtrs-wg/dev. 1.1 Introduction In this book we present various aspects of creating tables with the R language (R Core Team 2023) to analyze and report clinical trials data. The book was initiated by the R Consortium working group R Tables for Regulatory Submissions (RTRS). For a list of contributors to this book, see Appendix A. The RTRS includes representation from several large pharmaceutical companies and contract research organizations. The goal of the working group is to create standards for creating tables that meet the requirements of FDA submission documents, and hence enhance the suitability of R for FDA submissions. It is part of a larger R Consortium effort to facilitate the certification and validation of R packages and tools for FDA submissions thereby allowing drug developers to submit documentation for regulatory approval using the R programming environment in conjunction with open-source packages without the need for closed and often expensive proprietary tools. For more information on the R Consortium see https://www.r-consortium.org. 1.2 Call for Contributions The content of this book is intended to grow via community contribution, so please add your subject matter expertise to this content by cloning the Github repository of this book and making a pull request with your changes. We welcome all contributions, including but not limited to: summarizing table packages adding new example tables clarifying requirements and analyses improving R code In case you are new to using git and GitHub but would like to make a contribution then please write a GitHub issue and we will reach out to you to add the content. One convenient way to get started is to: clone the GitHub repository of this book install the RStudio IDE Open the RStudio project in rtrs-wg/tables-book/tables-book.Rproj start working! See the Bookdown documentation. You can continuously preview the book with the bookdown::serve_book() call. once ready to share your work create a PR use GitHub issues to communicate with us if you have difficulties 1.3 Data Used For Examples We use synthetic data for the examples in this book. The data is available from the random.cdisc.data R package which contains a number of datasets that follow the CDISC ADaM specifications. Code remotes::install_github(&quot;insightsengineering/random.cdisc.data&quot;) The data in random.cdisc.data is completely synthetic, meaning no patient data has been used to create it. The data is also fairly basic, meaning real study data often has more signal and patterns. Code data(package=&quot;random.cdisc.data&quot;)$results[, &quot;Item&quot;] [1] &quot;cadab&quot; &quot;cadae&quot; &quot;cadaette&quot; &quot;cadcm&quot; &quot;caddv&quot; &quot;cadeg&quot; [7] &quot;cadex&quot; &quot;cadhy&quot; &quot;cadlb&quot; &quot;cadmh&quot; &quot;cadpc&quot; &quot;cadpp&quot; [13] &quot;cadqlqc&quot; &quot;cadqs&quot; &quot;cadrs&quot; &quot;cadsl&quot; &quot;cadsub&quot; &quot;cadtr&quot; [19] &quot;cadtte&quot; &quot;cadvs&quot; In this document, the prepending c stands for caches. So, for example the cached synthetic subject level dataset ADSL: Code data(&quot;cadsl&quot;, package = &quot;random.cdisc.data&quot;) head(cadsl) # A tibble: 6 × 55 STUDYID USUBJID SUBJID SITEID AGE AGEU SEX RACE ETHNIC COUNTRY DTHFL &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; 1 AB12345 AB12345-CH… id-128 CHN-3 32 YEARS M ASIAN HISPA… CHN Y 2 AB12345 AB12345-CH… id-262 CHN-15 35 YEARS M BLAC… NOT H… CHN N 3 AB12345 AB12345-RU… id-378 RUS-3 30 YEARS F ASIAN NOT H… RUS N 4 AB12345 AB12345-CH… id-220 CHN-11 26 YEARS F ASIAN NOT H… CHN N 5 AB12345 AB12345-CH… id-267 CHN-7 40 YEARS M ASIAN NOT H… CHN N 6 AB12345 AB12345-CH… id-201 CHN-15 49 YEARS M ASIAN NOT H… CHN Y # ℹ 44 more variables: INVID &lt;chr&gt;, INVNAM &lt;chr&gt;, ARM &lt;fct&gt;, ARMCD &lt;fct&gt;, # ACTARM &lt;fct&gt;, ACTARMCD &lt;fct&gt;, TRT01P &lt;fct&gt;, TRT01A &lt;fct&gt;, TRT02P &lt;fct&gt;, # TRT02A &lt;fct&gt;, REGION1 &lt;fct&gt;, STRATA1 &lt;fct&gt;, STRATA2 &lt;fct&gt;, BMRKR1 &lt;dbl&gt;, # BMRKR2 &lt;fct&gt;, ITTFL &lt;fct&gt;, SAFFL &lt;fct&gt;, BMEASIFL &lt;fct&gt;, BEP01FL &lt;fct&gt;, # AEWITHFL &lt;fct&gt;, RANDDT &lt;date&gt;, TRTSDTM &lt;dttm&gt;, TRTEDTM &lt;dttm&gt;, # TRT01SDTM &lt;dttm&gt;, TRT01EDTM &lt;dttm&gt;, TRT02SDTM &lt;dttm&gt;, TRT02EDTM &lt;dttm&gt;, # AP01SDTM &lt;dttm&gt;, AP01EDTM &lt;dttm&gt;, AP02SDTM &lt;dttm&gt;, AP02EDTM &lt;dttm&gt;, … Code adsl &lt;- cadsl 1.4 Installing the R packages At some point we may switch to renv to install the R packages used for this book. For right now you can install the packages yourself with: Code install.packages(c(&quot;rtables&quot;, &quot;tern&quot;, &quot;gt&quot;, &quot;remotes&quot;, &quot;tidyverse&quot;, &quot;bookdown&quot;, &quot;tables&quot;, &quot;formatters&quot;, &quot;tidytlg&quot;, &quot;flextable&quot;)) remotes::install_github(&quot;insightsengineering/random.cdisc.data&quot;) remotes::install_github(&quot;insightsengineering/scda&quot;) remotes::install_github(&quot;GSK-Biostatistics/tfrmt&quot;) In each of the sections below, we will reset R to close to the present state at the start of the section, so readers can execute the demonstration code more or less independently of the other sections. This is done using the functions defined below. In your own documents, you wouldn’t need these resets. References "],["tablepkgs.html", "Chapter 2 Overview of table R packages 2.1 gt 2.2 rtables 2.3 tern (+ rtables) 2.4 flextable 2.5 tfrmt 2.6 tables 2.7 tidytlg", " Chapter 2 Overview of table R packages There are many R packages available that can help with the creation of production-ready tables for clinical research. We provide here a listing of the most notable packages available for this purpose. The descriptions are meant to provide a basic overview of what each package is capable of, and, the general focus area for each. Word of warning: the list is by no means complete. There are possibly dozens of such packages, but we were selective in choosing which of those to present here (mostly in the interest of not presenting too much material, so as to not burden the reader with too many alternatives). 2.1 gt The gt package (Iannone et al. 2023, website) provides a high-level and declarative interface for composing tables. The package contains a large variety of formatting functions for transforming cell values from an input data frame to the desired reporting values. There are options for scientific notation, percentages, localized currencies, expressing uncertainties and ranges, dates and times, etc.). The package has the ability to generate summary rows, footnotes, source notes, and structure the table with a stub and column spanners. Multiple output formats are supported with the same declarative interface (e.g., HTML, LaTeX/PDF, RTF, and Word). The gt source code is on GitHub and the project website provides a wealth of documentation. The package is also available on CRAN. 2.2 rtables The rtables package (Becker and Waddell 2023, website) defines a pipe-able grammar for declaring complex table structure layouts via nested splitting – in row- and column-space – and the specification of analysis functions which will calculate cell values within that structure. These pre-data table layouts are then applied to data to build the table, during which all necessary data grouping implied by the row and column splits, cell value calculation, and tabulation occurs automatically. Additional table features such as titles, footers, and referential footnotes are supported. ASCII, HTML, and PDF are supported as output formats for rendering tables. The rtables package is available on CRAN. Its source code GitHub and documentation are also available on Github, where development of the package occurs. rtables is also the table engine used (as wrapped by tern) in the open source TLG Catalog. 2.3 tern (+ rtables) The tern package (Zhu et al. 2023, website) is an open sourced, opinionated TLG generation package for clinical trials. With respect to tables, tern acts as wrapper around the core rtables tabulation engine which performs two functions with respect to standard tables clinical trial tables: implementation of statistical logic, and providing convenience wrappers for common table layout patterns. In particular, tern implements and open-sources the statistical choices used by Roche ™ when constructing clinical trial tables. The open source TLG Catalog uses tern and rtables to implement over 220 stanard clinical trial table variants across 8 table categories. The catalog includes open source-permissively licensed, runnable code for each entry. The tern package is available on CRAN. Its source code GitHub and documentation are also available on Github, where development of the package occurs. 2.4 flextable flextable (Gohel and Skintzos 2023, website) provides a grammar for creating and customizing tables. The following formats are supported: ‘Word’ (.docx), ‘PowerPoint’ (.pptx), ‘RTF’, ‘PDF’ ,‘HTML’ and R ‘Grid Graphics’. The syntax is the same for the user regardless of the type of output to be produced. A set of functions allows the creation, definition of cell arrangement, addition of headers or footers, formatting and definition of cell content (i.e. text and or images). The package also offers a set of high-level functions that allow, for example, tabular reporting of statistical models and the creation of complex cross tabulations. Source code is on GitHub and a user manual is available. The package is also available on CRAN. 2.5 tfrmt The tfrmt (Fillmore et al. 2023, website) package provides a language for defining display-related metadata and table formatting before any data is available. This package offers an intuitive interface for defining and layering standard or custom formats, to which ARD (analysis results data) is supplied. It also presents the novel ability to easily generate mock displays using metadata that will be used for the actual displays. tfrmt is built on top of the gt package, which is intended to support a variety of output formats in the future. Table features (titles, header, footnotes, etc.) as well as specific formatting (e.g. rounding, scientific notation, alignment, spacing) are supported. The tfrmt source code is on GitHub and documentation can be found in the project website. The package is also available on CRAN. 2.6 tables The tables package (Murdoch 2023, website) provides a formula-driven interface for computing the contents of tables and formatting them. It was inspired by SAS PROC TABULATE, but is not compatible with it. The user computes a table object by specifying a formula, with the left-hand side giving the rows, and the right-hand side giving the columns; the formula describes the summary functions to apply and how to organize them. The objects can be subsetted or combined using matrix-like operations. Tables can be rendered in plain text, LaTeX code to appear in a PDF document, or HTML code for a web document. The package is on CRAN. Source is maintained on Github at https://github.com/dmurdoch/tables/. Vignettes in the package serve as a user manual; browse them at https://dmurdoch.github.io/tables/, or install the package, then run browseVignettes(package = \"tables\"). 2.7 tidytlg The tidytlg package (Masel et al. 2023, website) provides a framework for creating tables, listings, and graphs (TLGs) using Tidyverse (Wickham et al. 2019). It offers a suite of analysis functions to summarize descriptive statistics (univariate statistics and counts or percentages) for table creation and a function to convert analysis results to rtf/html outputs. For graphic output, tidytlg can integrate plot objects created by ggplot2 or a png file with titles and footnotes to produce rtf/html output. tidytlg source code and documentation are on Github. References "],["formatting-and-rendering-tables.html", "Chapter 3 Formatting and Rendering Tables 3.1 Title &amp; Footnotes 3.2 Captions 3.3 Pagination 3.4 Rendering Tables", " Chapter 3 Formatting and Rendering Tables Table generation usually is a two step process Derive the cell value and tabulate them. Create the final table output, save it to a file to be shared with collaborators. Chapter Commonly Used Tables focuses on the work involved in step 1. In this chapter we discuss the various aspects of creating the final output that is commonly stored in a file with a particular file format (pdf, txt, html, docx or rtf). 3.1 Title &amp; Footnotes Commonly rendered tables that are reported to the health authorities have titles and footnotes with information such as: what is summarized in the table database lock date patient sub-population notes by study team notes regarding statistical algorithms chosen provenance information including path to program and when the table was created Often footnotes include cell references. 3.1.1 gt The gt package lets you add a title and even a subtitle and preheader lines (for RTF) with its tab_header() function. In the following example, we create some sample_data and feed that into the gt() function. We can automatically create a table stub (for row labels) and row groups with the rowname_col and groupname_col arguments of gt(). Code resetSession() library(gt) sample_data &lt;- dplyr::tibble( label = c(&quot;n&quot;, &quot;Mean (SD)&quot;, &quot;Median&quot;, &quot;Min - Max&quot;, &quot;F&quot;, &quot;M&quot;, &quot;U&quot;, &quot;UNDIFFERENTIATED&quot;), `val_A: Drug X` = c(134, 33.8, 33, NA, 79, 51, 3, 1), `val_B: Placebo` = c(134, 35.4, 35, NA, 77, 55, 2, 0), `val_C: Combination` = c(132, 35.4, 35, NA, 66, 60, 4, 2), category = c(rep(&quot;Age (Years)&quot;, 4), rep(&quot;Sex, n (%)&quot;, 4)) ) gt_tbl &lt;- gt( sample_data, rowname_col = &quot;label&quot;, groupname_col = &quot;category&quot; ) |&gt; tab_header( title = &quot;x.x: Study Subject Data&quot;, subtitle = md( &quot;x.x.x: Demographic Characteristics \\n Table x.x.x.x: Demographic Characteristics - Full Analysis Set&quot; ), preheader = c(&quot;Protocol: XXXXX&quot;, &quot;Cutoff date: DDMMYYYY&quot;) ) |&gt; tab_source_note(&quot;Source: ADSL DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY&quot;) |&gt; sub_missing(missing_text = &quot;&quot;) |&gt; tab_options( page.orientation = &quot;landscape&quot;, page.numbering = TRUE, page.header.use_tbl_headings = TRUE, page.footer.use_tbl_notes = TRUE ) gt_tbl #cavhxtmrgp table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #cavhxtmrgp thead, #cavhxtmrgp tbody, #cavhxtmrgp tfoot, #cavhxtmrgp tr, #cavhxtmrgp td, #cavhxtmrgp th { border-style: none; } #cavhxtmrgp p { margin: 0; padding: 0; } #cavhxtmrgp .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #cavhxtmrgp .gt_caption { padding-top: 4px; padding-bottom: 4px; } #cavhxtmrgp .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #cavhxtmrgp .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #cavhxtmrgp .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #cavhxtmrgp .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #cavhxtmrgp .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #cavhxtmrgp .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #cavhxtmrgp .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #cavhxtmrgp .gt_column_spanner_outer:first-child { padding-left: 0; } #cavhxtmrgp .gt_column_spanner_outer:last-child { padding-right: 0; } #cavhxtmrgp .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #cavhxtmrgp .gt_spanner_row { border-bottom-style: hidden; } #cavhxtmrgp .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #cavhxtmrgp .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #cavhxtmrgp .gt_from_md > :first-child { margin-top: 0; } #cavhxtmrgp .gt_from_md > :last-child { margin-bottom: 0; } #cavhxtmrgp .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #cavhxtmrgp .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #cavhxtmrgp .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #cavhxtmrgp .gt_row_group_first td { border-top-width: 2px; } #cavhxtmrgp .gt_row_group_first th { border-top-width: 2px; } #cavhxtmrgp .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #cavhxtmrgp .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #cavhxtmrgp .gt_first_summary_row.thick { border-top-width: 2px; } #cavhxtmrgp .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #cavhxtmrgp .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #cavhxtmrgp .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #cavhxtmrgp .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #cavhxtmrgp .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #cavhxtmrgp .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #cavhxtmrgp .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #cavhxtmrgp .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #cavhxtmrgp .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #cavhxtmrgp .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #cavhxtmrgp .gt_left { text-align: left; } #cavhxtmrgp .gt_center { text-align: center; } #cavhxtmrgp .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #cavhxtmrgp .gt_font_normal { font-weight: normal; } #cavhxtmrgp .gt_font_bold { font-weight: bold; } #cavhxtmrgp .gt_font_italic { font-style: italic; } #cavhxtmrgp .gt_super { font-size: 65%; } #cavhxtmrgp .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #cavhxtmrgp .gt_asterisk { font-size: 100%; vertical-align: 0; } #cavhxtmrgp .gt_indent_1 { text-indent: 5px; } #cavhxtmrgp .gt_indent_2 { text-indent: 10px; } #cavhxtmrgp .gt_indent_3 { text-indent: 15px; } #cavhxtmrgp .gt_indent_4 { text-indent: 20px; } #cavhxtmrgp .gt_indent_5 { text-indent: 25px; } x.x: Study Subject Data x.x.x: Demographic Characteristics Table x.x.x.x: Demographic Characteristics - Full Analysis Set val_A: Drug X val_B: Placebo val_C: Combination Age (Years) n 134.0 134.0 132.0 Mean (SD) 33.8 35.4 35.4 Median 33.0 35.0 35.0 Min - Max Sex, n (%) F 79.0 77.0 66.0 M 51.0 55.0 60.0 U 3.0 2.0 4.0 UNDIFFERENTIATED 1.0 0.0 2.0 Source: ADSL DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY The above example contains the use of the tab_source_note() function. You can create as many source notes in the table footer as you need, and they typically describe the data table as a whole (i.e., not pointing to anything specific). For that, you can use footnotes and target cells that require additional explanation. Here’s an example of that using tab_footnote(): Code gt_tbl |&gt; tab_footnote( footnote = &quot;This is the combination of the two.&quot;, locations = cells_column_labels(columns = `val_C: Combination`) ) |&gt; tab_footnote( footnote = &quot;These values are the same.&quot;, locations = cells_body( columns = matches(&quot;_A|_B&quot;), rows = &quot;n&quot; ) ) #tczwspycoi table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #tczwspycoi thead, #tczwspycoi tbody, #tczwspycoi tfoot, #tczwspycoi tr, #tczwspycoi td, #tczwspycoi th { border-style: none; } #tczwspycoi p { margin: 0; padding: 0; } #tczwspycoi .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #tczwspycoi .gt_caption { padding-top: 4px; padding-bottom: 4px; } #tczwspycoi .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #tczwspycoi .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #tczwspycoi .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #tczwspycoi .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #tczwspycoi .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #tczwspycoi .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #tczwspycoi .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #tczwspycoi .gt_column_spanner_outer:first-child { padding-left: 0; } #tczwspycoi .gt_column_spanner_outer:last-child { padding-right: 0; } #tczwspycoi .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #tczwspycoi .gt_spanner_row { border-bottom-style: hidden; } #tczwspycoi .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #tczwspycoi .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #tczwspycoi .gt_from_md > :first-child { margin-top: 0; } #tczwspycoi .gt_from_md > :last-child { margin-bottom: 0; } #tczwspycoi .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #tczwspycoi .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #tczwspycoi .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #tczwspycoi .gt_row_group_first td { border-top-width: 2px; } #tczwspycoi .gt_row_group_first th { border-top-width: 2px; } #tczwspycoi .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #tczwspycoi .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #tczwspycoi .gt_first_summary_row.thick { border-top-width: 2px; } #tczwspycoi .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #tczwspycoi .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #tczwspycoi .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #tczwspycoi .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #tczwspycoi .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #tczwspycoi .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #tczwspycoi .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #tczwspycoi .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #tczwspycoi .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #tczwspycoi .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #tczwspycoi .gt_left { text-align: left; } #tczwspycoi .gt_center { text-align: center; } #tczwspycoi .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #tczwspycoi .gt_font_normal { font-weight: normal; } #tczwspycoi .gt_font_bold { font-weight: bold; } #tczwspycoi .gt_font_italic { font-style: italic; } #tczwspycoi .gt_super { font-size: 65%; } #tczwspycoi .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #tczwspycoi .gt_asterisk { font-size: 100%; vertical-align: 0; } #tczwspycoi .gt_indent_1 { text-indent: 5px; } #tczwspycoi .gt_indent_2 { text-indent: 10px; } #tczwspycoi .gt_indent_3 { text-indent: 15px; } #tczwspycoi .gt_indent_4 { text-indent: 20px; } #tczwspycoi .gt_indent_5 { text-indent: 25px; } x.x: Study Subject Data x.x.x: Demographic Characteristics Table x.x.x.x: Demographic Characteristics - Full Analysis Set val_A: Drug X val_B: Placebo val_C: Combination1 Age (Years) n 2 134.0 2 134.0 132.0 Mean (SD) 33.8 35.4 35.4 Median 33.0 35.0 35.0 Min - Max Sex, n (%) F 79.0 77.0 66.0 M 51.0 55.0 60.0 U 3.0 2.0 4.0 UNDIFFERENTIATED 1.0 0.0 2.0 Source: ADSL DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY 1 This is the combination of the two. 2 These values are the same. The tab_footnote() function allows for footnotes to be placed anywhere in the table (using the cells_*() helper functions for targeting). Targeting columns, rows, or other locations can be done with Tidyselect-style helper functions (e.g., matches(), starts_with(), etc.), ID values, or indices. As a final note on the first example, we can specify certain page.* options that make RTF output ideal for regulatory filing purposes. The options employed above in the tab_options() call ensure that pages are in landscape orientation, page numbering for each table is activated, and that page header and footer are used for the table’s headings and footer elements. 3.1.2 rtables The basic_table() function in rtables has the arguments titles, subtitles, main_footer, prov_footer to add titles and footnotes to tables. rtables also supports referential footnotes. So for example a basic demographics table created with rtables via tern with title and footnotes would look as follows: Code resetSession() library(rtables) lyt &lt;- basic_table( title = &quot;Demographic Table - All Patients&quot;, subtitles = c(&quot;Cutoff Date: June 01, 2022&quot;, &quot;Arm B received a placebo.&quot;), main_footer = c(&quot;Missing data is omitted.&quot;) ) |&gt; split_cols_by(&quot;ARM&quot;) |&gt; analyze(c(&quot;AGE&quot;, &quot;SEX&quot;)) build_table(lyt, adsl) Demographic Table - All Patients Cutoff Date: June 01, 2022 Arm B received a placebo. ———————————————————————————————————————————————— A: Drug X B: Placebo C: Combination ———————————————————————————————————————————————— AGE Mean 33.77 35.43 35.43 SEX F 79 82 70 M 55 52 62 ———————————————————————————————————————————————— Missing data is omitted. 3.1.3 flextable Titles and notes can be added and formatted with the flextable package. It is possible to add them in the header and in the footer. Several methods are possible but for most needs, the add_header_lines() and add_footer_lines() functions will be the easiest to use. Let’s create first a flextable from an aggregation that will be used to illustrate the features. Code resetSession() library(flextable) library(dplyr) z &lt;- adsl |&gt; group_by(ARM, SEX) |&gt; summarise(avg = mean(AGE), sd = sd(AGE)) |&gt; tabulator(rows = &quot;SEX&quot;, columns = &quot;ARM&quot;, Y = as_paragraph(avg, &quot; (&quot;, sd, &quot;)&quot;)) |&gt; as_flextable() z .cl-dd6796dc{}.cl-dd5f059e{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-dd62b964{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-dd62b978{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;line-height: 1;background-color:transparent;}.cl-dd62b979{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-dd62b982{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-dd62b98c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;line-height: 1;background-color:transparent;}.cl-dd62b996{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-dd62d7fa{width:0.562in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd62d804{width:0.079in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd62d80e{width:1.015in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd62d818{width:1.065in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd62d819{width:1.442in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd62d81a{width:0.562in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd62d822{width:0.079in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd62d823{width:1.015in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd62d82c{width:1.065in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd62d82d{width:1.442in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd62d836{width:0.562in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd62d837{width:1.015in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd62d838{width:1.065in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd62d840{width:1.442in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}SEXA: Drug XB: PlaceboC: CombinationF32.8 (6.1)34.2 (7.0)35.2 (7.4)M35.2 (7.0)37.3 (8.9)35.7 (8.2) The following shows how to add titles or notes: Code z |&gt; add_header_lines(&quot;hello world&quot;) |&gt; add_footer_lines(&quot;bye bye world&quot;) .cl-dd9129b6{}.cl-dd88e4ae{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-dd8c856e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-dd8c8582{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;line-height: 1;background-color:transparent;}.cl-dd8c8583{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-dd8c8584{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-dd8c858c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;line-height: 1;background-color:transparent;}.cl-dd8c858d{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-dd8c8596{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-dd8c9e1e{width:0.562in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd8c9e28{width:0.079in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd8c9e32{width:1.015in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd8c9e33{width:1.065in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd8c9e3c{width:1.442in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd8c9e3d{width:0.562in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd8c9e46{width:0.079in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd8c9e47{width:1.015in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd8c9e48{width:1.065in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd8c9e50{width:1.442in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd8c9e51{width:0.562in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd8c9e5a{width:1.015in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd8c9e5b{width:1.065in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd8c9e64{width:1.442in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd8c9e65{width:0.562in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd8c9e6e{width:0.079in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd8c9e78{width:1.015in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd8c9e79{width:1.065in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dd8c9e82{width:1.442in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}hello worldSEXA: Drug XB: PlaceboC: CombinationF32.8 (6.1)34.2 (7.0)35.2 (7.4)M35.2 (7.0)37.3 (8.9)35.7 (8.2)bye bye world For Word output, users can prepend a table number that will auto-incremente. Code docx_file &lt;- &quot;reports/flextable-title-01.docx&quot; ft &lt;- add_header_lines(z, &quot;hello world&quot;) |&gt; prepend_chunks( i = 1, j = 1, part = &quot;header&quot;, as_chunk(&quot;Table &quot;), as_word_field(&quot;SEQ tab \\u005C* Arabic&quot;), as_chunk(&quot;: &quot;)) |&gt; add_footer_lines(&quot;bye bye world&quot;) |&gt; theme_vanilla() save_as_docx(ft, ft, path = docx_file) reports/flextable-title-01.docx Footnotes are also available in flextable with function footnote(). The function lets users add footnotes and references to it on the table. Code footnote(z, i = c(1, 2, 2), j = c(1, 5, 7), value = as_paragraph(&quot;hello world&quot;), ref_symbols = &quot;(1)&quot;) .cl-de27ffe4{}.cl-de1ea8e0{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-de1ea8f4{font-family:'DejaVu Sans';font-size:6.6pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-de2259f4{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-de225a08{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;line-height: 1;background-color:transparent;}.cl-de225a12{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-de225a13{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-de225a1c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;line-height: 1;background-color:transparent;}.cl-de225a1d{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-de225a26{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-de235098{width:0.562in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-de2350ac{width:0.079in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-de2350ad{width:1.015in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-de2350ae{width:1.065in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-de2350b6{width:1.442in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-de2350b7{width:0.562in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-de2350b8{width:0.079in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-de2350c0{width:1.015in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-de2350c1{width:1.065in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-de2350ca{width:1.442in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-de2350cb{width:0.562in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-de2350d4{width:1.015in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-de2350d5{width:1.065in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-de2350d6{width:1.442in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-de2350de{width:0.562in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-de2350df{width:0.079in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-de2350e0{width:1.015in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-de2350e8{width:1.065in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-de2350e9{width:1.442in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}SEXA: Drug XB: PlaceboC: CombinationF(1)32.8 (6.1)34.2 (7.0)35.2 (7.4)M35.2 (7.0)37.3 (8.9)(1)35.7 (8.2)(1)(1)hello world 3.1.4 tfrmt The tfrmt() function in the tfrmt package includes the arguments title and subtitle to add titles. Within the footnote_plan() function, the user can nest multiple footnote_structures to add footnotes with superscript reference symbols on groups, columns or labels. To demonstrate, this example will create a mock demographics table: Code resetSession() library(tfrmt) library(dplyr) library(tidyr) # Create mock data df &lt;- crossing(group = c(&quot;AGE&quot;, &quot;SEX&quot;), label = c(&quot;label 1&quot;, &quot;label 2&quot;), column = c(&quot;Drug X&quot;, &quot;Placebo&quot;, &quot;Combination&quot;), param = c(&quot;count&quot;, &quot;percent&quot;)) # Create specification tfrmt_spec &lt;- tfrmt( # Add titles title = &quot;Demographic Table - All Patients&quot;, subtitle = &quot;Cutoff Date: June 01, 2022. Arm B received a placebo.&quot;, # Specify table features group = group, label = label, column = column, param = param, row_grp_plan = row_grp_plan( row_grp_structure(group_val = &quot;.default&quot;, element_block(post_space = &quot; &quot;)) ), # Define cell formatting body_plan = body_plan( frmt_structure(group_val = &quot;.default&quot;, label_val = &quot;.default&quot;, frmt_combine(&quot;{count} ({percent})&quot;, count = frmt(&quot;xx&quot;), percent = frmt(&quot;xx.x&quot;)))), # Add footnotes here footnote_plan = footnote_plan( footnote_structure(footnote_text = &quot;Footnote about column&quot;, column_val = &quot;Combination&quot;), footnote_structure(footnote_text = &quot;Footnote about group&quot;, group_val = &quot;AGE&quot;), marks = &quot;numbers&quot;), ) print_mock_gt(tfrmt_spec, df) #wnmiwaguqu table { font-family: Courier, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #wnmiwaguqu thead, #wnmiwaguqu tbody, #wnmiwaguqu tfoot, #wnmiwaguqu tr, #wnmiwaguqu td, #wnmiwaguqu th { border-style: none; } #wnmiwaguqu p { margin: 0; padding: 0; } #wnmiwaguqu .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 14px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #wnmiwaguqu .gt_caption { padding-top: 4px; padding-bottom: 4px; } #wnmiwaguqu .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #wnmiwaguqu .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #wnmiwaguqu .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #wnmiwaguqu .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #wnmiwaguqu .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #wnmiwaguqu .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #wnmiwaguqu .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #wnmiwaguqu .gt_column_spanner_outer:first-child { padding-left: 0; } #wnmiwaguqu .gt_column_spanner_outer:last-child { padding-right: 0; } #wnmiwaguqu .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #wnmiwaguqu .gt_spanner_row { border-bottom-style: hidden; } #wnmiwaguqu .gt_group_heading { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: rgba(255, 255, 255, 0); border-bottom-style: solid; border-bottom-width: 0px; border-bottom-color: rgba(255, 255, 255, 0); border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #wnmiwaguqu .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: rgba(255, 255, 255, 0); border-bottom-style: solid; border-bottom-width: 0px; border-bottom-color: rgba(255, 255, 255, 0); vertical-align: middle; } #wnmiwaguqu .gt_from_md > :first-child { margin-top: 0; } #wnmiwaguqu .gt_from_md > :last-child { margin-bottom: 0; } #wnmiwaguqu .gt_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #wnmiwaguqu .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 0px; border-right-color: rgba(255, 255, 255, 0); padding-left: 5px; padding-right: 5px; } #wnmiwaguqu .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 0px; border-right-color: rgba(255, 255, 255, 0); padding-left: 5px; padding-right: 5px; vertical-align: top; } #wnmiwaguqu .gt_row_group_first td { border-top-width: 2px; } #wnmiwaguqu .gt_row_group_first th { border-top-width: 2px; } #wnmiwaguqu .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #wnmiwaguqu .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #wnmiwaguqu .gt_first_summary_row.thick { border-top-width: 2px; } #wnmiwaguqu .gt_last_summary_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #wnmiwaguqu .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #wnmiwaguqu .gt_first_grand_summary_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #wnmiwaguqu .gt_last_grand_summary_row_top { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #wnmiwaguqu .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #wnmiwaguqu .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #wnmiwaguqu .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #wnmiwaguqu .gt_footnote { margin: 0px; font-size: 90%; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #wnmiwaguqu .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #wnmiwaguqu .gt_sourcenote { font-size: 90%; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #wnmiwaguqu .gt_left { text-align: left; } #wnmiwaguqu .gt_center { text-align: center; } #wnmiwaguqu .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #wnmiwaguqu .gt_font_normal { font-weight: normal; } #wnmiwaguqu .gt_font_bold { font-weight: bold; } #wnmiwaguqu .gt_font_italic { font-style: italic; } #wnmiwaguqu .gt_super { font-size: 65%; } #wnmiwaguqu .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #wnmiwaguqu .gt_asterisk { font-size: 100%; vertical-align: 0; } #wnmiwaguqu .gt_indent_1 { text-indent: 5px; } #wnmiwaguqu .gt_indent_2 { text-indent: 10px; } #wnmiwaguqu .gt_indent_3 { text-indent: 15px; } #wnmiwaguqu .gt_indent_4 { text-indent: 20px; } #wnmiwaguqu .gt_indent_5 { text-indent: 25px; } Combination1 Drug X Placebo AGE2 label 1 xx (xx.x) xx (xx.x) xx (xx.x) label 2 xx (xx.x) xx (xx.x) xx (xx.x) SEX label 1 xx (xx.x) xx (xx.x) xx (xx.x) label 2 xx (xx.x) xx (xx.x) xx (xx.x) 1 Footnote about column 2 Footnote about group See this vignette for more details on footnotes: link to website 3.1.5 tables The tables package concentrates on the table itself. The titles are generally written as part of the surrounding document. Footnotes would be added after constructing the table by modifying individual entries. Alternatively for HTML output, only the footnote markers need to be added by modifying entries, and then the footnotes can be applied by using toHTML(tab, options = list(doFooter = TRUE, HTMLfooter = HTMLfootnotes(...)). Code resetSession() adsl &lt;- cadsl library(tables) table_options(doCSS = TRUE) sd_in_parens &lt;- function(x) sprintf(&quot;(%.1f)&quot;, sd(x)) tab &lt;- tabular(SEX ~ Heading()*ARM* Heading()*AGE* Heading()*(mean + sd_in_parens), data = adsl) rowLabels(tab)[1,1] &lt;- paste(rowLabels(tab)[1,1], &quot;&lt;sup&gt;a&lt;/sup&gt;&quot;) tab[2,2] &lt;- sprintf(&quot;%s%s&quot;, tab[2,2], &quot;&lt;sup&gt;b&lt;/sup&gt;&quot;) tab[2,3] &lt;- sprintf(&quot;%.2f%s&quot;, tab[2,3], &quot;&lt;sup&gt;b&lt;/sup&gt;&quot;) footnotes &lt;- HTMLfootnotes(tab, a = &quot;This is a label footnote.&quot;, b = &quot;These are cell footnotes.&quot;) toHTML(tab, options = list(HTMLfooter = footnotes, doFooter = TRUE)) .Rtable thead, .Rtable .even { background-color: inherit; } .left { text-align:left; } .center { text-align:center; } .right { text-align:right; } .Rtable, .Rtable thead { border-collapse: collapse; border-style: solid; border-width: medium 0; border-color: inherit; } .Rtable th, .Rtable td { padding-left: 0.5em; padding-right: 0.5em; border-width: 0; } SEX A: Drug X B: Placebo C: Combination aThis is a label footnote. bThese are cell footnotes. F a 32.76 (6.1) 34.24 (7.0) 35.20 (7.4) M 35.22 (7.0)b 37.31b (8.9) 35.69 (8.2) 3.1.6 tidytlg The gentlg() function in the tidytlg package includes the title argument for adding title and the footers argument for adding footnotes to the table output. Users can include a vector of character strings for multiple lines of footnotes (please see an example below). At the bottom line of the footnotes, the file name of the table and the path of the table program along with the datetime stamp are automatically created. Code resetSession() library(dplyr) library(tidytlg) adsl &lt;- formatters::ex_adsl # create analysis set row t1 &lt;- freq(adsl, rowvar = &quot;ITTFL&quot;, colvar = &quot;ARM&quot;, statlist = statlist(&quot;n&quot;), subset = ITTFL == &quot;Y&quot;, rowtext = &quot;Analysis set: ITT&quot;) # create univariate stats for age t2 &lt;- univar(adsl, rowvar = &quot;AGE&quot;, colvar = &quot;ARM&quot;, statlist = statlist(c(&quot;N&quot;, &quot;MEANSD&quot;, &quot;MEDIAN&quot;, &quot;RANGE&quot;, &quot;IQRANGE&quot;)), row_header = &quot;Age (years)&quot;, decimal = 0) tbl &lt;- bind_table(t1, t2) # assign table id tblid &lt;- &quot;Table01&quot; # output the analysis results gentlg(huxme = tbl, format = &quot;HTML&quot;, print.hux = FALSE, file = tblid, orientation = &quot;portrait&quot;, title = &quot;Demographic and Baseline Characteristics; Intent-to-treat Analysis Set&quot;, footers = c(&quot;Key: IQ = Interquartile&quot;,&quot;Note: N reflects non-missing values&quot;), colheader = c(&quot;&quot;,&quot;A: Drug X&quot;,&quot;B: Placebo&quot;,&quot;C: Combination&quot;)) Table 3.1: Table01: &emsp; Demographic and Baseline Characteristics; Intent-to-treat Analysis Set A: Drug X B: Placebo C: Combination Analysis set: ITT134134132 Age (years) N134134132 Mean (SD)33.8 (6.55)35.4 (7.90)35.4 (7.72) Median33.035.035.0 Range(21; 50)(21; 62)(20; 69) IQ range(28.0; 39.0)(30.0; 40.0)(30.0; 40.0) Key: IQ = Interquartile Note: N reflects non-missing values [table01.html][/home/runner/work/_temp/46285d38-8d6e-42ac-8e33-f3279fd14a78] 07SEP2023, 17:42 To programmatically incorporate titles and footnotes into each table program, users can create an excel file called titles.xls (see below snapshot) with the columns of \"TABLE ID\",\"IDENTIFIER\",\"TEXT\". In the gentlg() function call, users just need to provide the argument of title_file for specifying the location of titles.xls. Then the title and footnotes corresponding to the table ID will be automatically included in the table output. Users need to make sure the correct table ID is used for the file argument of the gentlg() function call. Code gentlg(huxme = tbl, format = &quot;HTML&quot;, print.hux = FALSE, file = tblid, orientation = &quot;portrait&quot;, title_file = system.file(&quot;extdata/titles.xls&quot;, package = &quot;tidytlg&quot;), colheader = c(&quot;&quot;,&quot;A: Drug X&quot;,&quot;B: Placebo&quot;,&quot;C: Combination&quot;)) 3.2 Captions A caption is a single paragraph of text describing the table. Captions are often used because they allow you to cross-reference tables or list them in a ‘list of tables’ with the corresponding page numbers. 3.2.1 flextable The set_caption() function in flextable is the recommended way to add captions. Code resetSession() library(flextable) flextable(head(cars)) |&gt; set_caption( caption = &quot;a caption&quot;, autonum = officer::run_autonum(seq_id = &quot;tab&quot;, bkm = &quot;flextable-label&quot;)) .cl-dfc6cd30{}.cl-dfbf1414{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-dfc28ba8{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-dfc2a0d4{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dfc2a0de{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-dfc2a0df{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;} Table 3.2: a caption speeddist4241074722816910 In bookdown, use the syntax \\@ref(tab:flextable-label) to create a linked reference to the table. Here is an example of a reference: 3.2. With Quarto, the R chunk code should be transformed as: Code #| label: tbl-flextable-label #| tbl-cap: a caption flextable(head(cars)) 3.2.2 tables As with titles, captions would be added as part of the surrounding document rather than part of the table object. 3.3 Pagination Historically tables have been printed to paper for submissions. Hence large tables that would not fit onto a single printed page (e.g. letter &amp; portrait) would have to be split into multiple tables that can be printed to the preferred page size. This process of splitting the table is called pagination of tables. Illustration of a table being paginated in both horizontal and vertical directions Pagination of complex structured tables is complicated by the fact that some rows of such tables require contextual information – e.g., any group labels or summaries they fall under – to be fully understood. This means that any such context must be repeated after a page break for that page to be understood in isolation. 3.3.1 rtables rtables supports context-preserving pagination in both the horizontal and vertical directions (via the interface provided by formatters) via calling paginate_table() directly, and within the export_as_* rendering functions. Users specify page dimensions (in either inches, or lines long and characters wide) and font information and the pagination and export machinery paginates the table such that each portion will fit fully on its page when rendered as text, including title, footer, and referential footnote materials. For vertical pagination, summary rows (whether label rows, or so-called content rows containing summary values) are repeated after page breaks to preserve context on the following page. We see this in action below when pagination occurs within the strtata B - ASIAN facet of the the following table Code resetSession() library(rtables) lyt &lt;- basic_table(title = &quot;main title&quot;, subtitles = &quot;subtitle&quot;, main_footer = &quot;main footer&quot;, prov_footer = &quot;provenance footer&quot;) |&gt; split_cols_by(&quot;ARM&quot;) |&gt; split_cols_by(&quot;SEX&quot;, split_fun = keep_split_levels(c(&quot;F&quot;, &quot;M&quot;))) |&gt; split_rows_by(&quot;STRATA1&quot;, split_fun = keep_split_levels(c(&quot;A&quot;, &quot;B&quot;))) |&gt; split_rows_by(&quot;RACE&quot;, split_fun = keep_split_levels(c(&quot;ASIAN&quot;, &quot;WHITE&quot;))) |&gt; summarize_row_groups() |&gt; analyze(&quot;AGE&quot;, afun = function(x, ...) in_rows(&quot;mean (sd)&quot; = rcell(c(mean(x), sd(x)), format = &quot;xx.x (xx.x)&quot;), &quot;range&quot; = rcell(range(x), format = &quot;xx.x - xx.x&quot;))) tbl &lt;- build_table(lyt, ex_adsl) tbl main title subtitle ————————————————————————————————————————————————————————————————————————————————————————————————— A: Drug X B: Placebo C: Combination F M F M F M ————————————————————————————————————————————————————————————————————————————————————————————————— A ASIAN 11 (13.9%) 10 (19.6%) 14 (18.2%) 10 (18.2%) 11 (16.7%) 7 (11.7%) mean (sd) 29.0 (3.9) 35.0 (6.1) 31.1 (5.5) 40.9 (10.3) 33.7 (4.0) 37.0 (5.9) range 24.0 - 35.0 28.0 - 43.0 23.0 - 46.0 27.0 - 62.0 28.0 - 40.0 28.0 - 47.0 WHITE 5 (6.3%) 3 (5.9%) 3 (3.9%) 3 (5.5%) 3 (4.5%) 5 (8.3%) mean (sd) 34.4 (2.9) 35.3 (8.5) 33.7 (2.9) 38.7 (10.3) 29.7 (6.1) 32.2 (7.7) range 30.0 - 37.0 29.0 - 45.0 32.0 - 37.0 30.0 - 50.0 23.0 - 35.0 25.0 - 45.0 B ASIAN 11 (13.9%) 9 (17.6%) 15 (19.5%) 7 (12.7%) 11 (16.7%) 14 (23.3%) mean (sd) 29.5 (5.7) 35.3 (7.1) 38.7 (10.0) 37.6 (10.6) 41.5 (9.6) 36.1 (7.5) range 23.0 - 40.0 27.0 - 48.0 26.0 - 58.0 26.0 - 58.0 32.0 - 64.0 25.0 - 48.0 WHITE 5 (6.3%) 4 (7.8%) 8 (10.4%) 4 (7.3%) 5 (7.6%) 2 (3.3%) mean (sd) 35.0 (3.4) 39.0 (11.2) 32.2 (5.3) 33.0 (9.8) 33.4 (6.5) 29.0 (4.2) range 31.0 - 39.0 24.0 - 48.0 26.0 - 42.0 21.0 - 42.0 28.0 - 44.0 26.0 - 32.0 ————————————————————————————————————————————————————————————————————————————————————————————————— main footer provenance footer paginate_table(), then, breaks our table into subtables – including repeated context where appropriate – which will fit on physical pages (we use 5.2 x 3.5 inch “pages” for illustrative purposes here): Code paginate_table(tbl, pg_width = 5.2, pg_height = 3.5, min_siblings = 0) [[1]] main title subtitle ——————————————————————————————————————————————————————— A: Drug X B: Placebo F M F ——————————————————————————————————————————————————————— A ASIAN 11 (13.9%) 10 (19.6%) 14 (18.2%) mean (sd) 29.0 (3.9) 35.0 (6.1) 31.1 (5.5) range 24.0 - 35.0 28.0 - 43.0 23.0 - 46.0 WHITE 5 (6.3%) 3 (5.9%) 3 (3.9%) mean (sd) 34.4 (2.9) 35.3 (8.5) 33.7 (2.9) range 30.0 - 37.0 29.0 - 45.0 32.0 - 37.0 B ASIAN 11 (13.9%) 9 (17.6%) 15 (19.5%) mean (sd) 29.5 (5.7) 35.3 (7.1) 38.7 (10.0) ——————————————————————————————————————————————————————— main footer provenance footer [[2]] main title subtitle ——————————————————————————————————————————————————————— B: Placebo C: Combination M F M ——————————————————————————————————————————————————————— A ASIAN 10 (18.2%) 11 (16.7%) 7 (11.7%) mean (sd) 40.9 (10.3) 33.7 (4.0) 37.0 (5.9) range 27.0 - 62.0 28.0 - 40.0 28.0 - 47.0 WHITE 3 (5.5%) 3 (4.5%) 5 (8.3%) mean (sd) 38.7 (10.3) 29.7 (6.1) 32.2 (7.7) range 30.0 - 50.0 23.0 - 35.0 25.0 - 45.0 B ASIAN 7 (12.7%) 11 (16.7%) 14 (23.3%) mean (sd) 37.6 (10.6) 41.5 (9.6) 36.1 (7.5) ——————————————————————————————————————————————————————— main footer provenance footer [[3]] main title subtitle ——————————————————————————————————————————————————————— A: Drug X B: Placebo F M F ——————————————————————————————————————————————————————— B ASIAN 11 (13.9%) 9 (17.6%) 15 (19.5%) range 23.0 - 40.0 27.0 - 48.0 26.0 - 58.0 WHITE 5 (6.3%) 4 (7.8%) 8 (10.4%) mean (sd) 35.0 (3.4) 39.0 (11.2) 32.2 (5.3) range 31.0 - 39.0 24.0 - 48.0 26.0 - 42.0 ——————————————————————————————————————————————————————— main footer provenance footer [[4]] main title subtitle ——————————————————————————————————————————————————————— B: Placebo C: Combination M F M ——————————————————————————————————————————————————————— B ASIAN 7 (12.7%) 11 (16.7%) 14 (23.3%) range 26.0 - 58.0 32.0 - 64.0 25.0 - 48.0 WHITE 4 (7.3%) 5 (7.6%) 2 (3.3%) mean (sd) 33.0 (9.8) 33.4 (6.5) 29.0 (4.2) range 21.0 - 42.0 28.0 - 44.0 26.0 - 32.0 ——————————————————————————————————————————————————————— main footer provenance footer rtables also supports page-by splits in its layouting framework, which declares that – regardless of rendering dimensions – pagination should occur between distinct levels of a variable. Each of these “pagination sections” have an additional title specific to the level, and are independently paginated for dimension as needed. Code lyt2 &lt;- basic_table(title = &quot;main title&quot;, subtitles = &quot;subtitle&quot;, main_footer = &quot;main footer&quot;, prov_footer = &quot;provenance footer&quot;) |&gt; split_cols_by(&quot;ARM&quot;) |&gt; split_rows_by(&quot;STRATA1&quot;, split_fun = keep_split_levels(c(&quot;A&quot;, &quot;B&quot;)), page_by = TRUE, page_prefix = &quot;Stratum&quot;) |&gt; split_rows_by(&quot;RACE&quot;, split_fun = keep_split_levels(c(&quot;ASIAN&quot;, &quot;WHITE&quot;))) |&gt; summarize_row_groups() |&gt; analyze(&quot;AGE&quot;, afun = function(x, ...) in_rows(&quot;mean (sd)&quot; = rcell(c(mean(x), sd(x)), format = &quot;xx.x (xx.x)&quot;), &quot;range&quot; = rcell(range(x), format = &quot;xx.x - xx.x&quot;))) tbl2 &lt;- build_table(lyt2, ex_adsl) paginate_table(tbl2, lpp = 16) $A1 main title subtitle Stratum: A ———————————————————————————————————————————————————————— A: Drug X B: Placebo C: Combination ———————————————————————————————————————————————————————— ASIAN 22 (16.4%) 24 (17.9%) 19 (14.4%) mean (sd) 31.9 (5.7) 35.2 (9.1) 35.2 (4.8) range 24.0 - 43.0 23.0 - 62.0 28.0 - 47.0 ———————————————————————————————————————————————————————— main footer provenance footer $A2 main title subtitle Stratum: A ———————————————————————————————————————————————————————— A: Drug X B: Placebo C: Combination ———————————————————————————————————————————————————————— WHITE 8 (6.0%) 7 (5.2%) 8 (6.1%) mean (sd) 34.8 (5.1) 34.9 (7.5) 31.2 (6.8) range 29.0 - 45.0 27.0 - 50.0 23.0 - 45.0 ———————————————————————————————————————————————————————— main footer provenance footer $B1 main title subtitle Stratum: B ———————————————————————————————————————————————————————— A: Drug X B: Placebo C: Combination ———————————————————————————————————————————————————————— ASIAN 20 (14.9%) 23 (17.2%) 25 (18.9%) mean (sd) 32.1 (6.9) 38.2 (9.8) 38.4 (8.8) range 23.0 - 48.0 26.0 - 58.0 25.0 - 64.0 ———————————————————————————————————————————————————————— main footer provenance footer $B2 main title subtitle Stratum: B ———————————————————————————————————————————————————————— A: Drug X B: Placebo C: Combination ———————————————————————————————————————————————————————— WHITE 10 (7.5%) 12 (9.0%) 7 (5.3%) mean (sd) 35.9 (7.6) 32.5 (6.7) 32.1 (6.0) range 24.0 - 48.0 21.0 - 42.0 26.0 - 44.0 ———————————————————————————————————————————————————————— main footer provenance footer 3.3.2 flextable The pagination of flextable objects let user control their position in relation to page breaks. It can prevent breaks between tables rows of a same group. Function paginate() let you define this pagination, this feature is only available for RTF and Word outputs; see the documentation about pagination. 3.3.3 tables Tables that span multiple pages are supported in PDF output using the LaTeX longtable package, specified when converting to LaTeX. 3.4 Rendering Tables The choice of output format is often dictated by your company’s processes to include the tables in a report. The packages discussed in this book vary in regard to which output formats are supported natively. The following table shows the current output capabilities for each package. ASCII PDF HTML .docx RTF .pptx grid flextable ✓ ✓ ✓ ✓ ✓ ✓ gt ✓ ✓ ✓ ✓ rtables ✓ ✓ ✓ ✓ ✓ ✓ ✓ tables ✓ ✓ ✓ tfrmt ✓ ✓ ✓ ✓ tidytlg ✓ ✓ If the format you need is not supported by the package you would like to use, there are still options. For example, tables produced in rtables and tables can be converted to flextable objects, giving access to the other output formats. Pandoc (MacFarlane 2023) is another option: it can convert documents between a wide range of document formats. References "],["commontables.html", "Chapter 4 Commonly Used Tables 4.1 Demographic Tables 4.2 Adverse Event Tables 4.3 Time to Event Analysis Tables 4.4 Concomitant Medications 4.5 Disposition", " Chapter 4 Commonly Used Tables 4.1 Demographic Tables 4.1.1 rtables Using rtables only: Code resetSession() library(rtables) a_demo_num &lt;- function(x) { in_rows(n = length(x), &quot;Mean (SD)&quot; = rcell(c(mean(x, na.rm = TRUE), sd(x, na.rm=TRUE)), format = &quot;xx.x (xx.x)&quot;), &quot;Median&quot; = median(x,na.rm = TRUE), &quot;Min - Max&quot; = rcell(range(x, na.rm = TRUE), format = &quot;xx.x - xx.x&quot;)) } a_demo_fac &lt;- function(x) { in_rows(.list = c(c(n = length(x)), table(x))) } lyt &lt;- basic_table(title = &quot;x.x: Study Subject Data&quot;, subtitles= c(&quot;x.x.x: Demographic Characteristics&quot;, &quot;Table x.x.x.x: Demographic Characteristics - Full Analysis Set&quot;), prov_footer = &quot;Source: ADSL DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY&quot;) |&gt; split_cols_by(&quot;ARM&quot;) |&gt; analyze(c(&quot;AGE&quot;, &quot;SEX&quot;, &quot;COUNTRY&quot;), afun = list(AGE = a_demo_num, SEX = a_demo_fac, COUNTRY = a_demo_fac)) build_table(lyt, ex_adsl) x.x: Study Subject Data x.x.x: Demographic Characteristics Table x.x.x.x: Demographic Characteristics - Full Analysis Set ——————————————————————————————————————————————————————————————— A: Drug X B: Placebo C: Combination ——————————————————————————————————————————————————————————————— AGE n 134 134 132 Mean (SD) 33.8 (6.6) 35.4 (7.9) 35.4 (7.7) Median 33 35 35 Min - Max 21.0 - 50.0 21.0 - 62.0 20.0 - 69.0 SEX n 134 134 132 F 79 77 66 M 51 55 60 U 3 2 4 UNDIFFERENTIATED 1 0 2 COUNTRY n 134 134 132 CHN 74 81 64 USA 10 13 17 BRA 13 7 10 PAK 12 9 10 NGA 8 7 11 RUS 5 8 6 JPN 5 4 9 GBR 4 3 2 CAN 3 2 3 CHE 0 0 0 ——————————————————————————————————————————————————————————————— Source: ADSL DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY 4.1.2 tern (+ rtables) Code resetSession() library(tern) lyt &lt;- basic_table(title = &quot;x.x: Study Subject Data&quot;, subtitles= c(&quot;x.x.x: Demographic Characteristics&quot;, &quot;Table x.x.x.x: Demographic Characteristics - Full Analysis Set&quot;), prov_footer = &quot;Source: ADSL DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY&quot;) |&gt; split_cols_by(&quot;ARM&quot;) |&gt; summarize_vars(c(&quot;AGE&quot;, &quot;SEX&quot;, &quot;COUNTRY&quot;)) Warning: `summarize_vars()` was deprecated in tern 0.8.5.9010. ℹ Please use `analyze_vars()` instead. This warning is displayed once every 8 hours. Call `lifecycle::last_lifecycle_warnings()` to see where this warning was generated. Code build_table(lyt, ex_adsl) x.x: Study Subject Data x.x.x: Demographic Characteristics Table x.x.x.x: Demographic Characteristics - Full Analysis Set ——————————————————————————————————————————————————————————————— A: Drug X B: Placebo C: Combination ——————————————————————————————————————————————————————————————— AGE n 134 134 132 Mean (SD) 33.8 (6.6) 35.4 (7.9) 35.4 (7.7) Median 33.0 35.0 35.0 Min - Max 21.0 - 50.0 21.0 - 62.0 20.0 - 69.0 SEX n 134 134 132 F 79 (59%) 77 (57.5%) 66 (50%) M 51 (38.1%) 55 (41%) 60 (45.5%) U 3 (2.2%) 2 (1.5%) 4 (3%) UNDIFFERENTIATED 1 (0.7%) 0 2 (1.5%) COUNTRY n 134 134 132 CHN 74 (55.2%) 81 (60.4%) 64 (48.5%) USA 10 (7.5%) 13 (9.7%) 17 (12.9%) BRA 13 (9.7%) 7 (5.2%) 10 (7.6%) PAK 12 (9%) 9 (6.7%) 10 (7.6%) NGA 8 (6%) 7 (5.2%) 11 (8.3%) RUS 5 (3.7%) 8 (6%) 6 (4.5%) JPN 5 (3.7%) 4 (3%) 9 (6.8%) GBR 4 (3%) 3 (2.2%) 2 (1.5%) CAN 3 (2.2%) 2 (1.5%) 3 (2.3%) CHE 0 0 0 ——————————————————————————————————————————————————————————————— Source: ADSL DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY 4.1.3 gt Code resetSession() library(gt) library(tidyverse) # We will use ex_adsl but will assign a unit to the Age column ex_adsl &lt;- formatters::ex_adsl gt_adsl &lt;- ex_adsl attr(gt_adsl$AGE, &quot;units&quot;) &lt;- &quot;Years&quot; # This is a customized summary function # It creates numeric and categorical summaries for specified variables, following the rtables exmaple custom_summary &lt;- function(df, group_var, sum_var){ group_var &lt;- rlang::ensym(group_var) sum_var &lt;- rlang::ensym(sum_var) is_categorical &lt;- is.character(eval(expr(`$`(df, !!sum_var)))) | is.factor(eval(expr(`$`(df, !!sum_var)))) if (is_categorical){ df &lt;- df |&gt; dplyr::group_by(!!group_var) |&gt; dplyr::mutate(N = n()) |&gt; dplyr::ungroup() |&gt; dplyr::group_by(!!group_var, !!sum_var) |&gt; dplyr::summarize( val = n(), sd = 100*n()/mean(N), .groups = &quot;drop&quot; ) |&gt; tidyr::pivot_wider(id_cols = !!sum_var, names_from = !!group_var, values_from = c(val, sd)) |&gt; dplyr::rename(label = !!sum_var) |&gt; dplyr::mutate(isnum = FALSE, across(where(is.numeric), ~ifelse(is.na(.), 0, .))) sum_unit &lt;- &quot;, n (%)&quot; } else { sum_unit &lt;- sprintf(&quot; (%s)&quot;, attr(eval(expr(`$`(df, !!sum_var))), &quot;units&quot;)) df &lt;- df |&gt; dplyr::group_by(!!group_var) |&gt; dplyr::summarize( n = sum(!is.na(!!sum_var)), mean = mean(!!sum_var, na.rm = TRUE), sd = sd(!!sum_var, na.rm = TRUE), median = median(!!sum_var, na.rm = TRUE), min = min(!!sum_var, na.rm = TRUE), max = max(!!sum_var, na.rm = TRUE), min_max = NA, .groups = &quot;drop&quot; ) |&gt; tidyr::pivot_longer(cols = c(n, mean, median, min_max), names_to = &quot;label&quot;, values_to = &quot;val&quot;) |&gt; dplyr::mutate(sd = ifelse(label == &quot;mean&quot;, sd, NA), max = ifelse(label == &quot;min_max&quot;, max, NA), min = ifelse(label == &quot;min_max&quot;, min, NA), label = dplyr::recode(label, &quot;mean&quot; = &quot;Mean (SD)&quot;, &quot;min_max&quot; = &quot;Min - Max&quot;, &quot;median&quot; = &quot;Median&quot;)) |&gt; tidyr::pivot_wider(id_cols = label, names_from = !!group_var, values_from = c(val, sd, min, max)) |&gt; dplyr::mutate(isnum = TRUE) } df |&gt; dplyr::mutate(category = paste0(stringr::str_to_title(deparse(substitute(!!sum_var))), sum_unit)) } # Perform aggregation for variables Age, Sex and Country adsl_summary &lt;- purrr::map_df(.x = vars(AGE, SEX, COUNTRY), .f = ~custom_summary(df = gt_adsl, group_var = ARM, sum_var = !!.x)) # Count number of patients per Arm adsl_n &lt;- ex_adsl |&gt; dplyr::summarize( NLBL = sprintf(&quot;%s \\n(N=%i)&quot;,unique(ARM), dplyr::n()), .by = ARM ) header_n &lt;- as.list(adsl_n$NLBL) names(header_n) &lt;- paste0(&quot;val_&quot;, adsl_n$ARM) # gt gt(adsl_summary, rowname_col = &quot;label&quot;, groupname_col = &quot;category&quot;) |&gt; tab_header( title = &quot;x.x: Study Subject Data&quot;, subtitle = md(&quot;x.x.x: Demographic Characteristics \\n Table x.x.x.x: Demographic Characteristics - Full Analysis Set&quot;), preheader = c(&quot;Protocol: XXXXX&quot;, &quot;Cutoff date: DDMMYYYY&quot;) ) |&gt; tab_source_note(&quot;Source: ADSL DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY&quot;) |&gt; opt_align_table_header(align = &quot;left&quot;) |&gt; fmt_integer(columns = starts_with(c(&quot;val&quot;, &quot;min&quot;, &quot;max&quot;)), rows = label != &quot;Mean (SD)&quot;) |&gt; fmt_number(columns = starts_with(c(&quot;val&quot;, &quot;sd&quot;)), rows = label == &quot;Mean (SD)&quot;, decimals = 1) |&gt; fmt_number(columns = starts_with(&quot;sd&quot;), rows = isnum == FALSE, decimals = 1) |&gt; sub_missing(missing_text = &quot;&quot;) |&gt; summary_rows( groups = c(&quot;Sex, n (%)&quot;, &quot;Country, n (%)&quot;), columns = starts_with(&quot;val&quot;), fns = list(n = ~sum(.)), missing_text = &quot;&quot;, side = &quot;top&quot; ) |&gt; cols_merge_n_pct(col_n = &quot;val_A: Drug X&quot;, col_pct = &quot;sd_A: Drug X&quot;) |&gt; cols_merge_n_pct(col_n = &quot;val_B: Placebo&quot;, col_pct = &quot;sd_B: Placebo&quot;) |&gt; cols_merge_n_pct(col_n = &quot;val_C: Combination&quot;, col_pct = &quot;sd_C: Combination&quot;) |&gt; cols_merge_range(col_begin = &quot;min_A: Drug X&quot;, col_end = &quot;max_A: Drug X&quot;, sep = &quot; - &quot;) |&gt; cols_merge_range(col_begin = &quot;min_B: Placebo&quot;, col_end = &quot;max_B: Placebo&quot;, sep = &quot; - &quot;) |&gt; cols_merge_range(col_begin = &quot;min_C: Combination&quot;, col_end = &quot;max_C: Combination&quot;, sep = &quot; - &quot;) |&gt; cols_merge(columns = c(&quot;val_A: Drug X&quot;, &quot;min_A: Drug X&quot;), pattern = &quot;{1}{2}&quot;) |&gt; cols_merge(columns = c(&quot;val_B: Placebo&quot;, &quot;min_B: Placebo&quot;), pattern = &quot;{1}{2}&quot;) |&gt; cols_merge(columns = c(&quot;val_C: Combination&quot;, &quot;min_C: Combination&quot;), pattern = &quot;{1}{2}&quot;) |&gt; cols_hide(columns = isnum) |&gt; cols_align( align = &quot;center&quot;, columns = c(&quot;val_A: Drug X&quot;, &quot;val_B: Placebo&quot;, &quot;val_C: Combination&quot;) ) |&gt; cols_align( align = &quot;left&quot;, columns = 1 ) |&gt; tab_style( style = cell_text(indent = px(10)), locations = cells_stub() ) |&gt; cols_label( .list = header_n, .fn = md ) |&gt; tab_options( table.font.size = 9, page.orientation = &quot;landscape&quot;, page.numbering = TRUE, page.header.use_tbl_headings = TRUE, page.footer.use_tbl_notes = TRUE) #qswybntmgx table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #qswybntmgx thead, #qswybntmgx tbody, #qswybntmgx tfoot, #qswybntmgx tr, #qswybntmgx td, #qswybntmgx th { border-style: none; } #qswybntmgx p { margin: 0; padding: 0; } #qswybntmgx .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 9px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #qswybntmgx .gt_caption { padding-top: 4px; padding-bottom: 4px; } #qswybntmgx .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #qswybntmgx .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #qswybntmgx .gt_heading { background-color: #FFFFFF; text-align: left; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #qswybntmgx .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #qswybntmgx .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #qswybntmgx .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #qswybntmgx .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #qswybntmgx .gt_column_spanner_outer:first-child { padding-left: 0; } #qswybntmgx .gt_column_spanner_outer:last-child { padding-right: 0; } #qswybntmgx .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #qswybntmgx .gt_spanner_row { border-bottom-style: hidden; } #qswybntmgx .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #qswybntmgx .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #qswybntmgx .gt_from_md > :first-child { margin-top: 0; } #qswybntmgx .gt_from_md > :last-child { margin-bottom: 0; } #qswybntmgx .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #qswybntmgx .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #qswybntmgx .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #qswybntmgx .gt_row_group_first td { border-top-width: 2px; } #qswybntmgx .gt_row_group_first th { border-top-width: 2px; } #qswybntmgx .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #qswybntmgx .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #qswybntmgx .gt_first_summary_row.thick { border-top-width: 2px; } #qswybntmgx .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #qswybntmgx .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #qswybntmgx .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #qswybntmgx .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #qswybntmgx .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #qswybntmgx .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #qswybntmgx .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #qswybntmgx .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #qswybntmgx .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #qswybntmgx .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #qswybntmgx .gt_left { text-align: left; } #qswybntmgx .gt_center { text-align: center; } #qswybntmgx .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #qswybntmgx .gt_font_normal { font-weight: normal; } #qswybntmgx .gt_font_bold { font-weight: bold; } #qswybntmgx .gt_font_italic { font-style: italic; } #qswybntmgx .gt_super { font-size: 65%; } #qswybntmgx .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #qswybntmgx .gt_asterisk { font-size: 100%; vertical-align: 0; } #qswybntmgx .gt_indent_1 { text-indent: 5px; } #qswybntmgx .gt_indent_2 { text-indent: 10px; } #qswybntmgx .gt_indent_3 { text-indent: 15px; } #qswybntmgx .gt_indent_4 { text-indent: 20px; } #qswybntmgx .gt_indent_5 { text-indent: 25px; } x.x: Study Subject Data x.x.x: Demographic Characteristics Table x.x.x.x: Demographic Characteristics - Full Analysis Set A: Drug X (N=134) B: Placebo (N=134) C: Combination (N=132) Age (Years) n 134 134 132 Mean (SD) 33.8 (6.6) 35.4 (7.9) 35.4 (7.7) Median 33 35 35 Min - Max 21 - 50 21 - 62 20 - 69 Sex, n (%) n 134 134 132 F 79 (59.0) 77 (57.5) 66 (50.0) M 51 (38.1) 55 (41.0) 60 (45.5) U 3 (2.2) 2 (1.5) 4 (3.0) UNDIFFERENTIATED 1 (0.7) 0 2 (1.5) Country, n (%) n 134 134 132 CHN 74 (55.2) 81 (60.4) 64 (48.5) USA 10 (7.5) 13 (9.7) 17 (12.9) BRA 13 (9.7) 7 (5.2) 10 (7.6) PAK 12 (9.0) 9 (6.7) 10 (7.6) NGA 8 (6.0) 7 (5.2) 11 (8.3) RUS 5 (3.7) 8 (6.0) 6 (4.5) JPN 5 (3.7) 4 (3.0) 9 (6.8) GBR 4 (3.0) 3 (2.2) 2 (1.5) CAN 3 (2.2) 2 (1.5) 3 (2.3) Source: ADSL DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY 4.1.4 flextable Code # The two steps in creating &#39;Demographic Tables&#39; are: # # - summarize the information with the `flextable::summarizor()` function. # It computes a set of statistics for each variable by groups. It returns # a data.frame ready to be used by `flextable::as_flextable()`. # - Create the flextable with the `as_flextable()` function. resetSession() ex_adsl &lt;- formatters::ex_adsl library(flextable) library(tidyverse) library(officer) set_flextable_defaults( border.color = &quot;#AAAAAA&quot;, font.family = &quot;Open Sans&quot;, font.size = 10, padding = 3, line_spacing = 1.4 ) # data adsl &lt;- select(ex_adsl, AGE, SEX, COUNTRY, ARM) # In the illustration, we use labels from the column attributes. col_labels &lt;- map_chr(adsl, function(x) attr(x, &quot;label&quot;)) # Now let&#39;s use the labels and customize the ‘flextable’ output. ft &lt;- summarizor(adsl, by = &quot;ARM&quot;) |&gt; as_flextable(sep_w = 0, separate_with = &quot;variable&quot;, spread_first_col = TRUE) |&gt; align(i = ~ !is.na(variable), align = &quot;left&quot;) |&gt; prepend_chunks(i = ~ is.na(variable), j =&quot;stat&quot;, as_chunk(&quot;\\t&quot;) ) |&gt; labelizor(j = c(&quot;stat&quot;), labels = col_labels, part = &quot;all&quot;) |&gt; autofit() |&gt; add_header_lines( c(&quot;x.x: Study Subject Data&quot;, &quot;x.x.x: Demographic Characteristics&quot;, &quot;Table x.x.x.x: Demographic Characteristics - Full Analysis Set&quot;)) |&gt; add_footer_lines(&quot;Source: ADSL DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY&quot;) ft .cl-e3d34e94{}.cl-e3c9c91e{font-family:'Open Sans';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e3cdbce0{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:3pt;padding-top:3pt;padding-left:3pt;padding-right:3pt;line-height: 1.4;background-color:transparent;}.cl-e3cdbcf4{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:3pt;padding-top:3pt;padding-left:3pt;padding-right:3pt;line-height: 1.4;background-color:transparent;}.cl-e3cdbcf5{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:3pt;padding-top:3pt;padding-left:3pt;padding-right:3pt;line-height: 1.4;background-color:transparent;}.cl-e3cdbcfe{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:3pt;padding-top:3pt;padding-left:3pt;padding-right:3pt;line-height: 1.4;background-color:transparent;}.cl-e3cdbcff{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:3pt;padding-top:3pt;padding-left:3pt;padding-right:3pt;line-height: 1.4;background-color:transparent;}.cl-e3cdda2c{width:2.016in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 1.5pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cdda36{width:0.957in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 1.5pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cdda40{width:1.206in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 1.5pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cdda41{width:2.016in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cdda4a{width:0.957in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cdda4b{width:1.206in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cdda54{width:2.016in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cdda68{width:0.957in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cdda69{width:1.206in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cdda72{width:2.016in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cdda73{width:0.957in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cdda7c{width:1.206in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cdda86{width:2.016in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cdda87{width:0.957in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cdda90{width:1.206in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cdda91{width:2.016in;background-color:transparent;vertical-align: top;border-bottom: 0.75pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cdda9a{width:0.957in;background-color:transparent;vertical-align: top;border-bottom: 0.75pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cdda9b{width:1.206in;background-color:transparent;vertical-align: top;border-bottom: 0.75pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cddaa4{width:2.016in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cddaae{width:0.957in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cddaaf{width:1.206in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cddab8{width:2.016in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cddab9{width:0.957in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cddac2{width:1.206in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cddacc{width:2.016in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cddacd{width:0.957in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cddad6{width:1.206in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cddad7{width:2.016in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cddad8{width:0.957in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cddae0{width:1.206in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cddae1{width:2.016in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cddaea{width:0.957in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cddaeb{width:1.206in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cddaf4{width:2.016in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cddafe{width:0.957in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3cddaff{width:1.206in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}x.x: Study Subject Datax.x.x: Demographic CharacteristicsTable x.x.x.x: Demographic Characteristics - Full Analysis SetA: Drug X(N=134)B: Placebo(N=134)C: Combination(N=132)Age&emsp;Mean (SD)33.8 (6.6)35.4 (7.9)35.4 (7.7)&emsp;Median (IQR)33.0 (11.0)35.0 (10.0)35.0 (10.0)&emsp;Range21.0 - 50.021.0 - 62.020.0 - 69.0&emsp;Missing0 (0.00%)0 (0.00%)0 (0.00%)Sex&emsp;F79 (58.96%)77 (57.46%)66 (50.00%)&emsp;M51 (38.06%)55 (41.04%)60 (45.45%)&emsp;U3 (2.24%)2 (1.49%)4 (3.03%)&emsp;UNDIFFERENTIATED1 (0.75%)0 (0.00%)2 (1.52%)&emsp;Missing0 (0.00%)0 (0.00%)0 (0.00%)Country&emsp;CHN74 (55.22%)81 (60.45%)64 (48.48%)&emsp;USA10 (7.46%)13 (9.70%)17 (12.88%)&emsp;BRA13 (9.70%)7 (5.22%)10 (7.58%)&emsp;PAK12 (8.96%)9 (6.72%)10 (7.58%)&emsp;NGA8 (5.97%)7 (5.22%)11 (8.33%)&emsp;RUS5 (3.73%)8 (5.97%)6 (4.55%)&emsp;JPN5 (3.73%)4 (2.99%)9 (6.82%)&emsp;GBR4 (2.99%)3 (2.24%)2 (1.52%)&emsp;CAN3 (2.24%)2 (1.49%)3 (2.27%)&emsp;CHE0 (0.00%)0 (0.00%)0 (0.00%)&emsp;Missing0 (0.00%)0 (0.00%)0 (0.00%)Source: ADSL DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY 4.1.5 tables The tables package uses a different style than the other packages for tables such as this, where there are separate sections for age, sex and country breakdowns of the data. Rather than putting the section heading on a separate line, it normally puts the heading in a separate column to the left of the other columns. Code resetSession() ex_adsl &lt;- formatters::ex_adsl library(tables) table_options(doCSS = TRUE) meansd &lt;- function(x) sprintf(&quot;%.1f (%.1f)&quot;, mean(x), sd(x)) iqr &lt;- function(x) quantile(x, 0.75) - quantile(x, 0.25) medianiqr &lt;- function(x) sprintf(&quot;%.1f (%.1f)&quot;, median(x), iqr(x)) minmax &lt;- function(x) sprintf(&quot;%.1f - %.1f&quot;, min(x), max(x)) countpercent &lt;- function(num, denom) sprintf(&quot;%d (%.1f%%)&quot;, length(num), 100*length(num)/length(denom)) count &lt;- function(x) sprintf(&quot;(N=%d)&quot;, length(x)) tab &lt;- tabular( Heading()*1*Heading()*count + Heading(&quot;Age (Years)&quot;)* AGE * (Heading(&quot;Mean (SD)&quot;)*meansd + Heading(&quot;Median (IQR)&quot;)*medianiqr + Heading(&quot;Min - Max&quot;)*minmax) + (Heading(&quot;Sex, n, (%)&quot;)*SEX + Heading(&quot;Country, n, (%)&quot;)*COUNTRY)* Heading()*Percent(denom = Equal(ARM), fn = countpercent) ~ Heading()*ARM, data = ex_adsl ) Warning in cbind(padNA, leftjustification): number of rows of result is not a multiple of vector length (arg 1) Code useGroupLabels(tab, indent = &quot;&amp;emsp;&quot;) #table39ba3c18b03b .Rtable thead, .Rtable .even { background-color: inherit; } #table39ba3c18b03b .left { text-align:left; } #table39ba3c18b03b .center { text-align:center; } #table39ba3c18b03b .right { text-align:right; } #table39ba3c18b03b .Rtable, #table39ba3c18b03b .Rtable thead { border-collapse: collapse; border-style: solid; border-width: medium 0; border-color: inherit; } #table39ba3c18b03b .Rtable th, #table39ba3c18b03b .Rtable td { padding-left: 0.5em; padding-right: 0.5em; border-width: 0; } A: Drug X B: Placebo C: Combination   (N=134) (N=134) (N=132) Age (Years)        Mean (SD) 33.8 (6.6) 35.4 (7.9) 35.4 (7.7)  Median (IQR) 33.0 (11.0) 35.0 (10.0) 35.0 (10.0)  Min - Max 21.0 - 50.0 21.0 - 62.0 20.0 - 69.0 Sex, n, (%)        F 79 (59.0%) 77 (57.5%) 66 (50.0%)  M 51 (38.1%) 55 (41.0%) 60 (45.5%)  U 3 (2.2%) 2 (1.5%) 4 (3.0%)  UNDIFFERENTIATED 1 (0.7%) 0 (0.0%) 2 (1.5%) Country, n, (%)        CHN 74 (55.2%) 81 (60.4%) 64 (48.5%)  USA 10 (7.5%) 13 (9.7%) 17 (12.9%)  BRA 13 (9.7%) 7 (5.2%) 10 (7.6%)  PAK 12 (9.0%) 9 (6.7%) 10 (7.6%)  NGA 8 (6.0%) 7 (5.2%) 11 (8.3%)  RUS 5 (3.7%) 8 (6.0%) 6 (4.5%)  JPN 5 (3.7%) 4 (3.0%) 9 (6.8%)  GBR 4 (3.0%) 3 (2.2%) 2 (1.5%)  CAN 3 (2.2%) 2 (1.5%) 3 (2.3%)  CHE 0 (0.0%) 0 (0.0%) 0 (0.0%) 4.1.6 tidytlg Code resetSession() library(dplyr) library(tidytlg) adsl &lt;- formatters::ex_adsl # create univariate stats for age tbl1 &lt;- univar(adsl, rowvar = &quot;AGE&quot;, colvar = &quot;ARM&quot;, statlist = statlist(c(&quot;N&quot;,&quot;MEANSD&quot;,&quot;MEDIAN&quot;,&quot;RANGE&quot;)), row_header = &quot;Age (years)&quot;, decimal = 0) # create counts (percentages) for gender categories tbl2 &lt;- freq(adsl, rowvar = &quot;SEX&quot;, colvar = &quot;ARM&quot;, statlist = statlist(c(&quot;N&quot;, &quot;n (x.x%)&quot;)), row_header = &quot;Gender, n(%)&quot;) # create counts (percentages) for country tbl3 &lt;- freq(adsl, rowvar = &quot;COUNTRY&quot;, colvar = &quot;ARM&quot;, statlist = statlist(c(&quot;N&quot;, &quot;n (x.x%)&quot;)), row_header = &quot;Country, n(%)&quot;, descending_by = &quot;C: Combination&quot;) # combine analysis results together tbl &lt;- bind_table(tbl1, tbl2, tbl3) # output the analysis results gentlg(huxme = tbl, format = &quot;HTML&quot;, print.hux = FALSE, file = &quot;Table x.x.x.x&quot;, orientation = &quot;portrait&quot;, title = &quot;Demographic Characteristics - Full Analysis Set&quot;, footers = &quot;Source: ADSL DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY&quot;, colheader = c(&quot;&quot;,&quot;A: Drug X&quot;,&quot;B: Placebo&quot;,&quot;C: Combination&quot;)) Table 4.1: Table x.x.x.x: &emsp; Demographic Characteristics - Full Analysis Set A: Drug X B: Placebo C: Combination Age (years) N134134132 Mean (SD)33.8 (6.55)35.4 (7.90)35.4 (7.72) Median33.035.035.0 Range(21; 50)(21; 62)(20; 69) Gender, n(%) N134134132 F79 (59.0%)77 (57.5%)66 (50.0%) M51 (38.1%)55 (41.0%)60 (45.5%) U3 (2.2%)2 (1.5%)4 (3.0%) UNDIFFERENTIATED1 (0.7%)02 (1.5%) Country, n(%) N134134132 CHN74 (55.2%)81 (60.4%)64 (48.5%) USA10 (7.5%)13 (9.7%)17 (12.9%) NGA8 (6.0%)7 (5.2%)11 (8.3%) BRA13 (9.7%)7 (5.2%)10 (7.6%) PAK12 (9.0%)9 (6.7%)10 (7.6%) JPN5 (3.7%)4 (3.0%)9 (6.8%) RUS5 (3.7%)8 (6.0%)6 (4.5%) CAN3 (2.2%)2 (1.5%)3 (2.3%) GBR4 (3.0%)3 (2.2%)2 (1.5%) CHE000 Source: ADSL DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY [table x.x.x.x.html][/home/runner/work/_temp/46285d38-8d6e-42ac-8e33-f3279fd14a78] 07SEP2023, 17:42 4.1.7 tfrmt Please note that the tfrmt package is intended for use with mock data or ARD (analysis results data). This package creates the same tables as other packages but requires the starting data to be transformed first. The first chunk of code takes the CDISC data and modifies it into an ARD. The second chunk demonstrates how to format the table. Code resetSession() library(tidyverse) library(tfrmt) # Get data data(&quot;cadsl&quot;, package = &quot;random.cdisc.data&quot;) # Number of unique subjects per ARM big_n &lt;- cadsl |&gt; dplyr::group_by(ARM) |&gt; dplyr::summarize( N = dplyr::n_distinct(USUBJID) ) # Join big_n with adsl adsl_with_n &lt;- cadsl |&gt; dplyr::left_join(big_n, by = &quot;ARM&quot;) # Explore column: AGE age_stats &lt;- adsl_with_n |&gt; group_by(ARM) |&gt; reframe( n = n_distinct(USUBJID), Mean = mean(AGE), SD = sd(AGE), Median = median(AGE), Min = min(AGE), Max = max(AGE) ) |&gt; pivot_longer( c(&quot;n&quot;, &quot;Mean&quot;, &quot;SD&quot;, &quot;Median&quot;, &quot;Min&quot;, &quot;Max&quot;) ) |&gt; mutate( group = &quot;Age (years)&quot;, label = case_when(name == &quot;Mean&quot; ~ &quot;Mean (SD)&quot;, name == &quot;SD&quot; ~ &quot;Mean (SD)&quot;, name == &quot;Min&quot; ~ &quot;Min - Max&quot;, name == &quot;Max&quot; ~ &quot;Min - Max&quot;, TRUE ~ name) ) sex_n &lt;- adsl_with_n |&gt; group_by(ARM, SEX) |&gt; reframe( n = n(), pct = (n/N)*100 ) |&gt; distinct() |&gt; pivot_longer( c(&quot;n&quot;, &quot;pct&quot;) ) |&gt; rename( label = SEX ) |&gt; mutate( group = &quot;Sex&quot; ) # Explore column: COUNTRY country_n &lt;- adsl_with_n |&gt; group_by(ARM, COUNTRY) |&gt; reframe( n = n(), pct = (n/N)*100 ) |&gt; distinct() |&gt; pivot_longer( c(&quot;n&quot;, &quot;pct&quot;) ) |&gt; rename( label = COUNTRY ) |&gt; mutate( group = &quot;Country&quot; ) # Header n header_n &lt;- big_n |&gt; dplyr::rename(value = N) |&gt; dplyr::mutate(name = &quot;header_n&quot;) # Create ARD demog_ard &lt;- bind_rows( age_stats, sex_n, country_n, #header_n ) |&gt; rename( column = ARM, param = name ) |&gt; select( group, label, param, column, value ) |&gt; group_by(group, label) Now we can used the demog_ard to make the demographic table using tfrmt. Code tfrmt( # Add titles title = &quot;x.x: Study Subject Data&quot;, subtitle = c(&quot;x.x.x: Demographic Characteristics. \\n Table x.x.x.x: Demographic Characteristics - Full Analysis Set&quot;), # Specify table features group = group, label = label, column = column, param = param, value = value, # Define cell formatting body_plan = body_plan( # Define rounding and structure of values in each row frmt_structure(group_val = &quot;.default&quot;, label_val = &quot;.default&quot;, frmt(&quot;xx&quot;)), frmt_structure(group_val = &quot;Age (years)&quot;, label_val = c(&quot;Mean (SD)&quot;), frmt_combine( &quot;{Mean} ({SD})&quot;, Mean = frmt(&quot;xx.x&quot;), SD = frmt(&quot;x.x&quot;) )), frmt_structure(group_val = &quot;Age (years)&quot;, label_val = c(&quot;Min - Max&quot;), frmt_combine( &quot;{Min} - {Max}&quot;, frmt(&quot;xx.x&quot;) )), frmt_structure(group_val = &quot;Sex&quot;, label_val = c(&quot;M&quot;, &quot;F&quot;, &quot;U&quot;, &quot;UNDIFFERENTIATED&quot;), frmt_combine( &quot;{n} ({pct}%)&quot;, n = frmt(&quot;XXX&quot;), pct = frmt(&quot;XX.X&quot;) )), frmt_structure(group_val = &quot;Country&quot;, label_val = c(&quot;CHN&quot;, &quot;USA&quot;, &quot;BRA&quot;, &quot;PAK&quot;, &quot;NGA&quot;, &quot;RUS&quot;, &quot;JPN&quot;, &quot;GBR&quot;, &quot;CAN&quot;, &quot;NA&quot;), frmt_combine( &quot;{n} ({pct}%)&quot;, n = frmt(&quot;XXX&quot;), pct = frmt(&quot;XX.X&quot;) )) ), # Align values on decimal places and spaces col_style_plan = col_style_plan( col_style_structure(col = matches(&quot;[A-Z]:.*&quot;), align = c(&quot;.&quot;, &quot; &quot;)) ) ) %&gt;% print_to_gt(demog_ard) #qxndbrwqbo table { font-family: Courier, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #qxndbrwqbo thead, #qxndbrwqbo tbody, #qxndbrwqbo tfoot, #qxndbrwqbo tr, #qxndbrwqbo td, #qxndbrwqbo th { border-style: none; } #qxndbrwqbo p { margin: 0; padding: 0; } #qxndbrwqbo .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 14px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #qxndbrwqbo .gt_caption { padding-top: 4px; padding-bottom: 4px; } #qxndbrwqbo .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #qxndbrwqbo .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #qxndbrwqbo .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #qxndbrwqbo .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #qxndbrwqbo .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #qxndbrwqbo .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #qxndbrwqbo .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #qxndbrwqbo .gt_column_spanner_outer:first-child { padding-left: 0; } #qxndbrwqbo .gt_column_spanner_outer:last-child { padding-right: 0; } #qxndbrwqbo .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #qxndbrwqbo .gt_spanner_row { border-bottom-style: hidden; } #qxndbrwqbo .gt_group_heading { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: rgba(255, 255, 255, 0); border-bottom-style: solid; border-bottom-width: 0px; border-bottom-color: rgba(255, 255, 255, 0); border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #qxndbrwqbo .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: rgba(255, 255, 255, 0); border-bottom-style: solid; border-bottom-width: 0px; border-bottom-color: rgba(255, 255, 255, 0); vertical-align: middle; } #qxndbrwqbo .gt_from_md > :first-child { margin-top: 0; } #qxndbrwqbo .gt_from_md > :last-child { margin-bottom: 0; } #qxndbrwqbo .gt_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #qxndbrwqbo .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 0px; border-right-color: rgba(255, 255, 255, 0); padding-left: 5px; padding-right: 5px; } #qxndbrwqbo .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 0px; border-right-color: rgba(255, 255, 255, 0); padding-left: 5px; padding-right: 5px; vertical-align: top; } #qxndbrwqbo .gt_row_group_first td { border-top-width: 2px; } #qxndbrwqbo .gt_row_group_first th { border-top-width: 2px; } #qxndbrwqbo .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #qxndbrwqbo .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #qxndbrwqbo .gt_first_summary_row.thick { border-top-width: 2px; } #qxndbrwqbo .gt_last_summary_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #qxndbrwqbo .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #qxndbrwqbo .gt_first_grand_summary_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #qxndbrwqbo .gt_last_grand_summary_row_top { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #qxndbrwqbo .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #qxndbrwqbo .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #qxndbrwqbo .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #qxndbrwqbo .gt_footnote { margin: 0px; font-size: 90%; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #qxndbrwqbo .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #qxndbrwqbo .gt_sourcenote { font-size: 90%; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #qxndbrwqbo .gt_left { text-align: left; } #qxndbrwqbo .gt_center { text-align: center; } #qxndbrwqbo .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #qxndbrwqbo .gt_font_normal { font-weight: normal; } #qxndbrwqbo .gt_font_bold { font-weight: bold; } #qxndbrwqbo .gt_font_italic { font-style: italic; } #qxndbrwqbo .gt_super { font-size: 65%; } #qxndbrwqbo .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #qxndbrwqbo .gt_asterisk { font-size: 100%; vertical-align: 0; } #qxndbrwqbo .gt_indent_1 { text-indent: 5px; } #qxndbrwqbo .gt_indent_2 { text-indent: 10px; } #qxndbrwqbo .gt_indent_3 { text-indent: 15px; } #qxndbrwqbo .gt_indent_4 { text-indent: 20px; } #qxndbrwqbo .gt_indent_5 { text-indent: 25px; } A: Drug X B: Placebo C: Combination Age (years) n 134 134 132 Mean (SD) 33.8 (6.6) 35.4 (7.9) 35.4 (7.7) Median 33 35 35 Min - Max 21.0 - 50.0 21.0 - 62.0 20.0 - 69.0 Sex F 79 (59.0%) 82 (61.2%) 70 (53.0%) M 55 (41.0%) 52 (38.8%) 62 (47.0%) Country CHN 74 (55.2%) 81 (60.4%) 64 (48.5%) USA 10 ( 7.5%) 13 ( 9.7%) 17 (12.9%) BRA 13 ( 9.7%) 7 ( 5.2%) 10 ( 7.6%) PAK 12 ( 9.0%) 9 ( 6.7%) 10 ( 7.6%) NGA 8 ( 6.0%) 7 ( 5.2%) 11 ( 8.3%) RUS 5 ( 3.7%) 8 ( 6.0%) 6 ( 4.5%) JPN 5 ( 3.7%) 4 ( 3.0%) 9 ( 6.8%) GBR 4 ( 3.0%) 3 ( 2.2%) 2 ( 1.5%) CAN 3 ( 2.2%) 2 ( 1.5%) 3 ( 2.3%) See this vignette for more details on formatting functions: link to website See this vignette for the completed table example: link to website 4.2 Adverse Event Tables We will use the ex_adae data included within the formatters package. Code head(formatters::ex_adae) # A tibble: 6 × 48 STUDYID USUBJID SUBJID SITEID AGE SEX RACE COUNTRY INVID ARM ARMCD &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;chr&gt; &lt;fct&gt; &lt;fct&gt; 1 AB12345 AB12345-BRA… id-134 BRA-1 47 M WHITE BRA BRA-1 A: D… ARM A 2 AB12345 AB12345-BRA… id-134 BRA-1 47 M WHITE BRA BRA-1 A: D… ARM A 3 AB12345 AB12345-BRA… id-134 BRA-1 47 M WHITE BRA BRA-1 A: D… ARM A 4 AB12345 AB12345-BRA… id-134 BRA-1 47 M WHITE BRA BRA-1 A: D… ARM A 5 AB12345 AB12345-BRA… id-141 BRA-1 35 F WHITE BRA BRA-1 C: C… ARM C 6 AB12345 AB12345-BRA… id-141 BRA-1 35 F WHITE BRA BRA-1 C: C… ARM C # ℹ 37 more variables: ACTARM &lt;fct&gt;, ACTARMCD &lt;fct&gt;, STRATA1 &lt;fct&gt;, # STRATA2 &lt;fct&gt;, BMRKR1 &lt;dbl&gt;, BMRKR2 &lt;fct&gt;, ITTFL &lt;fct&gt;, SAFFL &lt;fct&gt;, # BMEASIFL &lt;fct&gt;, BEP01FL &lt;fct&gt;, RANDDT &lt;date&gt;, TRTSDTM &lt;dttm&gt;, # TRTEDTM &lt;dttm&gt;, EOSSTT &lt;fct&gt;, EOSDT &lt;date&gt;, EOSDY &lt;int&gt;, DCSREAS &lt;fct&gt;, # DTHDT &lt;date&gt;, LSTALVDT &lt;date&gt;, study_duration_secs &lt;dbl&gt;, ASEQ &lt;int&gt;, # AESEQ &lt;int&gt;, AETERM &lt;fct&gt;, AELLT &lt;fct&gt;, AEDECOD &lt;fct&gt;, AEHLT &lt;fct&gt;, # AEHLGT &lt;fct&gt;, AEBODSYS &lt;fct&gt;, AESOC &lt;fct&gt;, AESEV &lt;fct&gt;, AESER &lt;fct&gt;, … 4.2.1 rtables Adverse Events by ID Code resetSession() library(rtables) s_events_patients &lt;- function(x, labelstr, .N_col) { in_rows( &quot;Patients with at least one event&quot; = rcell(length(unique(x)) * c(1, 1 / .N_col), format = &quot;xx (xx.xx%)&quot;), &quot;Total number of events&quot; = rcell(length(x), format = &quot;xx&quot;) ) } table_count_per_id &lt;- function(df, .N_col, termvar = &quot;AEDECOD&quot;, idvar = &quot;USUBJID&quot;) { x &lt;- df[[termvar]] id &lt;- df[[idvar]] counts &lt;- table(x[!duplicated(paste0(id, x))]) in_rows( .list = lapply(counts, function(xi) rcell(c(xi, xi/.N_col), &quot;xx (xx.xx%)&quot;)), .labels = names(counts) ) } lyt &lt;- basic_table(show_colcounts = TRUE) %&gt;% split_cols_by(&quot;ARM&quot;) %&gt;% analyze(&quot;USUBJID&quot;, afun = s_events_patients) %&gt;% split_rows_by(&quot;AEBODSYS&quot;, child_labels = &quot;visible&quot;, split_fun = trim_levels_in_group(&quot;AEDECOD&quot;), section_div = &quot; &quot;) %&gt;% summarize_row_groups(&quot;USUBJID&quot;, cfun = s_events_patients) %&gt;% analyze(&quot;AEDECOD&quot;, table_count_per_id, show_labels = &quot;hidden&quot;, indent_mod = -1) build_table(lyt, ex_adae, alt_counts_df = ex_adsl) A: Drug X B: Placebo C: Combination (N=134) (N=134) (N=132) ————————————————————————————————————————————————————————————————————————————————— Patients with at least one event 122 (91.04%) 123 (91.79%) 120 (90.91%) Total number of events 609 622 703 cl A.1 Patients with at least one event 78 (58.21%) 75 (55.97%) 89 (67.42%) Total number of events 132 130 160 dcd A.1.1.1.1 50 (37.31%) 45 (33.58%) 63 (47.73%) dcd A.1.1.1.2 48 (35.82%) 48 (35.82%) 50 (37.88%) cl B.1 Patients with at least one event 47 (35.07%) 49 (36.57%) 43 (32.58%) Total number of events 56 60 62 dcd B.1.1.1.1 47 (35.07%) 49 (36.57%) 43 (32.58%) cl B.2 Patients with at least one event 79 (58.96%) 74 (55.22%) 85 (64.39%) Total number of events 129 138 143 dcd B.2.1.2.1 49 (36.57%) 44 (32.84%) 52 (39.39%) dcd B.2.2.3.1 48 (35.82%) 54 (40.30%) 51 (38.64%) cl C.1 Patients with at least one event 43 (32.09%) 46 (34.33%) 43 (32.58%) Total number of events 55 63 64 dcd C.1.1.1.3 43 (32.09%) 46 (34.33%) 43 (32.58%) cl C.2 Patients with at least one event 35 (26.12%) 48 (35.82%) 55 (41.67%) Total number of events 48 53 65 dcd C.2.1.2.1 35 (26.12%) 48 (35.82%) 55 (41.67%) cl D.1 Patients with at least one event 79 (58.96%) 67 (50.00%) 80 (60.61%) Total number of events 127 106 135 dcd D.1.1.1.1 50 (37.31%) 42 (31.34%) 51 (38.64%) dcd D.1.1.4.2 48 (35.82%) 42 (31.34%) 50 (37.88%) cl D.2 Patients with at least one event 47 (35.07%) 58 (43.28%) 57 (43.18%) Total number of events 62 72 74 dcd D.2.1.5.3 47 (35.07%) 58 (43.28%) 57 (43.18%) 4.2.2 tern (+ rtables) Code resetSession() library(tern) lyt &lt;- basic_table(show_colcounts = TRUE) %&gt;% split_cols_by(var = &quot;ARM&quot;) %&gt;% analyze_num_patients( vars = &quot;USUBJID&quot;, .stats = c(&quot;unique&quot;, &quot;nonunique&quot;), .labels = c( unique = &quot;Patients with at least one event&quot;, nonunique = &quot;Total number of events&quot; ) ) %&gt;% split_rows_by( &quot;AEBODSYS&quot;, child_labels = &quot;visible&quot;, split_fun = drop_split_levels, section_div = &quot; &quot; ) %&gt;% summarize_num_patients( var = &quot;USUBJID&quot;, .stats = c(&quot;unique&quot;, &quot;nonunique&quot;), .labels = c( unique = &quot;Patients with at least one event&quot;, nonunique = &quot;Total number of events&quot; ) ) %&gt;% count_occurrences(vars = &quot;AEDECOD&quot;, .indent_mods = -1L) build_table(lyt, df = ex_adae, alt_counts_df = ex_adsl) A: Drug X B: Placebo C: Combination (N=134) (N=134) (N=132) ——————————————————————————————————————————————————————————————————————————————— Patients with at least one event 122 (91.0%) 123 (91.8%) 120 (90.9%) Total number of events 609 622 703 cl A.1 Patients with at least one event 78 (58.2%) 75 (56.0%) 89 (67.4%) Total number of events 132 130 160 dcd A.1.1.1.1 50 (37.3%) 45 (33.6%) 63 (47.7%) dcd A.1.1.1.2 48 (35.8%) 48 (35.8%) 50 (37.9%) cl B.1 Patients with at least one event 47 (35.1%) 49 (36.6%) 43 (32.6%) Total number of events 56 60 62 dcd B.1.1.1.1 47 (35.1%) 49 (36.6%) 43 (32.6%) cl B.2 Patients with at least one event 79 (59.0%) 74 (55.2%) 85 (64.4%) Total number of events 129 138 143 dcd B.2.1.2.1 49 (36.6%) 44 (32.8%) 52 (39.4%) dcd B.2.2.3.1 48 (35.8%) 54 (40.3%) 51 (38.6%) cl C.1 Patients with at least one event 43 (32.1%) 46 (34.3%) 43 (32.6%) Total number of events 55 63 64 dcd C.1.1.1.3 43 (32.1%) 46 (34.3%) 43 (32.6%) cl C.2 Patients with at least one event 35 (26.1%) 48 (35.8%) 55 (41.7%) Total number of events 48 53 65 dcd C.2.1.2.1 35 (26.1%) 48 (35.8%) 55 (41.7%) cl D.1 Patients with at least one event 79 (59.0%) 67 (50.0%) 80 (60.6%) Total number of events 127 106 135 dcd D.1.1.1.1 50 (37.3%) 42 (31.3%) 51 (38.6%) dcd D.1.1.4.2 48 (35.8%) 42 (31.3%) 50 (37.9%) cl D.2 Patients with at least one event 47 (35.1%) 58 (43.3%) 57 (43.2%) Total number of events 62 72 74 dcd D.2.1.5.3 47 (35.1%) 58 (43.3%) 57 (43.2%) 4.2.3 gt Code resetSession() library(tidyverse) library(gt) ex_adsl &lt;- formatters::ex_adsl ex_adae &lt;- formatters::ex_adae header_n &lt;- ex_adsl |&gt; dplyr::group_by(ARM) |&gt; dplyr::summarize( N = dplyr::n_distinct(USUBJID) ) col_lbls &lt;- header_n |&gt; dplyr::transmute( ARMN = sprintf(&quot;%s \\n (N=%i)&quot;, ARM, N) ) |&gt; dplyr::group_split(ARMN) sum_ex &lt;- merge(ex_adae, header_n, by = &quot;ARM&quot;) |&gt; dplyr::group_by(ARM) |&gt; dplyr::summarize( n_oe = dplyr::n_distinct(USUBJID), pct_oe = n_oe/mean(N), n_tot = dplyr::n(), .groups = &quot;drop&quot; ) sum_aebodsys &lt;- merge(ex_adae, header_n, by = &quot;ARM&quot;) |&gt; dplyr::group_by(ARM, AEBODSYS) |&gt; dplyr::summarize( n_oe = dplyr::n_distinct(USUBJID), pct_oe = n_oe/mean(N), n_tot = dplyr::n(), .groups = &quot;drop&quot; ) sum_aedecod &lt;- merge(ex_adae, header_n, by = &quot;ARM&quot;) |&gt; dplyr::group_by(ARM, AEBODSYS, AEDECOD) |&gt; dplyr::summarize( n_oe = dplyr::n_distinct(USUBJID), pct_oe = n_oe/mean(N), .groups = &quot;drop&quot; ) ex_tbl &lt;- dplyr::bind_rows(sum_ex, sum_aebodsys, sum_aedecod) |&gt; tidyr::pivot_longer(cols = c(n_oe, n_tot), names_to = &quot;lbl&quot;, values_to = &quot;n&quot;) |&gt; dplyr::mutate( pct_oe = ifelse(lbl == &quot;n_tot&quot;, NA_real_, pct_oe) ) |&gt; pivot_wider(id_cols = c(AEBODSYS, AEDECOD, lbl), names_from = ARM, values_from = c(n, pct_oe)) |&gt; dplyr::mutate( AEDECOD = forcats::fct_relevel( .f = dplyr::case_when( is.na(AEDECOD) &amp; lbl == &quot;n_tot&quot; ~ &quot;Total number of events&quot;, is.na(AEDECOD) &amp; lbl == &quot;n_oe&quot; ~ &quot;Patients with at least one event&quot;, TRUE ~ AEDECOD ), c(&quot;Patients with at least one event&quot;, &quot;Total number of events&quot;), after = 0 ), AEBODSYS = forcats::fct_relevel( forcats::fct_na_value_to_level( AEBODSYS, level = &quot; &quot; ), &quot; &quot;, after = 0 ) ) |&gt; dplyr::filter(!(lbl == &quot;n_tot&quot; &amp; !(AEDECOD %in% c(&quot;Patients with at least one event&quot;, &quot;Total number of events&quot;)))) |&gt; dplyr::arrange(AEBODSYS, AEDECOD) ex_tbl |&gt; gt( rowname_col = &quot;AEDECOD&quot;, groupname_col = &quot;AEBODSYS&quot; ) |&gt; cols_hide(columns = &quot;lbl&quot;) |&gt; fmt_percent( columns = starts_with(&quot;pct&quot;), decimals = 1 ) |&gt; cols_merge_n_pct( col_n = &quot;n_A: Drug X&quot;, col_pct = &quot;pct_oe_A: Drug X&quot; ) |&gt; cols_merge_n_pct( col_n = &quot;n_B: Placebo&quot;, col_pct = &quot;pct_oe_B: Placebo&quot; ) |&gt; cols_merge_n_pct( col_n = &quot;n_C: Combination&quot;, col_pct = &quot;pct_oe_C: Combination&quot; ) |&gt; cols_label( &quot;n_A: Drug X&quot; = md(col_lbls[[1]]), &quot;n_B: Placebo&quot; = md(col_lbls[[2]]), &quot;n_C: Combination&quot; = md(col_lbls[[3]]) ) |&gt; cols_align( columns = 3:9, align = &quot;center&quot; ) |&gt; cols_align( columns = 1:2, align = &quot;left&quot; ) |&gt; cols_width( .list = list( 1:2 ~ px(250), 3:9 ~ px(120) ) ) |&gt; tab_stub_indent( rows = 2:18, indent = 3 ) #znfeoncsix table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #znfeoncsix thead, #znfeoncsix tbody, #znfeoncsix tfoot, #znfeoncsix tr, #znfeoncsix td, #znfeoncsix th { border-style: none; } #znfeoncsix p { margin: 0; padding: 0; } #znfeoncsix .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #znfeoncsix .gt_caption { padding-top: 4px; padding-bottom: 4px; } #znfeoncsix .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #znfeoncsix .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #znfeoncsix .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #znfeoncsix .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #znfeoncsix .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #znfeoncsix .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #znfeoncsix .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #znfeoncsix .gt_column_spanner_outer:first-child { padding-left: 0; } #znfeoncsix .gt_column_spanner_outer:last-child { padding-right: 0; } #znfeoncsix .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #znfeoncsix .gt_spanner_row { border-bottom-style: hidden; } #znfeoncsix .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #znfeoncsix .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #znfeoncsix .gt_from_md > :first-child { margin-top: 0; } #znfeoncsix .gt_from_md > :last-child { margin-bottom: 0; } #znfeoncsix .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #znfeoncsix .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #znfeoncsix .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #znfeoncsix .gt_row_group_first td { border-top-width: 2px; } #znfeoncsix .gt_row_group_first th { border-top-width: 2px; } #znfeoncsix .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #znfeoncsix .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #znfeoncsix .gt_first_summary_row.thick { border-top-width: 2px; } #znfeoncsix .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #znfeoncsix .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #znfeoncsix .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #znfeoncsix .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #znfeoncsix .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #znfeoncsix .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #znfeoncsix .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #znfeoncsix .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #znfeoncsix .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #znfeoncsix .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #znfeoncsix .gt_left { text-align: left; } #znfeoncsix .gt_center { text-align: center; } #znfeoncsix .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #znfeoncsix .gt_font_normal { font-weight: normal; } #znfeoncsix .gt_font_bold { font-weight: bold; } #znfeoncsix .gt_font_italic { font-style: italic; } #znfeoncsix .gt_super { font-size: 65%; } #znfeoncsix .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #znfeoncsix .gt_asterisk { font-size: 100%; vertical-align: 0; } #znfeoncsix .gt_indent_1 { text-indent: 5px; } #znfeoncsix .gt_indent_2 { text-indent: 10px; } #znfeoncsix .gt_indent_3 { text-indent: 15px; } #znfeoncsix .gt_indent_4 { text-indent: 20px; } #znfeoncsix .gt_indent_5 { text-indent: 25px; } A: Drug X (N=134) B: Placebo (N=134) C: Combination (N=132) Patients with at least one event 122 (91.0%) 123 (91.8%) 120 (90.9%) Total number of events 609 622 703 cl A.1 Patients with at least one event 78 (58.2%) 75 (56.0%) 89 (67.4%) Total number of events 132 130 160 dcd A.1.1.1.1 50 (37.3%) 45 (33.6%) 63 (47.7%) dcd A.1.1.1.2 48 (35.8%) 48 (35.8%) 50 (37.9%) cl B.1 Patients with at least one event 47 (35.1%) 49 (36.6%) 43 (32.6%) Total number of events 56 60 62 dcd B.1.1.1.1 47 (35.1%) 49 (36.6%) 43 (32.6%) cl B.2 Patients with at least one event 79 (59.0%) 74 (55.2%) 85 (64.4%) Total number of events 129 138 143 dcd B.2.1.2.1 49 (36.6%) 44 (32.8%) 52 (39.4%) dcd B.2.2.3.1 48 (35.8%) 54 (40.3%) 51 (38.6%) cl C.1 Patients with at least one event 43 (32.1%) 46 (34.3%) 43 (32.6%) Total number of events 55 63 64 dcd C.1.1.1.3 43 (32.1%) 46 (34.3%) 43 (32.6%) cl C.2 Patients with at least one event 35 (26.1%) 48 (35.8%) 55 (41.7%) Total number of events 48 53 65 dcd C.2.1.2.1 35 (26.1%) 48 (35.8%) 55 (41.7%) cl D.1 Patients with at least one event 79 (59.0%) 67 (50.0%) 80 (60.6%) Total number of events 127 106 135 dcd D.1.1.1.1 50 (37.3%) 42 (31.3%) 51 (38.6%) dcd D.1.1.4.2 48 (35.8%) 42 (31.3%) 50 (37.9%) cl D.2 Patients with at least one event 47 (35.1%) 58 (43.3%) 57 (43.2%) Total number of events 62 72 74 dcd D.2.1.5.3 47 (35.1%) 58 (43.3%) 57 (43.2%) 4.2.4 tables The tables package normally generates tables from single datasets, while this kind of table requires information from two: adsl and ex_adae. One way to handle this would be to add the adsl patient count information to a copy of the ex_adae table. In this code we use a different approach: we generate one table of patient counts to produce the heading lines, and a second table with the adverse event data, then use rbind() to combine the two tables. Code resetSession() library(tables) table_options(doCSS = TRUE) ex_adae &lt;- formatters::ex_adae subject_counts &lt;- table(adsl$ARM) countpercentid &lt;- function(num, ARM) { n &lt;- length(unique(num)) if (n == 0) pct &lt;- 0 else pct &lt;- 100*n/subject_counts[ARM[1]] sprintf(&quot;%d (%.2f%%)&quot;, length(unique(num)), pct) } count &lt;- function(x) sprintf(&quot;(N=%d)&quot;, length(x)) heading &lt;- tabular(Heading(&quot;&quot;)*1* Heading(&quot;&quot;)*count ~ Heading()*ARM, data = adsl) body &lt;- tabular( Heading(&quot;Patients with at least one event&quot;)*1* Heading(&quot;&quot;)*countpercentid*Arguments(ARM = ARM)* Heading()*USUBJID + Heading(&quot;Total number of events&quot;)*1*Heading(&quot;&quot;)*1 + Heading()*AEBODSYS* (Heading(&quot;Patients with at least one event&quot;)* Percent(denom = ARM, fn = countpercentid)* Heading()*USUBJID + Heading(&quot;Total number of events&quot;)*1 + Heading()*AEDECOD*DropEmpty(which = &quot;row&quot;)* Heading()*Percent(denom = ARM, fn = countpercentid)* Heading()*USUBJID) ~ Heading()*ARM, data = ex_adae ) tab &lt;- rbind(heading, body) useGroupLabels(tab, indent = &quot;&amp;emsp;&quot;, extraLines = 1) #table39ba4203d798 .Rtable thead, .Rtable .even { background-color: inherit; } #table39ba4203d798 .left { text-align:left; } #table39ba4203d798 .center { text-align:center; } #table39ba4203d798 .right { text-align:right; } #table39ba4203d798 .Rtable, #table39ba4203d798 .Rtable thead { border-collapse: collapse; border-style: solid; border-width: medium 0; border-color: inherit; } #table39ba4203d798 .Rtable th, #table39ba4203d798 .Rtable td { padding-left: 0.5em; padding-right: 0.5em; border-width: 0; } A: Drug X B: Placebo C: Combination   (N=134) (N=134) (N=132) Patients with at least one event 122 (91.04%) 123 (91.79%) 120 (90.91%)       Total number of events 609 622 703       cl A.1        Patients with at least one event 78 (58.21%) 75 (55.97%) 89 (66.42%)  Total number of events 132 130 160  dcd A.1.1.1.1 50 (37.31%) 45 (33.58%) 63 (47.01%)  dcd A.1.1.1.2 48 (35.82%) 48 (35.82%) 50 (37.31%)       cl B.1        Patients with at least one event 47 (35.07%) 49 (36.57%) 43 (32.09%)  Total number of events 56 60 62  dcd B.1.1.1.1 47 (35.07%) 49 (36.57%) 43 (32.09%)       cl B.2        Patients with at least one event 79 (58.96%) 74 (55.22%) 85 (63.43%)  Total number of events 129 138 143  dcd B.2.1.2.1 49 (36.57%) 44 (32.84%) 52 (38.81%)  dcd B.2.2.3.1 48 (35.82%) 54 (40.30%) 51 (38.06%)       cl C.1        Patients with at least one event 43 (32.09%) 46 (34.33%) 43 (32.09%)  Total number of events 55 63 64  dcd C.1.1.1.3 43 (32.09%) 46 (34.33%) 43 (32.09%)       cl C.2        Patients with at least one event 35 (26.12%) 48 (35.82%) 55 (41.04%)  Total number of events 48 53 65  dcd C.2.1.2.1 35 (26.12%) 48 (35.82%) 55 (41.04%)       cl D.1        Patients with at least one event 79 (58.96%) 67 (50.00%) 80 (59.70%)  Total number of events 127 106 135  dcd D.1.1.1.1 50 (37.31%) 42 (31.34%) 51 (38.06%)  dcd D.1.1.4.2 48 (35.82%) 42 (31.34%) 50 (37.31%)       cl D.2        Patients with at least one event 47 (35.07%) 58 (43.28%) 57 (42.54%)  Total number of events 62 72 74  dcd D.2.1.5.3 47 (35.07%) 58 (43.28%) 57 (42.54%) 4.2.5 flextable By using tables::tabular() to create a table and then converting it to a flextable using as_flextable(), you can take advantage of the convenience and flexibility provided by the tables package while still benefiting from the formatting capabilities of flextable. Code library(flextable) as_flextable(body, spread_first_col = TRUE, add_tab = TRUE) |&gt; align(j = 1, part = &quot;all&quot;, align = &quot;left&quot;) |&gt; padding(padding = 4, part = &quot;all&quot;) |&gt; add_header_row( values = c(&quot;&quot;, fmt_header_n(subject_counts, newline = FALSE)), top = FALSE) |&gt; hline(i = 1, part = &quot;header&quot;, border = fp_border_default(width = 0)) .cl-e793991c{}.cl-e788afd4{font-family:'Open Sans';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e78c6c50{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:4pt;padding-left:4pt;padding-right:4pt;line-height: 1.4;background-color:transparent;}.cl-e78c6c64{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:4pt;padding-left:4pt;padding-right:4pt;line-height: 1.4;background-color:transparent;}.cl-e78c6c65{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:4pt;padding-left:4pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-e78c6c6e{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:4pt;padding-left:4pt;padding-right:4pt;line-height: 1.4;background-color:transparent;}.cl-e78c6c6f{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:4pt;padding-left:4pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-e78c6c78{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:4pt;padding-left:4pt;padding-right:4pt;line-height: 1.4;background-color:transparent;}.cl-e78c6c79{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:4pt;padding-left:4pt;padding-right:4pt;line-height: 1.4;background-color:transparent;}.cl-e78c6c82{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:4pt;padding-left:4pt;padding-right:4pt;line-height: 1.4;background-color:transparent;}.cl-e78c862c{width:2.647in;background-color:transparent;vertical-align: bottom;border-bottom: 0 solid rgba(170, 170, 170, 1.00);border-top: 1.5pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e78c8640{width:1.217in;background-color:transparent;vertical-align: bottom;border-bottom: 0 solid rgba(170, 170, 170, 1.00);border-top: 1.5pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e78c8641{width:2.647in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e78c864a{width:1.217in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e78c8654{width:2.647in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e78c8655{width:1.217in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e78c865e{width:1.217in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e78c865f{width:2.647in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e78c8668{width:1.217in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}A: Drug XB: PlaceboC: Combination(N=134)(N=134)(N=132)Patients with at least one event122 (91.04%)123 (91.79%)120 (90.91%)Total number of events609622703cl A.1&emsp;Patients with at least one event78 (58.21%)75 (55.97%)89 (66.42%)&emsp;Total number of events132130160&emsp;dcd A.1.1.1.150 (37.31%)45 (33.58%)63 (47.01%)&emsp;dcd A.1.1.1.248 (35.82%)48 (35.82%)50 (37.31%)cl B.1&emsp;Patients with at least one event47 (35.07%)49 (36.57%)43 (32.09%)&emsp;Total number of events566062&emsp;dcd B.1.1.1.147 (35.07%)49 (36.57%)43 (32.09%)cl B.2&emsp;Patients with at least one event79 (58.96%)74 (55.22%)85 (63.43%)&emsp;Total number of events129138143&emsp;dcd B.2.1.2.149 (36.57%)44 (32.84%)52 (38.81%)&emsp;dcd B.2.2.3.148 (35.82%)54 (40.30%)51 (38.06%)cl C.1&emsp;Patients with at least one event43 (32.09%)46 (34.33%)43 (32.09%)&emsp;Total number of events556364&emsp;dcd C.1.1.1.343 (32.09%)46 (34.33%)43 (32.09%)cl C.2&emsp;Patients with at least one event35 (26.12%)48 (35.82%)55 (41.04%)&emsp;Total number of events485365&emsp;dcd C.2.1.2.135 (26.12%)48 (35.82%)55 (41.04%)cl D.1&emsp;Patients with at least one event79 (58.96%)67 (50.00%)80 (59.70%)&emsp;Total number of events127106135&emsp;dcd D.1.1.1.150 (37.31%)42 (31.34%)51 (38.06%)&emsp;dcd D.1.1.4.248 (35.82%)42 (31.34%)50 (37.31%)cl D.2&emsp;Patients with at least one event47 (35.07%)58 (43.28%)57 (42.54%)&emsp;Total number of events627274&emsp;dcd D.2.1.5.347 (35.07%)58 (43.28%)57 (42.54%) 4.2.6 tidytlg Code resetSession() library(dplyr) library(tidytlg) adsl &lt;- formatters::ex_adsl adae &lt;- formatters::ex_adae %&gt;% mutate(TRTEMFL = &quot;Y&quot;) # Create analysis population counts tbl1 &lt;- freq(adsl, rowvar = &quot;SAFFL&quot;, colvar = &quot;ARM&quot;, statlist = statlist(&quot;n&quot;), rowtext = &quot;Analysis Set: Safety Population&quot;, subset = SAFFL == &quot;Y&quot;) # Create counts (percentages) for patients with at least one event tbl2 &lt;- freq(adae, denom_df = adsl, rowvar = &quot;TRTEMFL&quot;, colvar = &quot;ARM&quot;, statlist = statlist(&quot;n (x.x%)&quot;), rowtext = &quot;Patients with at least one event&quot;, subset = TRTEMFL == &quot;Y&quot;) # Create counts (percentages) of AE by AEBODSYS and AEDECOD tbl3a &lt;- nested_freq(adae, denom_df = adsl, rowvar = &quot;AEBODSYS*AEDECOD&quot;, colvar = &quot;ARM&quot;, statlist = statlist(&quot;n (x.x%)&quot;)) # Create total event counts by AEBODSYS tbl3b &lt;- freq(adae, rowvar = &quot;AEBODSYS&quot;, colvar = &quot;ARM&quot;, statlist = statlist(&quot;n&quot;, distinct = FALSE)) %&gt;% rename(AEBODSYS = label) %&gt;% mutate(label = &quot;Total number of events&quot;, nested_level = 0) # interleave tbl3a and tbl3b by AEBODSYS tbl3 &lt;- bind_rows(tbl3a, tbl3b) %&gt;% arrange(AEBODSYS, nested_level) # combine analysis results together tbl &lt;- bind_table(tbl1, tbl2, tbl3) %&gt;% select(-AEBODSYS) # output the analysis results gentlg(huxme = tbl, format = &quot;HTML&quot;, print.hux = FALSE, file = &quot;Table x.x.x.x&quot;, orientation = &quot;portrait&quot;, title = &quot;Adverse Events Summary - Safety Analysis Set&quot;, colheader = c(&quot;&quot;,&quot;A: Drug X&quot;,&quot;B: Placebo&quot;,&quot;C: Combination&quot;)) Table 4.2: Table x.x.x.x: &emsp; Adverse Events Summary - Safety Analysis Set A: Drug X B: Placebo C: Combination Analysis Set: Safety Population134134132 Patients with at least one event122 (91.0%)123 (91.8%)120 (90.9%) cl A.178 (58.2%)75 (56.0%)89 (67.4%) Total number of events132130160 dcd A.1.1.1.150 (37.3%)45 (33.6%)63 (47.7%) dcd A.1.1.1.248 (35.8%)48 (35.8%)50 (37.9%) cl B.147 (35.1%)49 (36.6%)43 (32.6%) Total number of events566062 dcd B.1.1.1.147 (35.1%)49 (36.6%)43 (32.6%) cl B.279 (59.0%)74 (55.2%)85 (64.4%) Total number of events129138143 dcd B.2.1.2.149 (36.6%)44 (32.8%)52 (39.4%) dcd B.2.2.3.148 (35.8%)54 (40.3%)51 (38.6%) cl C.143 (32.1%)46 (34.3%)43 (32.6%) Total number of events556364 dcd C.1.1.1.343 (32.1%)46 (34.3%)43 (32.6%) cl C.235 (26.1%)48 (35.8%)55 (41.7%) Total number of events485365 dcd C.2.1.2.135 (26.1%)48 (35.8%)55 (41.7%) cl D.179 (59.0%)67 (50.0%)80 (60.6%) Total number of events127106135 dcd D.1.1.1.150 (37.3%)42 (31.3%)51 (38.6%) dcd D.1.1.4.248 (35.8%)42 (31.3%)50 (37.9%) cl D.247 (35.1%)58 (43.3%)57 (43.2%) Total number of events627274 dcd D.2.1.5.347 (35.1%)58 (43.3%)57 (43.2%) [table x.x.x.x.html][/home/runner/work/_temp/46285d38-8d6e-42ac-8e33-f3279fd14a78] 07SEP2023, 17:42 4.2.7 tfrmt Rather than starting with an ADaM, tfrmt assumes users will start with an ARD (Analysis Results Dataset), because of this, making this table will be split into two parts, first to make the ARD and second to format the table. Code resetSession() library(tidyverse) library(tfrmt) # Make ARD ex_adsl &lt;- formatters::ex_adsl ex_adae &lt;- formatters::ex_adae big_n &lt;- ex_adsl |&gt; dplyr::group_by(ARM) |&gt; dplyr::summarize( N = dplyr::n_distinct(USUBJID) ) adae_with_n &lt;- ex_adae |&gt; dplyr::left_join(big_n, by = &quot;ARM&quot;) calc_tot_and_any &lt;- function(.data){ .data |&gt; dplyr::reframe( n_subj = n_distinct(USUBJID), pct_subj = n_subj/N, n_evnts = n() ) |&gt; dplyr::distinct() |&gt; tidyr::pivot_longer(c(&quot;n_subj&quot;, &quot;pct_subj&quot;, &quot;n_evnts&quot;)) |&gt; dplyr::mutate(label = dplyr::case_when( name %in% c(&quot;n_subj&quot;, &quot;pct_subj&quot;) ~ &quot;Patients with at least one event&quot;, name == &quot;n_evnts&quot; ~ &quot;Total number of events&quot; )) } overall &lt;- adae_with_n |&gt; dplyr::group_by(ARM) |&gt; calc_tot_and_any() |&gt; dplyr:: mutate(AEBODSYS = label) bdysys_overall &lt;- adae_with_n |&gt; dplyr::group_by(ARM, AEBODSYS) |&gt; calc_tot_and_any() aeterm_sum &lt;- adae_with_n |&gt; dplyr::group_by(ARM, AEBODSYS, AETERM) |&gt; dplyr::reframe( n_subj = n_distinct(USUBJID), pct_subj = n_subj/N) |&gt; dplyr::distinct() |&gt; tidyr::pivot_longer(ends_with(&quot;subj&quot;)) |&gt; dplyr::rename(label = AETERM) header_n &lt;- big_n |&gt; dplyr::rename(value = N) |&gt; dplyr::mutate(name = &quot;header_n&quot;) ae_ard &lt;- dplyr::bind_rows( overall, bdysys_overall, aeterm_sum, header_n ) ## Format Table tfrmt( column = ARM, group = c(&quot;AEBODSYS&quot;), param = name, value = value, label = label, ) |&gt; # Then we cam combine it with an n percent template tfrmt_n_pct(n = &quot;n_subj&quot;, pct = &quot;pct_subj&quot;, pct_frmt_when = frmt_when(&quot;==1&quot; ~ &quot;&quot;, &quot;&gt;.99&quot; ~ &quot;(&gt;99%)&quot;, &quot;==0&quot; ~ &quot;&quot;, &quot;&lt;.01&quot; ~ &quot;(&lt;1%)&quot;, &quot;TRUE&quot; ~ frmt(&quot;(xx.x%)&quot;, transform = ~.*100)) ) |&gt; #Finally we are going to add some additional formatting tfrmt( body_plan = body_plan( frmt_structure(&quot;n_evnts&quot; = frmt(&quot;XXX&quot;)) ), big_n = big_n_structure(&quot;header_n&quot;), # Aligning on decimal places and spaces col_style_plan = col_style_plan( col_style_structure(col = matches(&quot;[A-Z]:.*&quot;), align = c(&quot;.&quot;, &quot; &quot;)) ) ) |&gt; print_to_gt(ae_ard) #unejrxgorr table { font-family: Courier, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #unejrxgorr thead, #unejrxgorr tbody, #unejrxgorr tfoot, #unejrxgorr tr, #unejrxgorr td, #unejrxgorr th { border-style: none; } #unejrxgorr p { margin: 0; padding: 0; } #unejrxgorr .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 14px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #unejrxgorr .gt_caption { padding-top: 4px; padding-bottom: 4px; } #unejrxgorr .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #unejrxgorr .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #unejrxgorr .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #unejrxgorr .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #unejrxgorr .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #unejrxgorr .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #unejrxgorr .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #unejrxgorr .gt_column_spanner_outer:first-child { padding-left: 0; } #unejrxgorr .gt_column_spanner_outer:last-child { padding-right: 0; } #unejrxgorr .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #unejrxgorr .gt_spanner_row { border-bottom-style: hidden; } #unejrxgorr .gt_group_heading { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: rgba(255, 255, 255, 0); border-bottom-style: solid; border-bottom-width: 0px; border-bottom-color: rgba(255, 255, 255, 0); border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #unejrxgorr .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: rgba(255, 255, 255, 0); border-bottom-style: solid; border-bottom-width: 0px; border-bottom-color: rgba(255, 255, 255, 0); vertical-align: middle; } #unejrxgorr .gt_from_md > :first-child { margin-top: 0; } #unejrxgorr .gt_from_md > :last-child { margin-bottom: 0; } #unejrxgorr .gt_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #unejrxgorr .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 0px; border-right-color: rgba(255, 255, 255, 0); padding-left: 5px; padding-right: 5px; } #unejrxgorr .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 0px; border-right-color: rgba(255, 255, 255, 0); padding-left: 5px; padding-right: 5px; vertical-align: top; } #unejrxgorr .gt_row_group_first td { border-top-width: 2px; } #unejrxgorr .gt_row_group_first th { border-top-width: 2px; } #unejrxgorr .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #unejrxgorr .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #unejrxgorr .gt_first_summary_row.thick { border-top-width: 2px; } #unejrxgorr .gt_last_summary_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #unejrxgorr .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #unejrxgorr .gt_first_grand_summary_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #unejrxgorr .gt_last_grand_summary_row_top { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #unejrxgorr .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #unejrxgorr .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #unejrxgorr .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #unejrxgorr .gt_footnote { margin: 0px; font-size: 90%; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #unejrxgorr .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #unejrxgorr .gt_sourcenote { font-size: 90%; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #unejrxgorr .gt_left { text-align: left; } #unejrxgorr .gt_center { text-align: center; } #unejrxgorr .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #unejrxgorr .gt_font_normal { font-weight: normal; } #unejrxgorr .gt_font_bold { font-weight: bold; } #unejrxgorr .gt_font_italic { font-style: italic; } #unejrxgorr .gt_super { font-size: 65%; } #unejrxgorr .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #unejrxgorr .gt_asterisk { font-size: 100%; vertical-align: 0; } #unejrxgorr .gt_indent_1 { text-indent: 5px; } #unejrxgorr .gt_indent_2 { text-indent: 10px; } #unejrxgorr .gt_indent_3 { text-indent: 15px; } #unejrxgorr .gt_indent_4 { text-indent: 20px; } #unejrxgorr .gt_indent_5 { text-indent: 25px; } A: Drug X N = 134 B: Placebo N = 134 C: Combination N = 132 Patients with at least one event 122 (91.0%) 123 (91.8%) 120 (90.9%) Total number of events 609 622 703 cl A.1 Patients with at least one event 78 (58.2%) 75 (56.0%) 89 (67.4%) Total number of events 132 130 160 trm A.1.1.1.1 50 (37.3%) 45 (33.6%) 63 (47.7%) trm A.1.1.1.2 48 (35.8%) 48 (35.8%) 50 (37.9%) cl B.1 Patients with at least one event 47 (35.1%) 49 (36.6%) 43 (32.6%) Total number of events 56 60 62 trm B.1.1.1.1 47 (35.1%) 49 (36.6%) 43 (32.6%) cl B.2 Patients with at least one event 79 (59.0%) 74 (55.2%) 85 (64.4%) Total number of events 129 138 143 trm B.2.1.2.1 49 (36.6%) 44 (32.8%) 52 (39.4%) trm B.2.2.3.1 48 (35.8%) 54 (40.3%) 51 (38.6%) cl C.1 Patients with at least one event 43 (32.1%) 46 (34.3%) 43 (32.6%) Total number of events 55 63 64 trm C.1.1.1.3 43 (32.1%) 46 (34.3%) 43 (32.6%) cl C.2 Patients with at least one event 35 (26.1%) 48 (35.8%) 55 (41.7%) Total number of events 48 53 65 trm C.2.1.2.1 35 (26.1%) 48 (35.8%) 55 (41.7%) cl D.1 Patients with at least one event 79 (59.0%) 67 (50.0%) 80 (60.6%) Total number of events 127 106 135 trm D.1.1.1.1 50 (37.3%) 42 (31.3%) 51 (38.6%) trm D.1.1.4.2 48 (35.8%) 42 (31.3%) 50 (37.9%) cl D.2 Patients with at least one event 47 (35.1%) 58 (43.3%) 57 (43.2%) Total number of events 62 72 74 trm D.2.1.5.3 47 (35.1%) 58 (43.3%) 57 (43.2%) 4.3 Time to Event Analysis Tables 4.3.1 Data and models used throughout Code resetSession() library(dplyr) library(tidyr) library(stringr) library(purrr) library(survival) data(&quot;cadaette&quot;, package = &quot;random.cdisc.data&quot;) head(cadaette) # A tibble: 6 × 66 STUDYID USUBJID SUBJID SITEID AGE AGEU SEX RACE ETHNIC COUNTRY DTHFL &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; 1 AB12345 AB12345-BR… id-105 BRA-1 38 YEARS M BLAC… HISPA… BRA N 2 AB12345 AB12345-BR… id-105 BRA-1 38 YEARS M BLAC… HISPA… BRA N 3 AB12345 AB12345-BR… id-105 BRA-1 38 YEARS M BLAC… HISPA… BRA N 4 AB12345 AB12345-BR… id-105 BRA-1 38 YEARS M BLAC… HISPA… BRA N 5 AB12345 AB12345-BR… id-105 BRA-1 38 YEARS M BLAC… HISPA… BRA N 6 AB12345 AB12345-BR… id-105 BRA-1 38 YEARS M BLAC… HISPA… BRA N # ℹ 55 more variables: INVID &lt;chr&gt;, INVNAM &lt;chr&gt;, ARM &lt;fct&gt;, ARMCD &lt;fct&gt;, # ACTARM &lt;fct&gt;, ACTARMCD &lt;fct&gt;, TRT01P &lt;fct&gt;, TRT01A &lt;fct&gt;, TRT02P &lt;fct&gt;, # TRT02A &lt;fct&gt;, REGION1 &lt;fct&gt;, STRATA1 &lt;fct&gt;, STRATA2 &lt;fct&gt;, BMRKR1 &lt;dbl&gt;, # BMRKR2 &lt;fct&gt;, ITTFL &lt;fct&gt;, SAFFL &lt;fct&gt;, BMEASIFL &lt;fct&gt;, BEP01FL &lt;fct&gt;, # AEWITHFL &lt;fct&gt;, RANDDT &lt;date&gt;, TRTSDTM &lt;dttm&gt;, TRTEDTM &lt;dttm&gt;, # TRT01SDTM &lt;dttm&gt;, TRT01EDTM &lt;dttm&gt;, TRT02SDTM &lt;dttm&gt;, TRT02EDTM &lt;dttm&gt;, # AP01SDTM &lt;dttm&gt;, AP01EDTM &lt;dttm&gt;, AP02SDTM &lt;dttm&gt;, AP02EDTM &lt;dttm&gt;, … Code adtte &lt;- cadaette %&gt;% dplyr::filter(PARAMCD == &quot;AETTE2&quot;, SAFFL == &quot;Y&quot;) Cox Proportional Hazard fit: Code cph &lt;- coxph(Surv(AVAL, CNSR==0) ~ TRT01A + STRATA1, ties = &quot;exact&quot;, data = adtte) Kaplan-Meier Model Code surv_tbl &lt;- as.data.frame(summary(survfit(Surv(AVAL, CNSR==0) ~ TRT01A, data = adtte, conf.type = &quot;log-log&quot;))$table) %&gt;% dplyr::mutate(TRT01A = factor(str_remove(row.names(.), &quot;TRT01A=&quot;), levels = levels(adtte$TRT01A)), ind = FALSE) mn_footer_txt &lt;- c(&quot;Serious adverse events are defined as (...). All p-values are exploratory.&quot;, &quot;Hazard ratios are from a stratified Cox model of serious adverse event hazard rate,&quot;, &quot;with terms for treatment groups and strata1. Ties were handled using the exact&quot;, &quot;method. Hazard ratios of Placebo Combination over Drug X are presented, an&quot;, &quot;HR &lt; 1 denotes improvement compared to Drug X.&quot;) stitle_txt &lt;- c(&quot;x.x.x: Time to First Serious Adverse Event&quot;, &quot;Table x.x.x.x: Safety Endpoint - Safety Analysis Set&quot;) .kmState &lt;- currentState() 4.3.2 rtables Code resetSession(.kmState) library(rtables) ## this will be properly exported in the next release of rtables RefFootnote &lt;- rtables:::RefFootnote cnsr_counter &lt;- function(df, .var, .N_col) { x &lt;- df[!duplicated(df$USUBJID), .var] x &lt;- x[x != &quot;__none__&quot;] lapply(table(x), function(xi) rcell(xi*c(1, 1/.N_col), format = &quot;xx (xx.xx%)&quot;)) } a_count_subjs &lt;- function(x, .N_col) { in_rows(&quot;Subjects with Adverse Events n (%)&quot; = rcell(length(unique(x)) * c(1, 1 / .N_col), format = &quot;xx (xx.xx%)&quot;)) } a_cph &lt;- function(df, .var, .in_ref_col, .ref_full, full_cox_fit) { if(.in_ref_col) { ret &lt;- replicate(3, list(rcell(NULL))) } else { curtrt &lt;- df[[.var]][1] coefs &lt;- coef(full_cox_fit) sel_pos &lt;- grep(curtrt, names(coefs), fixed = TRUE) hrval &lt;- exp(coefs[sel_pos]) hrvalret &lt;- rcell(hrval, format = &quot;xx.x&quot;) sdf &lt;- survdiff(Surv(AVAL, CNSR==0) ~ TRT01A + STRATA1, data = rbind(df, .ref_full)) pval &lt;- (1-pchisq(sdf$chisq, length(sdf$n)-1))/2 ci_val &lt;- exp(unlist(confint(full_cox_fit)[sel_pos,])) ret &lt;- list(rcell(hrval, format = &quot;xx.x&quot;), rcell(ci_val, format = &quot;(xx.x, xx.x)&quot;), rcell(pval, format = &quot;x.xxxx | (&lt;0.0001)&quot;)) } in_rows(.list = ret, .names = c(&quot;Hazard ratio&quot;, &quot;95% confidence interval&quot;, &quot;p-value (one-sided stratified log rank)&quot;)) } a_tte &lt;- function(df, .var, kp_table) { ind &lt;- grep(df[[.var]][1], row.names(kp_table), fixed = TRUE) minmax &lt;- range(df[[&quot;AVAL&quot;]]) mm_val_str &lt;- format_value(minmax, format = &quot;xx.x, xx.x&quot;) rowfn &lt;- list() in_rows(Median = kp_table[ind, &quot;median&quot;, drop = TRUE], &quot;95% confidence interval&quot; = unlist(kp_table[ind, c(&quot;0.95LCL&quot;, &quot;0.95UCL&quot;)]), &quot;Min Max&quot; = mm_val_str, .formats = c(&quot;xx.xx&quot;, &quot;xx.xx - xx.xx&quot;, &quot;xx&quot;), .cell_footnotes = list(NULL, NULL, list(RefFootnote(&quot;Denotes censoring&quot;, index = 0L, symbol = &quot;*&quot;)))) } adtte2 &lt;- adtte |&gt; mutate(CNSDTDSC = ifelse(CNSDTDSC == &quot;&quot;, &quot;__none__&quot;, CNSDTDSC)) lyt &lt;- basic_table(show_colcounts = TRUE, title = &quot;x.x: Safety Data&quot;, subtitles = stitle_txt, main_footer = mn_footer_txt, prov_footer = &quot;Source: ADTTE DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY&quot;) |&gt; split_cols_by(&quot;ARM&quot;, ref_group = &quot;A: Drug X&quot;) |&gt; analyze(&quot;USUBJID&quot;, a_count_subjs, show_labels = &quot;hidden&quot;) |&gt; analyze(&quot;CNSDTDSC&quot;, cnsr_counter, var_labels = &quot;Censored Subjects&quot;, show_labels = &quot;visible&quot;) |&gt; analyze(&quot;ARM&quot;, a_cph, extra_args = list(full_cox_fit = cph), show_labels = &quot;hidden&quot;) |&gt; analyze(&quot;ARM&quot;, a_tte, var_labels = &quot;Time to first adverse event&quot;, show_labels = &quot;visible&quot;, extra_args = list(kp_table = surv_tbl), table_names = &quot;kapmeier&quot;) tbl_tte &lt;- build_table(lyt, adtte2) fnotes_at_path(tbl_tte, c(&quot;ma_USUBJID_CNSDTDSC_ARM_kapmeier&quot;, &quot;kapmeier&quot;)) &lt;- &quot;Product-limit (Kaplan-Meier) estimates.&quot; tbl_tte x.x: Safety Data x.x.x: Time to First Serious Adverse Event Table x.x.x.x: Safety Endpoint - Safety Analysis Set ———————————————————————————————————————————————————————————————————————————————————————— A: Drug X B: Placebo C: Combination (N=134) (N=134) (N=132) ———————————————————————————————————————————————————————————————————————————————————————— Subjects with Adverse Events n (%) 134 (100.00%) 134 (100.00%) 132 (100.00%) Censored Subjects Clinical Cut Off 10 (7.46%) 4 (2.99%) 14 (10.61%) Completion or Discontinuation 13 (9.70%) 3 (2.24%) 16 (12.12%) End of AE Reporting Period 22 (16.42%) 4 (2.99%) 14 (10.61%) Hazard ratio 1.5 1.1 95% confidence interval (1.1, 1.9) (0.8, 1.5) p-value (one-sided stratified log rank) 0.0208 0.4619 Time to first adverse event {1} Median 0.39 0.37 0.26 95% confidence interval 0.23 - 0.60 0.25 - 0.46 0.18 - 0.34 Min Max 0.0, 3.0 {*} 0.0, 3.0 {*} 0.0, 3.0 {*} ———————————————————————————————————————————————————————————————————————————————————————— {1} - Product-limit (Kaplan-Meier) estimates. {*} - Denotes censoring ———————————————————————————————————————————————————————————————————————————————————————— Serious adverse events are defined as (...). All p-values are exploratory. Hazard ratios are from a stratified Cox model of serious adverse event hazard rate, with terms for treatment groups and strata1. Ties were handled using the exact method. Hazard ratios of Placebo Combination over Drug X are presented, an HR &lt; 1 denotes improvement compared to Drug X. Source: ADTTE DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY 4.3.3 tern (+rtables) tern encapsulates the specific statistical choices used by Roche. In particulate, its implementation of the Cox pairwise analysis does not implement the one-tailed p-value strategy used in the rest of this chapter. We will first showcaes the pure tern solution, which has different p-values for this reason, and then implement a hybrid tern + explicit rtables solution which fully recreates the exact table generated by other systems. Code resetSession(.kmState) library(tern) ## this will be properly exported in the next release of rtables RefFootnote &lt;- rtables:::RefFootnote adtte3 &lt;- adtte adtte3$is_event &lt;- adtte$CNSR == 0 adtte3$CNSDTDSC[adtte$CNSDTDSC == &quot;&quot;] &lt;- NA lyt1 &lt;- basic_table(show_colcounts = TRUE, title = &quot;x.x: Safety Data&quot;, subtitles = stitle_txt, main_footer = mn_footer_txt, prov_footer = &quot;Source: ADTTE DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY&quot;) |&gt; split_cols_by(&quot;TRT01A&quot;, ref_group = &quot;A: Drug X&quot;) |&gt; count_values( &quot;STUDYID&quot;, values = &quot;AB12345&quot;, .stats = &quot;count_fraction&quot;, .labels = c(count_fraction = &quot;Subjects with Adverse Events n (%)&quot;) ) |&gt; count_occurrences( &quot;CNSDTDSC&quot;, var_labels = &quot;Censored Subjects&quot;, show_labels = &quot;visible&quot;, .formats = c(count_fraction = &quot;xx.xx (xx.xx%)&quot;) ) |&gt; coxph_pairwise( vars = &quot;AVAL&quot;, is_event = &quot;is_event&quot;, control = control_coxph(pval_method = &quot;log-rank&quot;, ties = &quot;exact&quot;), strat = &quot;STRATA1&quot;, .stats = c(&quot;hr&quot;, &quot;hr_ci&quot;, &quot;pvalue&quot;), .formats = c(hr = &quot;xx.x&quot;, hr_ci = &quot;(xx.x, xx.x)&quot;, pvalue = &quot;xx.xxxx&quot;), .labels = c(hr = &quot;Hazard ratio&quot;, hr_ci = &quot;95% confidence interval&quot;, pvalue = &quot;p-value (stratified log rank)&quot;), show_labels = &quot;hidden&quot;, table_names = &quot;coxph&quot; ) |&gt; surv_time( vars = &quot;AVAL&quot;, is_event = &quot;is_event&quot;, control = control_surv_time(conf_type = &quot;log-log&quot;), .stats = c(&quot;median&quot;, &quot;median_ci&quot;, &quot;range&quot;), .formats = c(median = &quot;xx.xx&quot;, median_ci = &quot;xx.xx - xx.xx&quot;, range = &quot;xx.x, xx.x&quot;), .labels = c(median_ci = &quot;95% confidence interval&quot;, range = &quot;Min Max&quot;), .indent_mods = c(median_ci = 0L), var_labels = &quot;Time to first adverse event&quot; ) tbl_tte_tern &lt;- build_table(lyt = lyt1, df = adtte3) fnotes_at_path(tbl_tte_tern, c(&quot;ma_STUDYID_CNSDTDSC_coxph_AVAL&quot;, &quot;AVAL&quot;)) &lt;- &quot;Product-limit (Kaplan-Meier) estimates.&quot; fnote &lt;- RefFootnote(&quot;Censored.&quot;, index = 0L, symbol = &quot;^&quot;) for(pth in col_paths(tbl_tte_tern)) { fnotes_at_path(tbl_tte_tern, rowpath = c(&quot;ma_STUDYID_CNSDTDSC_coxph_AVAL&quot;, &quot;AVAL&quot;, &quot;range&quot;), colpath = pth) &lt;- fnote } tbl_tte_tern x.x: Safety Data x.x.x: Time to First Serious Adverse Event Table x.x.x.x: Safety Endpoint - Safety Analysis Set ———————————————————————————————————————————————————————————————————————————————————— A: Drug X B: Placebo C: Combination (N=134) (N=134) (N=132) ———————————————————————————————————————————————————————————————————————————————————— Subjects with Adverse Events n (%) 134 (100.00%) 134 (100.00%) 132 (100.00%) Censored Subjects Clinical Cut Off 10.00 (7.46%) 4.00 (2.99%) 14.00 (10.61%) Completion or Discontinuation 13.00 (9.70%) 3.00 (2.24%) 16.00 (12.12%) End of AE Reporting Period 22.00 (16.42%) 4.00 (2.99%) 14.00 (10.61%) Hazard ratio 1.5 1.1 95% confidence interval (1.2, 2.0) (0.8, 1.5) p-value (stratified log rank) 0.0023 0.6027 Time to first adverse event {1} Median 0.39 0.37 0.26 95% confidence interval 0.23 - 0.60 0.25 - 0.46 0.18 - 0.34 Min Max 0.0, 3.0 {^} 0.0, 3.0 {^} 0.0, 3.0 {^} ———————————————————————————————————————————————————————————————————————————————————— {1} - Product-limit (Kaplan-Meier) estimates. {^} - Censored. ———————————————————————————————————————————————————————————————————————————————————— Serious adverse events are defined as (...). All p-values are exploratory. Hazard ratios are from a stratified Cox model of serious adverse event hazard rate, with terms for treatment groups and strata1. Ties were handled using the exact method. Hazard ratios of Placebo Combination over Drug X are presented, an HR &lt; 1 denotes improvement compared to Drug X. Source: ADTTE DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY We now create the hybrid table where we utilize a custom analysis function to recreate the one-sided p-values while using tern for the rest of the table structure. Code a_cph &lt;- function(df, .var, .in_ref_col, .ref_full, full_cox_fit) { if(.in_ref_col) { ret &lt;- replicate(3, list(rcell(NULL))) } else { curtrt &lt;- df[[.var]][1] coefs &lt;- coef(full_cox_fit) sel_pos &lt;- grep(curtrt, names(coefs), fixed = TRUE) hrval &lt;- exp(coefs[sel_pos]) hrvalret &lt;- rcell(hrval, format = &quot;xx.x&quot;) sdf &lt;- survival::survdiff(Surv(AVAL, CNSR==0) ~ TRT01A + STRATA1, data = rbind(df, .ref_full)) pval &lt;- (1-pchisq(sdf$chisq, length(sdf$n)-1))/2 ci_val &lt;- exp(unlist(confint(full_cox_fit)[sel_pos,])) ret &lt;- list(rcell(hrval, format = &quot;xx.x&quot;), rcell(ci_val, format = &quot;(xx.x, xx.x)&quot;), rcell(pval, format = &quot;x.xxxx | (&lt;0.0001)&quot;)) } in_rows(.list = ret, .names = c(&quot;Hazard ratio&quot;, &quot;95% confidence interval&quot;, &quot;p-value (one-sided stratified log rank)&quot;)) } lyt2 &lt;- basic_table(show_colcounts = TRUE, title = &quot;x.x: Safety Data&quot;, subtitles = stitle_txt, main_footer = mn_footer_txt, prov_footer = &quot;Source: ADTTE DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY&quot;) |&gt; split_cols_by(&quot;TRT01A&quot;, ref_group = &quot;A: Drug X&quot;) |&gt; count_values( &quot;STUDYID&quot;, values = &quot;AB12345&quot;, .stats = &quot;count_fraction&quot;, .labels = c(count_fraction = &quot;Subjects with Adverse Events n (%)&quot;) ) |&gt; count_occurrences( &quot;CNSDTDSC&quot;, var_labels = &quot;Censored Subjects&quot;, show_labels = &quot;visible&quot;, .formats = c(count_fraction = &quot;xx.xx (xx.xx%)&quot;) ) |&gt; analyze(&quot;ARM&quot;, a_cph, extra_args = list(full_cox_fit = cph), show_labels = &quot;hidden&quot;) |&gt; surv_time( vars = &quot;AVAL&quot;, is_event = &quot;is_event&quot;, control = control_surv_time(conf_type = &quot;log-log&quot;), .stats = c(&quot;median&quot;, &quot;median_ci&quot;, &quot;range&quot;), .formats = c(median = &quot;xx.xx&quot;, median_ci = &quot;xx.xx - xx.xx&quot;, range = &quot;xx.x, xx.x&quot;), .labels = c(median_ci = &quot;95% confidence interval&quot;, range = &quot;Min Max&quot;), .indent_mods = c(median_ci = 0L), var_labels = &quot;Time to first adverse event&quot; ) tbl_tte_tern2 &lt;- build_table(lyt = lyt2, df = adtte3) fnotes_at_path(tbl_tte_tern2, c(&quot;ma_STUDYID_CNSDTDSC_ARM_AVAL&quot;, &quot;AVAL&quot;)) &lt;- &quot;Product-limit (Kaplan-Meier) estimates.&quot; fnote &lt;- RefFootnote(&quot;Denotes censoring.&quot;, index = 0L, symbol = &quot;*&quot;) for(pth in col_paths(tbl_tte_tern2)) { fnotes_at_path(tbl_tte_tern2, rowpath = c(&quot;ma_STUDYID_CNSDTDSC_ARM_AVAL&quot;, &quot;AVAL&quot;, &quot;range&quot;), colpath = pth) &lt;- fnote } tbl_tte_tern2 x.x: Safety Data x.x.x: Time to First Serious Adverse Event Table x.x.x.x: Safety Endpoint - Safety Analysis Set ————————————————————————————————————————————————————————————————————————————————————————— A: Drug X B: Placebo C: Combination (N=134) (N=134) (N=132) ————————————————————————————————————————————————————————————————————————————————————————— Subjects with Adverse Events n (%) 134 (100.00%) 134 (100.00%) 132 (100.00%) Censored Subjects Clinical Cut Off 10.00 (7.46%) 4.00 (2.99%) 14.00 (10.61%) Completion or Discontinuation 13.00 (9.70%) 3.00 (2.24%) 16.00 (12.12%) End of AE Reporting Period 22.00 (16.42%) 4.00 (2.99%) 14.00 (10.61%) Hazard ratio 1.5 1.1 95% confidence interval (1.1, 1.9) (0.8, 1.5) p-value (one-sided stratified log rank) 0.0208 0.4619 Time to first adverse event {1} Median 0.39 0.37 0.26 95% confidence interval 0.23 - 0.60 0.25 - 0.46 0.18 - 0.34 Min Max 0.0, 3.0 {*} 0.0, 3.0 {*} 0.0, 3.0 {*} ————————————————————————————————————————————————————————————————————————————————————————— {1} - Product-limit (Kaplan-Meier) estimates. {*} - Denotes censoring. ————————————————————————————————————————————————————————————————————————————————————————— Serious adverse events are defined as (...). All p-values are exploratory. Hazard ratios are from a stratified Cox model of serious adverse event hazard rate, with terms for treatment groups and strata1. Ties were handled using the exact method. Hazard ratios of Placebo Combination over Drug X are presented, an HR &lt; 1 denotes improvement compared to Drug X. Source: ADTTE DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY 4.3.4 Cell Value Derivation for gt of Time to Event Analysis Our standard TTE table consists of (a derivation of) four main parts: Descriptive stats including the number of subjects with an event, number of subjects censored and censoring reasons Hazard ratio with corresponding 95% CI from a (stratified) Cox model and a p-value from a stratified log rank test Median time to event Kaplan-Meier analysis Number of patients at risk at specified visits from Kaplan-Meier analysis (omitted here). Code resetSession(.kmState) library(gt) ### Subject Count with events ## surv_tbl calculated above subj_count &lt;- surv_tbl |&gt; dplyr::mutate(pct = sprintf(&quot;%i (%5.1f)&quot;, events, 100*events/records), label = &quot;Number of subjects with serious adverse event, n (%)&quot;) |&gt; dplyr::select(label, TRT01A, pct) |&gt; tidyr::pivot_wider(id_cols = label, names_from = TRT01A, values_from = pct) |&gt; dplyr::mutate(ind = FALSE) # Number of censored subjects cnsrd_subj_full &lt;- surv_tbl |&gt; dplyr::mutate(pct = sprintf(&quot;%i (%4.1f)&quot;, records-events, 100*(records-events)/records), CNSDTDSC = &quot;Number of censored subjects, n (%)&quot;) |&gt; dplyr::select(CNSDTDSC, TRT01A, pct) cnsrd_subj &lt;- adtte |&gt; dplyr::group_by(TRT01A) |&gt; dplyr::mutate(CNSR = CNSR/n()) |&gt; dplyr::ungroup() |&gt; dplyr::filter(CNSR != 0) |&gt; dplyr::group_by(TRT01A, CNSDTDSC) |&gt; dplyr::summarise(pct = sprintf(&quot;%i (%4.1f)&quot;, sum(CNSR != 0), 100*sum(CNSR)), .groups = &quot;drop&quot;) |&gt; dplyr::bind_rows(cnsrd_subj_full) |&gt; tidyr::pivot_wider(id_cols = CNSDTDSC, names_from = TRT01A, values_from = pct) |&gt; dplyr::rename(label = CNSDTDSC) |&gt; dplyr::mutate(ind = label != &quot;Number of censored subjects, n (%)&quot;) |&gt; dplyr::arrange(ind) Code ## cph calculated above hr &lt;- exp(coef(cph)) ci_hr &lt;- exp(confint(cph)) # Hazard ratio and 95% CI df_hr &lt;- cbind(ci_hr, hr) |&gt; as.data.frame() |&gt; (\\(data) dplyr::filter(data, grepl(&quot;TRT01A&quot;, row.names(data))))() |&gt; (\\(data) dplyr::mutate( data, TRT01A = factor(stringr::str_remove(row.names(data), &quot;TRT01A&quot;)), ci = sprintf(&quot;[%4.1f, %4.1f]&quot;, round(!!sym(&quot;2.5 %&quot;), 1), round(!!sym(&quot;97.5 %&quot;), 1)) ))() |&gt; dplyr::select(TRT01A, hr, ci) # Log rank p-value log_rank_test &lt;- purrr::map_df(.x = list(c(&quot;A: Drug X&quot;, &quot;B: Placebo&quot;), c(&quot;A: Drug X&quot;, &quot;C: Combination&quot;)), .f = ~{sdf &lt;- survdiff(Surv(AVAL, CNSR==0) ~ TRT01A + STRATA1, data = adtte |&gt; dplyr::filter(TRT01A %in% .x)); data.frame(TRT01A = .x[2], pval = (1-pchisq(sdf$chisq, length(sdf$n)-1))/2)}) df_hr_comp &lt;- merge(df_hr, log_rank_test, by = &quot;TRT01A&quot;) |&gt; dplyr::mutate(hr = sprintf(&quot;%4.1f&quot;, round(hr, 1)), pval = ifelse(pval &lt; 0.0001, &quot;&lt;0.0001&quot;, sprintf(&quot;%6.4f&quot;, round(pval, 4)))) |&gt; tidyr::pivot_longer(cols = c(hr, ci, pval), names_to = &quot;label&quot;, values_to = &quot;val&quot;) |&gt; tidyr::pivot_wider(names_from = TRT01A, values_from = &quot;val&quot;) |&gt; dplyr::mutate(label = dplyr::recode(label, &quot;hr&quot; = &quot;Hazard ratio&quot;, &quot;ci&quot; = &quot;95% confidence interval&quot;, &quot;pval&quot; = &quot;p-value (one-sided stratified log rank)&quot;), ind = FALSE) Code median_survtime &lt;- surv_tbl |&gt; dplyr::mutate(ci = sprintf(&quot;[%4.2f, %4.2f]&quot;, !!sym(&quot;0.95LCL&quot;), !!sym(&quot;0.95UCL&quot;)), median = sprintf(&quot;%4.2f&quot;, median), id = &quot;&quot;) |&gt; dplyr::select(TRT01A, id, median, ci) |&gt; tidyr::pivot_longer(cols = c(id, median, ci), names_to = &quot;label&quot;, values_to = &quot;val&quot;) |&gt; tidyr::pivot_wider(names_from = TRT01A, values_from = val) |&gt; dplyr::mutate(ind = label != &quot;id&quot;, label = dplyr::recode(label, &quot;median&quot; = &quot;Median (years)&quot;, &quot;ci&quot; = &quot;95% confidence interval&quot;, &quot;id&quot; = &quot;Time to first serious adverse event (a)&quot;)) min_max &lt;- adtte |&gt; dplyr::filter(!(AVAL == 0 &amp; CNSR == 1)) |&gt; dplyr::group_by(TRT01A) |&gt; dplyr::mutate(max_cnsr = !is.na(AVAL) &amp; AVAL == max(AVAL, na.rm = TRUE) &amp; CNSR == 1) |&gt; dplyr::summarize( min_max = sprintf(&quot;%4.2f, %4.2f%s&quot;, min(AVAL, na.rm = TRUE), max(AVAL, na.rm = TRUE), ifelse(sum(max_cnsr) &gt; 0, &quot;*&quot;, &quot;&quot;)), .groups = &quot;drop&quot; ) |&gt; tidyr::pivot_wider(names_from = TRT01A, values_from = min_max) |&gt; dplyr::mutate(label = &quot;Min, Max (b)&quot;, ind = TRUE) model_sum &lt;- dplyr::bind_rows(subj_count, cnsrd_subj, df_hr_comp, median_survtime, min_max) 4.3.5 gt Code header_n &lt;- adtte |&gt; dplyr::group_by(TRT01A) |&gt; dplyr::summarise(N = dplyr::n(), .groups = &quot;drop&quot;) |&gt; dplyr::transmute(TRT = sprintf(&quot;%s \\n N=%i (100%%)&quot;, TRT01A, N)) |&gt; dplyr::group_split(TRT) ### Begin table creation gt(model_sum) |&gt; cols_hide(ind) |&gt; tab_header( title = &quot;x.x: Safety Data&quot;, subtitle = md(&quot;x.x.x: Time to First Serious Adverse Event \\n Table x.x.x.x: Safety Endpoint - Safety Analysis Set&quot;), preheader = c(&quot;Protocol: XXXXX&quot;, &quot;Cutoff date: DDMMYYYY&quot;) ) |&gt; tab_source_note(&quot;Source: ADTTE DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY&quot;) |&gt; opt_align_table_header(align = &quot;left&quot;) |&gt; cols_align(align = c(&quot;center&quot;), columns = c(&quot;A: Drug X&quot;, &quot;B: Placebo&quot;, &quot;C: Combination&quot;)) |&gt; cols_align(align = &quot;left&quot;, columns = &quot;label&quot;) |&gt; tab_style(style = cell_text(indent = pct(5)), locations = cells_body(columns = 1, rows = ind == TRUE)) |&gt; sub_missing(columns = everything(), missing_text = &quot;&quot;) |&gt; cols_label(&quot;label&quot; = &quot;&quot;, &quot;A: Drug X&quot; = md(header_n[[1]]), &quot;B: Placebo&quot; = md(header_n[[2]]), &quot;C: Combination&quot; = md(header_n[[3]])) |&gt; tab_footnote(footnote = md(&quot;Serious adverse events are defines as (...). All p-values are exploratory. \\n (a) Product-limit (Kaplan-Meier) estimates. \\n (b) Minimum and maximum of event times. * Denotes censoring. \\n Hazard ratios are from a stratified Cox model of serious adverse event hazard rate, with terms for treatment groups and strata1. Ties were handled using the exact method. Hazard ratios of Placebo/ Combination over Drug X are presented, a HR &lt; 1 denotes improvement compared to Drug X.&quot;)) |&gt; tab_options( table.font.names = &quot;Courier new&quot;, table.font.size = 9, page.orientation = &quot;landscape&quot;, page.numbering = TRUE, page.header.use_tbl_headings = TRUE, page.footer.use_tbl_notes = TRUE) #uspnkbczvu table { font-family: 'Courier new'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #uspnkbczvu thead, #uspnkbczvu tbody, #uspnkbczvu tfoot, #uspnkbczvu tr, #uspnkbczvu td, #uspnkbczvu th { border-style: none; } #uspnkbczvu p { margin: 0; padding: 0; } #uspnkbczvu .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 9px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #uspnkbczvu .gt_caption { padding-top: 4px; padding-bottom: 4px; } #uspnkbczvu .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #uspnkbczvu .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #uspnkbczvu .gt_heading { background-color: #FFFFFF; text-align: left; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #uspnkbczvu .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #uspnkbczvu .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #uspnkbczvu .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #uspnkbczvu .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #uspnkbczvu .gt_column_spanner_outer:first-child { padding-left: 0; } #uspnkbczvu .gt_column_spanner_outer:last-child { padding-right: 0; } #uspnkbczvu .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #uspnkbczvu .gt_spanner_row { border-bottom-style: hidden; } #uspnkbczvu .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #uspnkbczvu .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #uspnkbczvu .gt_from_md > :first-child { margin-top: 0; } #uspnkbczvu .gt_from_md > :last-child { margin-bottom: 0; } #uspnkbczvu .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #uspnkbczvu .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #uspnkbczvu .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #uspnkbczvu .gt_row_group_first td { border-top-width: 2px; } #uspnkbczvu .gt_row_group_first th { border-top-width: 2px; } #uspnkbczvu .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #uspnkbczvu .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #uspnkbczvu .gt_first_summary_row.thick { border-top-width: 2px; } #uspnkbczvu .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #uspnkbczvu .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #uspnkbczvu .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #uspnkbczvu .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #uspnkbczvu .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #uspnkbczvu .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #uspnkbczvu .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #uspnkbczvu .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #uspnkbczvu .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #uspnkbczvu .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #uspnkbczvu .gt_left { text-align: left; } #uspnkbczvu .gt_center { text-align: center; } #uspnkbczvu .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #uspnkbczvu .gt_font_normal { font-weight: normal; } #uspnkbczvu .gt_font_bold { font-weight: bold; } #uspnkbczvu .gt_font_italic { font-style: italic; } #uspnkbczvu .gt_super { font-size: 65%; } #uspnkbczvu .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #uspnkbczvu .gt_asterisk { font-size: 100%; vertical-align: 0; } #uspnkbczvu .gt_indent_1 { text-indent: 5px; } #uspnkbczvu .gt_indent_2 { text-indent: 10px; } #uspnkbczvu .gt_indent_3 { text-indent: 15px; } #uspnkbczvu .gt_indent_4 { text-indent: 20px; } #uspnkbczvu .gt_indent_5 { text-indent: 25px; } x.x: Safety Data x.x.x: Time to First Serious Adverse Event Table x.x.x.x: Safety Endpoint - Safety Analysis Set A: Drug X N=134 (100%) B: Placebo N=134 (100%) C: Combination N=132 (100%) Number of subjects with serious adverse event, n (%) 89 ( 66.4) 123 ( 91.8) 88 ( 66.7) Number of censored subjects, n (%) 45 (33.6) 11 ( 8.2) 44 (33.3) Clinical Cut Off 10 ( 7.5) 4 ( 3.0) 14 (10.6) Completion or Discontinuation 13 ( 9.7) 3 ( 2.2) 16 (12.1) End of AE Reporting Period 22 (16.4) 4 ( 3.0) 14 (10.6) Hazard ratio 1.5 1.1 95% confidence interval [ 1.1, 1.9] [ 0.8, 1.5] p-value (one-sided stratified log rank) 0.0208 0.4619 Time to first serious adverse event (a) Median (years) 0.39 0.37 0.26 95% confidence interval [0.23, 0.60] [0.25, 0.46] [0.18, 0.34] Min, Max (b) 0.00, 3.00* 0.01, 3.00* 0.00, 3.00* Source: ADTTE DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY Serious adverse events are defines as (…). All p-values are exploratory. (a) Product-limit (Kaplan-Meier) estimates. (b) Minimum and maximum of event times. * Denotes censoring. Hazard ratios are from a stratified Cox model of serious adverse event hazard rate, with terms for treatment groups and strata1. Ties were handled using the exact method. Hazard ratios of Placebo/ Combination over Drug X are presented, a HR &lt; 1 denotes improvement compared to Drug X. 4.3.6 tables Code resetSession(.kmState) library(tables) table_options(doCSS = TRUE) ex_adae &lt;- formatters::ex_adae subject_counts &lt;- table(adsl$ARM) countpercentid &lt;- function(num, ARM) { n &lt;- length(unique(num)) if (n == 0) pct &lt;- 0 else pct &lt;- 100*n/subject_counts[ARM[1]] sprintf(&quot;%d (%.2f%%)&quot;, length(unique(num)), pct) } valuepercent &lt;- function(x, ARM) { sprintf(&quot;%d (%.2f%%)&quot;, x, 100*x/subject_counts[ARM] ) } blanks &lt;- function(x) &quot;&quot; count &lt;- function(x) sprintf(&quot;(N=%d)&quot;, length(x)) hazardratio &lt;- function(ARM) { entry &lt;- paste0(&quot;TRT01A&quot;, ARM) coef &lt;- coef(cph) if (entry %in% names(coef)) sprintf(&quot;%.1f&quot;, exp(coef[entry])) else &quot;&quot; } hazardratioconfint &lt;- function(ARM) { entry &lt;- paste0(&quot;TRT01A&quot;, ARM) confint &lt;- confint(cph) if (entry %in% rownames(confint)) { confint &lt;- as.numeric(confint[entry,]) sprintf(&quot;(%.1f, %.1f)&quot;, exp(confint[1]), exp(confint[2])) } else &quot;&quot; } hazardpvalue &lt;- function(ARM) { if (ARM == &quot;A: Drug X&quot;) &quot;&quot; else { twogroups &lt;- c(&quot;A: Drug X&quot;, ARM) sdf &lt;- survdiff(Surv(AVAL, CNSR==0) ~ TRT01A + STRATA1, data = adtte, subset = TRT01A %in% twogroups) pval &lt;- (1-pchisq(sdf$chisq, length(sdf$n)-1))/2 sprintf(&quot;%.4f&quot;, pval) } } Median &lt;- function(ARM) { vals &lt;- subset(surv_tbl, TRT01A == ARM) sprintf(&quot;%.2f&quot;, vals$median) } minmaxevent &lt;- function(ARM) { vals &lt;- subset(adtte, TRT01A == ARM) sprintf(&quot;%.2f, %.2f&quot;, min(vals$AVAL), max(vals$AVAL)) } eventCI &lt;- function(ARM) { vals &lt;- subset(surv_tbl, TRT01A == ARM) sprintf(&quot;[%.2f, %.2f]&quot;, vals$`0.95LCL`, vals$`0.95UCL`) } heading &lt;- tabular(Heading(&quot;&quot;)*1*Heading(&quot;&quot;)*count ~ Heading()*ARM, data = adsl) part1 &lt;- tabular( Heading(&quot;Subjects with serious adverse events&quot;)*1*Heading(&quot;&quot;)* events*Heading()* valuepercent*Arguments(ARM = TRT01A) ~ Heading()*TRT01A, data = surv_tbl ) part2 &lt;- tabular( Heading(&quot;Number of censored subjects&quot;)*1*Factor(CNSDTDSC, &quot;&quot;)* Heading()*countpercentid*Arguments(ARM = TRT01A)* Heading()*USUBJID ~ Heading()*TRT01A, data = subset(adtte, nchar(CNSDTDSC) &gt; 0)) part3 &lt;- tabular( ( Heading(&quot;Hazard ratio&quot;)*1*Heading(&quot;&quot;)*hazardratio + Heading(&quot;95% confidence interval&quot;)*1*Heading(&quot;&quot;)*hazardratioconfint + Heading(&quot;p-value (one-sided stratified log rank)&quot;)*1*Heading(&quot;&quot;)*hazardpvalue + Heading(&quot;Time to first serious adverse event&quot;)*1*( Heading(&quot;Median (years)&quot;)*Median + Heading(&quot;95% confidence interval&quot;)*eventCI + Heading(&quot;Min, Max&quot;)*minmaxevent))* Heading()*as.character(TRT01A) ~ Heading()*TRT01A, data = surv_tbl) useGroupLabels(rbind(heading, part1, part2, part3), indent = &quot;&amp;emsp;&quot;) #table39ba7771bb97 .Rtable thead, .Rtable .even { background-color: inherit; } #table39ba7771bb97 .left { text-align:left; } #table39ba7771bb97 .center { text-align:center; } #table39ba7771bb97 .right { text-align:right; } #table39ba7771bb97 .Rtable, #table39ba7771bb97 .Rtable thead { border-collapse: collapse; border-style: solid; border-width: medium 0; border-color: inherit; } #table39ba7771bb97 .Rtable th, #table39ba7771bb97 .Rtable td { padding-left: 0.5em; padding-right: 0.5em; border-width: 0; } A: Drug X B: Placebo C: Combination   (N=134) (N=134) (N=132) Subjects with serious adverse events 89 (66.42%) 123 (91.79%) 88 (66.67%) Number of censored subjects        Clinical Cut Off 10 (7.46%) 4 (2.99%) 14 (10.61%)  Completion or Discontinuation 13 (9.70%) 3 (2.24%) 16 (12.12%)  End of AE Reporting Period 22 (16.42%) 4 (2.99%) 14 (10.61%) Hazard ratio   1.5 1.1 95% confidence interval   (1.1, 1.9) (0.8, 1.5) p-value (one-sided stratified log rank)   0.0208 0.4619 Time to first serious adverse event        Median (years) 0.39 0.37 0.26  95% confidence interval [0.23, 0.60] [0.25, 0.46] [0.18, 0.34]  Min, Max 0.00, 3.00 0.00, 3.00 0.00, 3.00 4.3.7 flextable This is a situation where the code required to create a flextable directly becomes too long or complex. In such case, it is more convenient to leverage existing functions from other packages to generate a tabular object and then convert it to a flextable using the as_flextable() method. Here we reuse the tables objects created in the previous section. Code library(flextable) rbind(part1, part2, part3) |&gt; as_flextable(spread_first_col = TRUE, add_tab = TRUE) |&gt; align(j = 1, part = &quot;all&quot;, align = &quot;left&quot;) |&gt; padding(padding = 4, part = &quot;all&quot;) |&gt; add_header_row( values = c(&quot;&quot;, fmt_header_n(subject_counts, newline = FALSE)), top = FALSE ) |&gt; hline(i = 1, part = &quot;header&quot;, border = fp_border_default(width = 0)) .cl-eb86ebe6{}.cl-eb7eb0c0{font-family:'Open Sans';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-eb82412c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:4pt;padding-left:4pt;padding-right:4pt;line-height: 1.4;background-color:transparent;}.cl-eb824140{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:4pt;padding-left:4pt;padding-right:4pt;line-height: 1.4;background-color:transparent;}.cl-eb82414a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:4pt;padding-left:4pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-eb824154{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:4pt;padding-left:4pt;padding-right:4pt;line-height: 1.4;background-color:transparent;}.cl-eb82415e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:4pt;padding-left:4pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-eb824168{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:4pt;padding-left:4pt;padding-right:4pt;line-height: 1.4;background-color:transparent;}.cl-eb824169{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:4pt;padding-left:4pt;padding-right:4pt;line-height: 1.4;background-color:transparent;}.cl-eb824172{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:4pt;padding-left:4pt;padding-right:4pt;line-height: 1.4;background-color:transparent;}.cl-eb825982{width:2.612in;background-color:transparent;vertical-align: bottom;border-bottom: 0 solid rgba(170, 170, 170, 1.00);border-top: 1.5pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eb825996{width:1.217in;background-color:transparent;vertical-align: bottom;border-bottom: 0 solid rgba(170, 170, 170, 1.00);border-top: 1.5pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eb825997{width:2.612in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eb8259a0{width:1.217in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eb8259aa{width:2.612in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eb8259ab{width:1.217in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eb8259b4{width:1.217in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eb8259be{width:2.612in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eb8259bf{width:1.217in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}A: Drug XB: PlaceboC: Combination(N=134)(N=134)(N=132)Subjects with serious adverse events89 (66.42%)123 (91.79%)88 (66.67%)Number of censored subjects&emsp;Clinical Cut Off10 (7.46%)4 (2.99%)14 (10.61%)&emsp;Completion or Discontinuation13 (9.70%)3 (2.24%)16 (12.12%)&emsp;End of AE Reporting Period22 (16.42%)4 (2.99%)14 (10.61%)Hazard ratio1.51.195% confidence interval(1.1, 1.9)(0.8, 1.5)p-value (one-sided stratified log rank)0.02080.4619Time to first serious adverse event&emsp;Median (years)0.390.370.26&emsp;95% confidence interval[0.23, 0.60][0.25, 0.46][0.18, 0.34]&emsp;Min, Max0.00, 3.000.00, 3.000.00, 3.00 4.3.8 tidytlg Code resetSession(.kmState) library(dplyr) library(tidytlg) library(broom) library(stringr) # Create analysis population counts tbl1 &lt;- freq(adtte, rowvar = &quot;SAFFL&quot;, colvar = &quot;TRT01A&quot;, statlist = statlist(&quot;n&quot;), rowtext = &quot;Analysis Set: Safety Population&quot;, subset = SAFFL == &quot;Y&quot;) # Create counts (percentages) for subjects with SAE tbl2 &lt;- freq(adtte, rowvar = &quot;CNSR&quot;, colvar = &quot;TRT01A&quot;, statlist = statlist(&quot;n (x.x%)&quot;), rowtext = &quot;Number of subjects with serious adverse events, n(%)&quot;, subset = CNSR == 0) # Create counts (percentages) for subjects with SAE tbl3a &lt;- freq(adtte, rowvar = &quot;CNSR&quot;, colvar = &quot;TRT01A&quot;, statlist = statlist(&quot;n (x.x%)&quot;), rowtext = &quot;Number of censored subjects, n(%)&quot;, subset = CNSR == 1) tbl3b &lt;- freq(adtte, rowvar = &quot;CNSDTDSC&quot;, colvar = &quot;TRT01A&quot;, statlist = statlist(&quot;n (x.x%)&quot;), subset = CNSR == 1) tbl3 &lt;- bind_rows(tbl3a, tbl3b) # CoxPH model coxmod &lt;- tidy(cph, exponentiate = TRUE, conf.int = TRUE, conf.level = 0.95) %&gt;% filter(str_detect(term, &quot;TRT01A&quot;)) %&gt;% mutate(term = str_remove(term, &quot;TRT01A&quot;)) tbl4a &lt;- coxmod %&gt;% mutate(hr = roundSAS(estimate, digits = 2, as_char = TRUE)) %&gt;% select(term, hr) %&gt;% pivot_wider(names_from = &quot;term&quot;, values_from = &quot;hr&quot;) %&gt;% mutate(label = &quot;Hazard ratio&quot;, row_type = &quot;HEADER&quot;) tbl4b &lt;- coxmod %&gt;% mutate(across(c(conf.low, conf.high), ~roundSAS(.x, digits = 2)), ci = paste0(&quot;(&quot;, conf.low, &quot;, &quot;, conf.high, &quot;)&quot;)) %&gt;% select(term, ci) %&gt;% pivot_wider(names_from = &quot;term&quot;, values_from = &quot;ci&quot;) %&gt;% mutate(label = &quot;95% Confidence Interval&quot;, row_type = &quot;VALUE&quot;) tbl4 &lt;- bind_rows(tbl4a, tbl4b) %&gt;% mutate(group_level = 0) # Logrank test log_rank_test &lt;- purrr::map_df(.x = list(c(&quot;A: Drug X&quot;, &quot;B: Placebo&quot;), c(&quot;A: Drug X&quot;, &quot;C: Combination&quot;)), .f = ~{sdf &lt;- survdiff(Surv(AVAL, CNSR==0) ~ TRT01A + STRATA1, data = adtte %&gt;% dplyr::filter(TRT01A %in% .x)); data.frame(TRT01A = .x[2], pval = (1-pchisq(sdf$chisq, length(sdf$n)-1))/2)}) tbl5 &lt;- log_rank_test %&gt;% mutate(pval = roundSAS(pval, digits = 3, as_char = TRUE)) %&gt;% pivot_wider(names_from = &quot;TRT01A&quot;, values_from = &quot;pval&quot;) %&gt;% mutate(label = &quot;p-value (one-sided stratified log rank)&quot;, row_type = &quot;HEADER&quot;, group_level = 0) # surv time stats tbl6a &lt;- surv_tbl %&gt;% mutate(median = roundSAS(median, digits = 2, as_char = TRUE)) %&gt;% select(TRT01A, median) %&gt;% pivot_wider(names_from = &quot;TRT01A&quot;, values_from = &quot;median&quot;) %&gt;% mutate(label = &quot;Median (years)&quot;, row_type = &quot;VALUE&quot;) %&gt;% add_row(label = &quot;Time to first serious adverse event (1)&quot;, row_type = &quot;HEADER&quot;, .before = 1) tbl6b &lt;- surv_tbl %&gt;% mutate(across(c(`0.95LCL`, `0.95UCL`), ~roundSAS(.x, digits = 2, as_char = TRUE)), ci = paste0(&quot;(&quot;, `0.95LCL`, &quot;, &quot;, `0.95UCL`, &quot;)&quot;)) %&gt;% select(TRT01A, ci) %&gt;% pivot_wider(names_from = &quot;TRT01A&quot;, values_from = &quot;ci&quot;) %&gt;% mutate(label = &quot;95% Confidence Interval&quot;, row_type = &quot;VALUE&quot;) tbl6c &lt;- adtte %&gt;% filter(!(AVAL == 0 &amp; CNSR == 1)) %&gt;% group_by(TRT01A) %&gt;% mutate(max_cnsr = !is.na(AVAL) &amp; AVAL == max(AVAL, na.rm = TRUE) &amp; CNSR == 1) %&gt;% summarise( min = min(AVAL, na.rm = TRUE), max = max(AVAL, na.rm = TRUE), is_censored = sum(max_cnsr) &gt; 0) %&gt;% mutate(across(c(min, max), ~roundSAS(.x, digits = 2, as_char = TRUE)), min_max = ifelse(is_censored, paste0(&quot;(&quot;, min, &quot;, &quot;, max, &quot;*)&quot;), paste0(&quot;(&quot;, min, &quot;, &quot;, max, &quot;)&quot;))) %&gt;% select(TRT01A, min_max) %&gt;% pivot_wider(names_from = &quot;TRT01A&quot;, values_from = &quot;min_max&quot;) %&gt;% mutate(label = &quot;Min - Max (2)&quot;, row_type = &quot;VALUE&quot;) tbl6 &lt;- bind_rows(tbl6a, tbl6b, tbl6c) %&gt;% mutate(group_level = 0) # combine analysis results together tbl &lt;- bind_table(tbl1, tbl2, tbl3, tbl4, tbl5, tbl6) # output the analysis results gentlg(huxme = tbl, format = &quot;HTML&quot;, print.hux = FALSE, file = &quot;Table x.x.x.x&quot;, orientation = &quot;portrait&quot;, title = &quot;Time to First Serious Adverse Event&quot;, footers = c(&quot;(1) Product-limit (Kaplan-Meier) estimates.&quot;, &quot;(2) * indicates censoring&quot;, &quot;Serious adverse events are defines as (...). All p-values are exploratory.&quot;, &quot;Hazard ratios are from a stratified Cox model of serious adverse event hazard rate, with terms for treatment groups and strata1. Ties were handled using the exact method. Hazard ratios of Placebo Combination over Drug X are presented, an HR &lt; 1 denotes improvement compared to Drug X.&quot;, &quot;Source: ADTTE DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY&quot;), colheader = c(&quot;&quot;,&quot;A: Drug X&quot;,&quot;B: Placebo&quot;,&quot;C: Combination&quot;)) Table 4.3: Table x.x.x.x: &emsp; Time to First Serious Adverse Event A: Drug X B: Placebo C: Combination Analysis Set: Safety Population134134132 Number of subjects with serious adverse events, n(%)89 (66.4%)123 (91.8%)88 (66.7%) Number of censored subjects, n(%)45 (33.6%)11 (8.2%)44 (33.3%) Clinical Cut Off10 (7.5%)4 (3.0%)14 (10.6%) Completion or Discontinuation13 (9.7%)3 (2.2%)16 (12.1%) End of AE Reporting Period22 (16.4%)4 (3.0%)14 (10.6%) Hazard ratio1.461.09 95% Confidence Interval(1.11, 1.92)(0.81, 1.47) p-value (one-sided stratified log rank)0.0210.462 Time to first serious adverse event (1) Median (years)0.390.370.26 95% Confidence Interval(0.23, 0.60)(0.25, 0.46)(0.18, 0.34) Min - Max (2)(0.00, 3.00*)(0.01, 3.00*)(0.00, 3.00*) (1) Product-limit (Kaplan-Meier) estimates. (2) * indicates censoring Serious adverse events are defines as (...). All p-values are exploratory. Hazard ratios are from a stratified Cox model of serious adverse event hazard rate, with terms for treatment groups and strata1. Ties were handled using the exact method. Hazard ratios of Placebo Combination over Drug X are presented, an HR Source: ADTTE DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY [table x.x.x.x.html][/home/runner/work/_temp/46285d38-8d6e-42ac-8e33-f3279fd14a78] 07SEP2023, 17:42 4.3.9 tfrmt This first code chunk cleans up the data from the models to prepare it for going into a table. Code library(tidyverse) library(broom) big_n &lt;- surv_tbl |&gt; dplyr::select(N = n.max, TRT01A) # Number of subjects with a serious AE sae_n &lt;- surv_tbl |&gt; # Calculated above dplyr::mutate(pct = events/n.max, group = &quot;Number of subjects with serious adverse event, n (%)&quot;, label = &quot;Number of subjects with serious adverse event, n (%)&quot;, ord1 = 1 ) |&gt; dplyr::select(TRT01A, n = events, pct, group, label, ord1) |&gt; tidyr::pivot_longer(c(&quot;n&quot;, &quot;pct&quot;)) # Count the number of censored subjects adtte_with_N &lt;- adtte |&gt; dplyr::left_join(big_n, by = &quot;TRT01A&quot;) cnsr_subjs &lt;- adtte_with_N |&gt; dplyr::filter(CNSR == &quot;1&quot;) tot_cnsr_subj &lt;- cnsr_subjs |&gt; dplyr::group_by(TRT01A) |&gt; dplyr::reframe( n = n_distinct(USUBJID), pct = n/N ) |&gt; dplyr::distinct() |&gt; tidyr::pivot_longer(c(&quot;n&quot;, &quot;pct&quot;)) |&gt; dplyr::mutate( group = &quot;Number of censored subjects, n (%)&quot;, label = &quot;Number of censored subjects, n (%)&quot;, ord1 = 2 ) sub_cnsr_subj &lt;- cnsr_subjs |&gt; dplyr::group_by(TRT01A, CNSDTDSC) |&gt; dplyr::reframe( n = n_distinct(USUBJID), pct = n/N ) |&gt; dplyr::distinct() |&gt; tidyr::pivot_longer(c(&quot;n&quot;, &quot;pct&quot;)) |&gt; dplyr::mutate( group = &quot;Number of censored subjects, n (%)&quot;, ord1 = 2 ) |&gt; dplyr::rename(label = CNSDTDSC) # Information from the CPH model hzr &lt;- broom::tidy(cph, conf.int = TRUE) |&gt; mutate(across(c(&quot;estimate&quot;, &quot;conf.low&quot;, &quot;conf.high&quot;), exp)) |&gt; dplyr::filter(stringr::str_detect(term, &quot;TRT01A&quot;)) |&gt; dplyr::select(term, estimate, conf.low, conf.high) |&gt; tidyr::pivot_longer(c(&quot;estimate&quot;, &quot;conf.low&quot;, &quot;conf.high&quot;)) |&gt; dplyr::mutate(group = &quot;Hazard ratio&quot;, label = case_when( name == &quot;estimate&quot; ~ &quot;Hazard ratio&quot;, TRUE ~ &quot;95% confidence interval&quot; ), TRT01A = case_when( stringr::str_detect(term, &quot;Placebo&quot;) ~ &quot;B: Placebo&quot;, stringr::str_detect(term, &quot;Combination&quot;) ~ &quot;C: Combination&quot; ), ord1 = 3) |&gt; dplyr::select(-term) # Get one-sided p-value from survival model p_vals &lt;- list(c(&quot;A: Drug X&quot;, &quot;B: Placebo&quot;), c(&quot;A: Drug X&quot;, &quot;C: Combination&quot;)) |&gt; map_dfr(function(comparison){ survdiff(Surv(AVAL, CNSR == 0) ~ TRT01A + STRATA1, data = adtte |&gt; dplyr::filter(TRT01A %in% comparison)) |&gt; broom::glance() |&gt; dplyr::mutate(TRT01A = comparison[2]) }) |&gt; dplyr::select(value = p.value, TRT01A) |&gt; dplyr::mutate( name = &quot;p.value&quot;, group = &quot;p-value (one-sided stratified log rank)&quot;, label = &quot;p-value (one-sided stratified log rank)&quot;, ord1 = 5 ) # Time to event from model time_to_event &lt;- surv_tbl |&gt; dplyr::select(TRT01A, median, LCL = `0.95LCL`, UCL=`0.95UCL`) |&gt; tidyr::pivot_longer(c(&quot;median&quot;, &quot;LCL&quot;, &quot;UCL&quot;)) |&gt; dplyr::mutate( group = &quot;Time to first serious adverse event&quot;, label = case_when( name == &quot;median&quot; ~ &quot;Median (years)&quot;, TRUE ~ &quot;95% confidence interval&quot; ), ord1 = 6 ) range &lt;- adtte |&gt; dplyr::group_by(TRT01A) |&gt; dplyr::summarise( min = min(AVAL), max = max(AVAL) ) |&gt; dplyr::mutate(group = &quot;Time to first serious adverse event&quot;, label = &quot;Min, Max&quot;, ord1 = 6)|&gt; tidyr::pivot_longer(c(&quot;min&quot;, &quot;max&quot;)) model_ard &lt;- bind_rows( sae_n, tot_cnsr_subj, sub_cnsr_subj, hzr, p_vals, time_to_event, range ) We now format this information into a table. Code library(tfrmt) tfrmt( column = TRT01A, group = &quot;group&quot;, label = &quot;label&quot;, param = &quot;name&quot;, value = &quot;value&quot;, sorting_cols = &quot;ord1&quot;, body_plan = body_plan( frmt_structure(group_val = &quot;.default&quot;, label_val = &quot;.default&quot;, frmt_combine(&quot;{n} ({pct})&quot;, n = frmt(&quot;xx&quot;), pct = frmt(&quot;xx%&quot;, transform = ~.*100)) ), frmt_structure(group_val = &quot;Hazard ratio&quot;, label_val = &quot;.default&quot;, frmt_combine(&quot;[{conf.low}, {conf.high}]&quot;, frmt(&quot;x.x&quot;))), frmt_structure(group_val = &quot;.default&quot;, label_val = &quot;Hazard ratio&quot;, frmt(&quot;x.x&quot;)), frmt_structure(group_val = &quot;.default&quot;, label_val = &quot;p-value (one-sided stratified log rank)&quot;, frmt(&quot;x.xxxx&quot;)), frmt_structure(group_val = &quot;.default&quot;, label_val = &quot;Median (years)&quot;, frmt(&quot;x.xx&quot;)), frmt_structure(group_val = &quot;Time to first serious adverse event&quot;, label_val = &quot;95% confidence interval&quot;, frmt_combine(&quot;[{LCL}, {UCL}]&quot;, frmt(&quot;x.xx&quot;))), frmt_structure(group_val = &quot;.default&quot;, label_val = &quot;Min, Max&quot;, frmt_combine(&quot;[{min}, {max}*]&quot;, frmt(&quot;x.xx&quot;))) ), col_plan = col_plan(-ord1), footnote_plan = footnote_plan( footnote_structure(&quot;Serious adverse events are defines as (...). All p-values are exploratory. Hazard ratios are from a stratified Cox model of serious adverse event hazard rate, with terms for treatment groups and strata1. Ties were handled using the exact method. Hazard ratios of Placebo/ Combination over Drug X are presented, a HR &lt; 1 denotes improvement compared to Drug X.&quot;), footnote_structure(group_val = &quot;Time to first serious adverse event&quot;, &quot;Product-limit (Kaplan-Meier) estimates&quot;), footnote_structure(group_val = &quot;Time to first serious adverse event&quot;, label_val = &quot;Min, Max&quot;, &quot;Minimum and maximum of event times. * Denotes censoring&quot;) ) ) |&gt; print_to_gt(model_ard) #plxltigevd table { font-family: Courier, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #plxltigevd thead, #plxltigevd tbody, #plxltigevd tfoot, #plxltigevd tr, #plxltigevd td, #plxltigevd th { border-style: none; } #plxltigevd p { margin: 0; padding: 0; } #plxltigevd .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 14px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #plxltigevd .gt_caption { padding-top: 4px; padding-bottom: 4px; } #plxltigevd .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #plxltigevd .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #plxltigevd .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #plxltigevd .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #plxltigevd .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #plxltigevd .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #plxltigevd .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #plxltigevd .gt_column_spanner_outer:first-child { padding-left: 0; } #plxltigevd .gt_column_spanner_outer:last-child { padding-right: 0; } #plxltigevd .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #plxltigevd .gt_spanner_row { border-bottom-style: hidden; } #plxltigevd .gt_group_heading { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: rgba(255, 255, 255, 0); border-bottom-style: solid; border-bottom-width: 0px; border-bottom-color: rgba(255, 255, 255, 0); border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #plxltigevd .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: rgba(255, 255, 255, 0); border-bottom-style: solid; border-bottom-width: 0px; border-bottom-color: rgba(255, 255, 255, 0); vertical-align: middle; } #plxltigevd .gt_from_md > :first-child { margin-top: 0; } #plxltigevd .gt_from_md > :last-child { margin-bottom: 0; } #plxltigevd .gt_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #plxltigevd .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 0px; border-right-color: rgba(255, 255, 255, 0); padding-left: 5px; padding-right: 5px; } #plxltigevd .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 0px; border-right-color: rgba(255, 255, 255, 0); padding-left: 5px; padding-right: 5px; vertical-align: top; } #plxltigevd .gt_row_group_first td { border-top-width: 2px; } #plxltigevd .gt_row_group_first th { border-top-width: 2px; } #plxltigevd .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #plxltigevd .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #plxltigevd .gt_first_summary_row.thick { border-top-width: 2px; } #plxltigevd .gt_last_summary_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #plxltigevd .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #plxltigevd .gt_first_grand_summary_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #plxltigevd .gt_last_grand_summary_row_top { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #plxltigevd .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #plxltigevd .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #plxltigevd .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #plxltigevd .gt_footnote { margin: 0px; font-size: 90%; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #plxltigevd .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #plxltigevd .gt_sourcenote { font-size: 90%; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #plxltigevd .gt_left { text-align: left; } #plxltigevd .gt_center { text-align: center; } #plxltigevd .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #plxltigevd .gt_font_normal { font-weight: normal; } #plxltigevd .gt_font_bold { font-weight: bold; } #plxltigevd .gt_font_italic { font-style: italic; } #plxltigevd .gt_super { font-size: 65%; } #plxltigevd .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #plxltigevd .gt_asterisk { font-size: 100%; vertical-align: 0; } #plxltigevd .gt_indent_1 { text-indent: 5px; } #plxltigevd .gt_indent_2 { text-indent: 10px; } #plxltigevd .gt_indent_3 { text-indent: 15px; } #plxltigevd .gt_indent_4 { text-indent: 20px; } #plxltigevd .gt_indent_5 { text-indent: 25px; } A: Drug X B: Placebo C: Combination Number of subjects with serious adverse event, n (%) 89 (66%) 123 (92%) 88 (67%) Number of censored subjects, n (%) 45 (34%) 11 ( 8%) 44 (33%) Clinical Cut Off 10 ( 7%) 4 ( 3%) 14 (11%) Completion or Discontinuation 13 (10%) 3 ( 2%) 16 (12%) End of AE Reporting Period 22 (16%) 4 ( 3%) 14 (11%) Hazard ratio 1.5 1.1 95% confidence interval [1.1, 1.9] [0.8, 1.5] p-value (one-sided stratified log rank) 0.0416 0.9239 Time to first serious adverse event1 Median (years) 0.39 0.37 0.26 95% confidence interval [0.23, 0.60] [0.25, 0.46] [0.18, 0.34] Min, Max2 [0.00, 3.00*] [0.01, 3.00*] [0.00, 3.00*] Serious adverse events are defines as (...). All p-values are exploratory. Hazard ratios are from a stratified Cox model of serious adverse event hazard rate, with terms for treatment groups and strata1. Ties were handled using the exact method. Hazard ratios of Placebo/ Combination over Drug X are presented, a HR &lt; 1 denotes improvement compared to Drug X. 1 Product-limit (Kaplan-Meier) estimates 2 Minimum and maximum of event times. * Denotes censoring 4.4 Concomitant Medications 4.4.1 rtables Code resetSession() library(rtables) data(&quot;cadcm&quot;, package = &quot;random.cdisc.data&quot;) data(&quot;cadsl&quot;, package = &quot;random.cdisc.data&quot;) one_count_pct_gen &lt;- function(label = NULL) { function(x, .N_col) { ret &lt;- rcell(length(unique(x)) * c(1, 1/.N_col), format = &quot;xx (xx.x%)&quot;) if(!is.null(label)) obj_label(ret) &lt;- label ret } } lyt &lt;- basic_table(title = &quot;Conmed Example&quot;, subtitles = &quot;Uses the adcm dataset from random.cdisc.data&quot;, show_colcounts = TRUE) |&gt; split_cols_by(&quot;ARM&quot;) |&gt; analyze(&quot;USUBJID&quot;, afun = one_count_pct_gen(&quot;At Least One Concomittant Med&quot;)) |&gt; split_rows_by(&quot;CMCLAS&quot;, split_fun = trim_levels_in_group(&quot;CMTRT&quot;)) |&gt; analyze(&quot;CMTRT&quot;, afun = function(df, .N_col) { cmtrtvec &lt;- df$CMTRT spl_usubj &lt;- split(df$USUBJID, cmtrtvec) fn &lt;- one_count_pct_gen() cells &lt;- lapply(spl_usubj, fn, .N_col = .N_col) names(cells) &lt;- names(spl_usubj) in_rows(.list = cells) }) build_table(lyt, cadcm, alt_counts_df = cadsl) Conmed Example Uses the adcm dataset from random.cdisc.data —————————————————————————————————————————————————————————————————————————— A: Drug X B: Placebo C: Combination (N=134) (N=134) (N=132) —————————————————————————————————————————————————————————————————————————— At Least One Concomittant Med 122 (91.0%) 123 (91.8%) 120 (90.9%) medcl A A_1/3 54 (40.3%) 49 (36.6%) 69 (52.3%) A_2/3 53 (39.6%) 50 (37.3%) 56 (42.4%) A_3/3 45 (33.6%) 54 (40.3%) 48 (36.4%) medcl B B_1/4 52 (38.8%) 57 (42.5%) 59 (44.7%) B_2/4 52 (38.8%) 55 (41.0%) 56 (42.4%) B_3/4 47 (35.1%) 47 (35.1%) 52 (39.4%) B_4/4 50 (37.3%) 45 (33.6%) 55 (41.7%) medcl C C_1/2 51 (38.1%) 50 (37.3%) 56 (42.4%) C_2/2 52 (38.8%) 58 (43.3%) 60 (45.5%) 4.4.2 tern (+ rtables) Code library(tern) lyt &lt;- basic_table(show_colcounts = TRUE) |&gt; split_cols_by(var = &quot;ARM&quot;) |&gt; analyze_num_patients(vars = &quot;USUBJID&quot;, .stats = &quot;unique&quot;, .labels = &quot;At Least One Concomittant Med&quot;) |&gt; split_rows_by(&quot;CMCLAS&quot;, split_fun = drop_split_levels) |&gt; count_occurrences(vars = &quot;CMDECOD&quot;) build_table(lyt = lyt, df = cadcm, alt_counts_df = cadsl) A: Drug X B: Placebo C: Combination (N=134) (N=134) (N=132) —————————————————————————————————————————————————————————————————————————— At Least One Concomittant Med 122 (91.0%) 123 (91.8%) 120 (90.9%) medcl A medname A_1/3 54 (40.3%) 49 (36.6%) 69 (52.3%) medname A_2/3 53 (39.6%) 50 (37.3%) 56 (42.4%) medname A_3/3 45 (33.6%) 54 (40.3%) 48 (36.4%) medcl B medname B_1/4 52 (38.8%) 57 (42.5%) 59 (44.7%) medname B_2/4 52 (38.8%) 55 (41.0%) 56 (42.4%) medname B_3/4 47 (35.1%) 47 (35.1%) 52 (39.4%) medname B_4/4 50 (37.3%) 45 (33.6%) 55 (41.7%) medcl C medname C_1/2 51 (38.1%) 50 (37.3%) 56 (42.4%) medname C_2/2 52 (38.8%) 58 (43.3%) 60 (45.5%) 4.4.3 flextable This is again a situation where the code required to create a flextable directly requires too much data preparation. In the following example, we convert the ‘rtables’ object to a flextable using the as_flextable() method and then we change its aspect. Code library(flextable) tt_to_flextable(build_table(lyt, cadcm, alt_counts_df = cadsl)) |&gt; theme_booktabs() |&gt; font(fontname = &quot;Open Sans&quot;) |&gt; bold(i = ~ V2 %in% &quot;&quot;, j = 1, bold = TRUE) |&gt; bold(i = 1, j = 1, bold = TRUE) |&gt; align(j = 2:4, align = &quot;center&quot;, part = &quot;all&quot;) |&gt; set_table_properties(layout = &quot;fixed&quot;) |&gt; autofit() |&gt; mk_par(i = 1, j = 1, part = &quot;header&quot;, as_paragraph(as_chunk(&quot;Conmed Example&quot;, props = fp_text_default(font.size = 14)))) |&gt; mk_par(i = 2, j = 1, part = &quot;header&quot;, as_paragraph(&quot;Uses the adcm dataset from &quot;, as_b(&quot;random.cdisc.data&quot;))) .cl-ee58f094{}.cl-ee508da0{font-family:'Open Sans';font-size:14pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ee508db4{font-family:'Open Sans';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ee508dbe{font-family:'Open Sans';font-size:10pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ee508dc8{font-family:'Open Sans';font-size:10pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ee508dd2{font-family:'Open Sans';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ee5420d2{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:3pt;padding-top:3pt;padding-left:3pt;padding-right:3pt;line-height: 1.4;background-color:transparent;}.cl-ee5420e6{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:3pt;padding-top:3pt;padding-left:3pt;padding-right:3pt;line-height: 1.4;background-color:transparent;}.cl-ee5420f0{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:3pt;padding-top:3pt;padding-left:0;padding-right:3pt;line-height: 1.4;background-color:transparent;}.cl-ee5420f1{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:3pt;padding-top:3pt;padding-left:10pt;padding-right:3pt;line-height: 1.4;background-color:transparent;}.cl-ee54398c{width:2.372in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(170, 170, 170, 1.00);border-top: 1.5pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee543996{width:0.957in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(170, 170, 170, 1.00);border-top: 1.5pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee543997{width:1.206in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(170, 170, 170, 1.00);border-top: 1.5pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee5439a0{width:2.372in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee5439aa{width:0.957in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee5439b4{width:1.206in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee5439b5{width:2.372in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee5439be{width:0.957in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee5439bf{width:1.206in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee5439c8{width:2.372in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee5439c9{width:0.957in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee5439d2{width:1.206in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee5439d3{width:2.372in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee5439dc{width:0.957in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee5439e6{width:1.206in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee5439e7{width:2.372in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee5439f0{width:0.957in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee5439f1{width:1.206in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}Conmed ExampleA: Drug XB: PlaceboC: CombinationUses the adcm dataset from random.cdisc.data(N=134)(N=134)(N=132)At Least One Concomittant Med122 (91.0%)123 (91.8%)120 (90.9%)medcl A medname A_1/354 (40.3%)49 (36.6%)69 (52.3%) medname A_2/353 (39.6%)50 (37.3%)56 (42.4%) medname A_3/345 (33.6%)54 (40.3%)48 (36.4%)medcl B medname B_1/452 (38.8%)57 (42.5%)59 (44.7%) medname B_2/452 (38.8%)55 (41.0%)56 (42.4%) medname B_3/447 (35.1%)47 (35.1%)52 (39.4%) medname B_4/450 (37.3%)45 (33.6%)55 (41.7%)medcl C medname C_1/251 (38.1%)50 (37.3%)56 (42.4%) medname C_2/252 (38.8%)58 (43.3%)60 (45.5%) 4.4.4 gt Code resetSession() library(dplyr) library(tidyr) library(gt) data(&quot;cadcm&quot;, package = &quot;random.cdisc.data&quot;) data(&quot;cadsl&quot;, package = &quot;random.cdisc.data&quot;) cmdecod_levels &lt;- c(&quot;Number of sujects with any concomitant medication&quot;, levels(cadcm$CMDECOD)) cmclas_levels &lt;- c(NA, levels(cadcm$CMCLAS)) adcm &lt;- cadcm |&gt; dplyr::select(CMDECOD, CMCLAS, TRT01A) |&gt; dplyr::mutate( CMDECOD = factor(CMDECOD, levels = cmdecod_levels), CMCLAS = factor(CMCLAS, levels = cmclas_levels) ) ct_cm &lt;- cadcm |&gt; dplyr::summarize( n = dplyr::n_distinct(USUBJID), .by = TRT01A ) |&gt; dplyr::left_join(count(cadsl, TRT01A, name = &quot;nall&quot;), by = &quot;TRT01A&quot;) |&gt; dplyr::mutate( pct = n / nall, nall = NULL, CMDECOD = factor(&quot;Number of sujects with any concomitant medication&quot;, levels = cmdecod_levels) ) ct_adcm &lt;- cadcm |&gt; dplyr::summarize( n = dplyr::n_distinct(USUBJID), .by = c(TRT01A, CMCLAS, CMDECOD) ) |&gt; dplyr::left_join(count(cadsl, TRT01A, name = &quot;nall&quot;), by = &quot;TRT01A&quot;) |&gt; dplyr::mutate(pct = n / nall, nall = NULL) gt_adcm &lt;- dplyr::bind_rows(ct_cm, ct_adcm) |&gt; tidyr::pivot_wider(id_cols = c(CMCLAS, CMDECOD), names_from = TRT01A, values_from = c(n, pct)) trt_n &lt;- cadsl |&gt; dplyr::filter(SAFFL == &quot;Y&quot;) |&gt; dplyr::summarize( n = sprintf(&quot;%s \\n(N=%i)&quot;, unique(TRT01A), dplyr::n()), .by = TRT01A ) header_n &lt;- as.list(trt_n$n) names(header_n) &lt;- paste(&quot;n&quot;, dplyr::pull(trt_n, TRT01A), sep = &quot;_&quot;) gt_adcm |&gt; gt(rowname_col = &quot;CMDECOD&quot;) |&gt; tab_header( title = &quot;Conmed Example&quot;, subtitle = md(&quot;Uses the *adcm* dataset from **random.cdisc.data**&quot;) ) |&gt; opt_align_table_header(align = &quot;left&quot;) |&gt; fmt_percent(columns = dplyr::starts_with(&quot;pct_&quot;), decimals = 1) |&gt; cols_merge_n_pct(col_n = &quot;n_A: Drug X&quot;, col_pct = &quot;pct_A: Drug X&quot;) |&gt; cols_merge_n_pct(col_n = &quot;n_B: Placebo&quot;, col_pct = &quot;pct_B: Placebo&quot;) |&gt; cols_merge_n_pct(col_n = &quot;n_C: Combination&quot;, col_pct = &quot;pct_C: Combination&quot;) |&gt; tab_row_group( label = &quot;medcl A&quot;, rows = CMCLAS == &quot;medcl A&quot; ) |&gt; tab_row_group( label = &quot;medcl B&quot;, rows = CMCLAS == &quot;medcl B&quot; ) |&gt; tab_row_group( label = &quot;medcl C&quot;, rows = CMCLAS == &quot;medcl C&quot; ) |&gt; row_group_order( groups = c(NA, paste(&quot;medcl&quot;, LETTERS[1:2])) ) |&gt; cols_hide(CMCLAS) |&gt; cols_label( .list = header_n, .fn = md ) |&gt; cols_width( 1 ~ px(500), everything() ~ px(150) ) |&gt; cols_align( align = &quot;center&quot;, columns = everything() ) |&gt; cols_align( align = &quot;left&quot;, columns = 1 ) #qzregagoii table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #qzregagoii thead, #qzregagoii tbody, #qzregagoii tfoot, #qzregagoii tr, #qzregagoii td, #qzregagoii th { border-style: none; } #qzregagoii p { margin: 0; padding: 0; } #qzregagoii .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #qzregagoii .gt_caption { padding-top: 4px; padding-bottom: 4px; } #qzregagoii .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #qzregagoii .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #qzregagoii .gt_heading { background-color: #FFFFFF; text-align: left; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #qzregagoii .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #qzregagoii .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #qzregagoii .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #qzregagoii .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #qzregagoii .gt_column_spanner_outer:first-child { padding-left: 0; } #qzregagoii .gt_column_spanner_outer:last-child { padding-right: 0; } #qzregagoii .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #qzregagoii .gt_spanner_row { border-bottom-style: hidden; } #qzregagoii .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #qzregagoii .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #qzregagoii .gt_from_md > :first-child { margin-top: 0; } #qzregagoii .gt_from_md > :last-child { margin-bottom: 0; } #qzregagoii .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #qzregagoii .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #qzregagoii .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #qzregagoii .gt_row_group_first td { border-top-width: 2px; } #qzregagoii .gt_row_group_first th { border-top-width: 2px; } #qzregagoii .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #qzregagoii .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #qzregagoii .gt_first_summary_row.thick { border-top-width: 2px; } #qzregagoii .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #qzregagoii .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #qzregagoii .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #qzregagoii .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #qzregagoii .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #qzregagoii .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #qzregagoii .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #qzregagoii .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #qzregagoii .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #qzregagoii .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #qzregagoii .gt_left { text-align: left; } #qzregagoii .gt_center { text-align: center; } #qzregagoii .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #qzregagoii .gt_font_normal { font-weight: normal; } #qzregagoii .gt_font_bold { font-weight: bold; } #qzregagoii .gt_font_italic { font-style: italic; } #qzregagoii .gt_super { font-size: 65%; } #qzregagoii .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #qzregagoii .gt_asterisk { font-size: 100%; vertical-align: 0; } #qzregagoii .gt_indent_1 { text-indent: 5px; } #qzregagoii .gt_indent_2 { text-indent: 10px; } #qzregagoii .gt_indent_3 { text-indent: 15px; } #qzregagoii .gt_indent_4 { text-indent: 20px; } #qzregagoii .gt_indent_5 { text-indent: 25px; } Conmed Example Uses the adcm dataset from random.cdisc.data A: Drug X (N=134) C: Combination (N=132) B: Placebo (N=134) Number of sujects with any concomitant medication 122 (91.0%) 120 (90.9%) 123 (91.8%) medcl A medname A_2/3 53 (39.6%) 56 (42.4%) 50 (37.3%) medname A_3/3 45 (33.6%) 48 (36.4%) 54 (40.3%) medname A_1/3 54 (40.3%) 69 (52.3%) 49 (36.6%) medcl B medname B_1/4 52 (38.8%) 59 (44.7%) 57 (42.5%) medname B_4/4 50 (37.3%) 55 (41.7%) 45 (33.6%) medname B_2/4 52 (38.8%) 56 (42.4%) 55 (41.0%) medname B_3/4 47 (35.1%) 52 (39.4%) 47 (35.1%) medcl C medname C_1/2 51 (38.1%) 56 (42.4%) 50 (37.3%) medname C_2/2 52 (38.8%) 60 (45.5%) 58 (43.3%) 4.4.5 tables Code resetSession() data(&quot;cadcm&quot;, package = &quot;random.cdisc.data&quot;) library(tables) table_options(doCSS = TRUE) subject_counts &lt;- table(adsl$ARM) countpercentid &lt;- function(num, ARM) { n &lt;- length(unique(num)) if (n == 0) pct &lt;- 0 else pct &lt;- 100*n/subject_counts[ARM[1]] sprintf(&quot;%d (%.2f%%)&quot;, length(unique(num)), pct) } count &lt;- function(x) sprintf(&quot;(N=%d)&quot;, length(x)) heading &lt;- tabular(Heading(&quot;&quot;)*1*Heading(&quot;&quot;)*count ~ Heading()*ARM, data = adsl) body &lt;- tabular( (Heading(&quot;Any concomitant medication&quot;)*1*Heading(&quot;&quot;)*1 + Heading()*CMCLAS* Heading()*CMDECOD*DropEmpty(which = &quot;row&quot;))* Heading()*countpercentid*Arguments(ARM = TRT01A)* Heading()*USUBJID ~ Heading()*TRT01A, data = cadcm) useGroupLabels(rbind(heading, body), indent = &quot;&amp;emsp;&quot;) #table39ba75f18e .Rtable thead, .Rtable .even { background-color: inherit; } #table39ba75f18e .left { text-align:left; } #table39ba75f18e .center { text-align:center; } #table39ba75f18e .right { text-align:right; } #table39ba75f18e .Rtable, #table39ba75f18e .Rtable thead { border-collapse: collapse; border-style: solid; border-width: medium 0; border-color: inherit; } #table39ba75f18e .Rtable th, #table39ba75f18e .Rtable td { padding-left: 0.5em; padding-right: 0.5em; border-width: 0; } A: Drug X B: Placebo C: Combination   (N=134) (N=134) (N=132) Any concomitant medication 122 (91.04%) 123 (91.79%) 120 (90.91%) medcl A        medname A_1/3 54 (40.30%) 49 (36.57%) 69 (52.27%)  medname A_2/3 53 (39.55%) 50 (37.31%) 56 (42.42%)  medname A_3/3 45 (33.58%) 54 (40.30%) 48 (36.36%) medcl B        medname B_1/4 52 (38.81%) 57 (42.54%) 59 (44.70%)  medname B_2/4 52 (38.81%) 55 (41.04%) 56 (42.42%)  medname B_3/4 47 (35.07%) 47 (35.07%) 52 (39.39%)  medname B_4/4 50 (37.31%) 45 (33.58%) 55 (41.67%) medcl C        medname C_1/2 51 (38.06%) 50 (37.31%) 56 (42.42%)  medname C_2/2 52 (38.81%) 58 (43.28%) 60 (45.45%) 4.4.6 tidytlg Code resetSession() library(dplyr) library(tidytlg) data(&quot;cadcm&quot;, package = &quot;random.cdisc.data&quot;) data(&quot;cadsl&quot;, package = &quot;random.cdisc.data&quot;) adsl &lt;- cadsl adcm &lt;- cadcm %&gt;% filter(SAFFL == &quot;Y&quot;) %&gt;% mutate(CMFL = &quot;Y&quot;) # Create analysis population counts tbl1 &lt;- freq(adsl, rowvar = &quot;SAFFL&quot;, colvar = &quot;ARM&quot;, statlist = statlist(&quot;n&quot;), rowtext = &quot;Analysis Set: Safety Population&quot;, subset = SAFFL == &quot;Y&quot;) # Create counts (percentages) for patients with any ConMed tbl2 &lt;- freq(adcm, denom_df = adsl, rowvar = &quot;CMFL&quot;, colvar = &quot;ARM&quot;, statlist = statlist(&quot;n (x.x%)&quot;), rowtext = &quot;Number of subjects with any concomitant medication&quot;, subset = CMFL == &quot;Y&quot;) # Create counts (percentages) by CMCLAS and CMDECOD tbl3 &lt;- nested_freq(adcm, denom_df = adsl, rowvar = &quot;CMCLAS*CMDECOD&quot;, colvar = &quot;ARM&quot;, statlist = statlist(&quot;n (x.x%)&quot;)) # combine analysis results together tbl &lt;- bind_table(tbl1, tbl2, tbl3) %&gt;% select(-CMCLAS) # output the analysis results gentlg(huxme = tbl, format = &quot;HTML&quot;, print.hux = FALSE, file = &quot;Table x.x.x.x&quot;, orientation = &quot;portrait&quot;, title = &quot;Conmed Example Uses the ‘adcm’ dataset from ‘random.cdisc.data’&quot;, colheader = c(&quot;&quot;,&quot;A: Drug X&quot;,&quot;B: Placebo&quot;,&quot;C: Combination&quot;)) Table 4.4: Table x.x.x.x: &emsp; Conmed Example Uses the ‘adcm’ dataset from ‘random.cdisc.data’ A: Drug X B: Placebo C: Combination Analysis Set: Safety Population134134132 Number of subjects with any concomitant medication122 (91.0%)123 (91.8%)120 (90.9%) medcl A97 (72.4%)98 (73.1%)102 (77.3%) medname A_1/354 (40.3%)49 (36.6%)69 (52.3%) medname A_2/353 (39.6%)50 (37.3%)56 (42.4%) medname A_3/345 (33.6%)54 (40.3%)48 (36.4%) medcl B102 (76.1%)101 (75.4%)108 (81.8%) medname B_1/452 (38.8%)57 (42.5%)59 (44.7%) medname B_2/452 (38.8%)55 (41.0%)56 (42.4%) medname B_3/447 (35.1%)47 (35.1%)52 (39.4%) medname B_4/450 (37.3%)45 (33.6%)55 (41.7%) medcl C82 (61.2%)84 (62.7%)89 (67.4%) medname C_1/251 (38.1%)50 (37.3%)56 (42.4%) medname C_2/252 (38.8%)58 (43.3%)60 (45.5%) [table x.x.x.x.html][/home/runner/work/_temp/46285d38-8d6e-42ac-8e33-f3279fd14a78] 07SEP2023, 17:42 4.4.7 tfrmt Rather than starting with an ADaM, tfrmt assumes users will start with an ARD (Analysis Results Dataset), because of this, making this table will be split into two parts, first to make the ARD and second to format the table. Code resetSession() library(tidyverse) library(tfrmt) ## Create ARD data(&quot;cadcm&quot;, package = &quot;random.cdisc.data&quot;) data(&quot;cadsl&quot;, package = &quot;random.cdisc.data&quot;) big_n &lt;- cadsl |&gt; dplyr::group_by(ARM) |&gt; dplyr::summarize( N = dplyr::n_distinct(USUBJID) ) adcm_with_N &lt;- cadcm |&gt; left_join(big_n, by= &quot;ARM&quot;) overall &lt;- adcm_with_N |&gt; dplyr::group_by(ARM) |&gt; dplyr::reframe( n_subj = n_distinct(USUBJID), pct_subj = n_subj/N ) |&gt; dplyr::distinct() |&gt; dplyr::mutate(CMCLAS = &quot;At Least One Concomittant Med&quot;, CMDECOD = CMCLAS) med_lvl &lt;- adcm_with_N |&gt; dplyr::group_by(ARM,CMDECOD, CMCLAS) |&gt; dplyr::reframe( n_subj = dplyr::n_distinct(USUBJID), pct_subj = n_subj/N ) |&gt; distinct() label_N &lt;- big_n |&gt; dplyr::rename(value = N) |&gt; dplyr::mutate(name = &quot;header_n&quot;) cm_ard &lt;- bind_rows(overall, med_lvl) |&gt; pivot_longer(ends_with(&quot;subj&quot;)) |&gt; bind_rows(label_N) ## Format Table tfrmt( column = ARM, group = c(&quot;CMCLAS&quot;), param = name, value = value, label = CMDECOD, ) |&gt; # Then we cam combine it with an n percent template tfrmt_n_pct(n = &quot;n_subj&quot;, pct = &quot;pct_subj&quot;, pct_frmt_when = frmt_when(&quot;==1&quot; ~ &quot;&quot;, &quot;&gt;.99&quot; ~ &quot;(&gt;99%)&quot;, &quot;==0&quot; ~ &quot;&quot;, &quot;&lt;.01&quot; ~ &quot;(&lt;1%)&quot;, &quot;TRUE&quot; ~ frmt(&quot;(xx.x%)&quot;, transform = ~.*100)) ) |&gt; #Finally we are going to add some additional formatting tfrmt( big_n = big_n_structure(&quot;header_n&quot;), # Aligning on decimal places and spaces col_style_plan = col_style_plan( col_style_structure(col = matches(&quot;[A-Z]:.*&quot;), align = c(&quot;.&quot;, &quot; &quot;)) ) ) |&gt; print_to_gt(cm_ard) #qxtppnmqub table { font-family: Courier, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #qxtppnmqub thead, #qxtppnmqub tbody, #qxtppnmqub tfoot, #qxtppnmqub tr, #qxtppnmqub td, #qxtppnmqub th { border-style: none; } #qxtppnmqub p { margin: 0; padding: 0; } #qxtppnmqub .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 14px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #qxtppnmqub .gt_caption { padding-top: 4px; padding-bottom: 4px; } #qxtppnmqub .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #qxtppnmqub .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #qxtppnmqub .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #qxtppnmqub .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #qxtppnmqub .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #qxtppnmqub .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #qxtppnmqub .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #qxtppnmqub .gt_column_spanner_outer:first-child { padding-left: 0; } #qxtppnmqub .gt_column_spanner_outer:last-child { padding-right: 0; } #qxtppnmqub .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #qxtppnmqub .gt_spanner_row { border-bottom-style: hidden; } #qxtppnmqub .gt_group_heading { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: rgba(255, 255, 255, 0); border-bottom-style: solid; border-bottom-width: 0px; border-bottom-color: rgba(255, 255, 255, 0); border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #qxtppnmqub .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: rgba(255, 255, 255, 0); border-bottom-style: solid; border-bottom-width: 0px; border-bottom-color: rgba(255, 255, 255, 0); vertical-align: middle; } #qxtppnmqub .gt_from_md > :first-child { margin-top: 0; } #qxtppnmqub .gt_from_md > :last-child { margin-bottom: 0; } #qxtppnmqub .gt_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #qxtppnmqub .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 0px; border-right-color: rgba(255, 255, 255, 0); padding-left: 5px; padding-right: 5px; } #qxtppnmqub .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 0px; border-right-color: rgba(255, 255, 255, 0); padding-left: 5px; padding-right: 5px; vertical-align: top; } #qxtppnmqub .gt_row_group_first td { border-top-width: 2px; } #qxtppnmqub .gt_row_group_first th { border-top-width: 2px; } #qxtppnmqub .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #qxtppnmqub .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #qxtppnmqub .gt_first_summary_row.thick { border-top-width: 2px; } #qxtppnmqub .gt_last_summary_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #qxtppnmqub .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #qxtppnmqub .gt_first_grand_summary_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #qxtppnmqub .gt_last_grand_summary_row_top { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #qxtppnmqub .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #qxtppnmqub .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #qxtppnmqub .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #qxtppnmqub .gt_footnote { margin: 0px; font-size: 90%; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #qxtppnmqub .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #qxtppnmqub .gt_sourcenote { font-size: 90%; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #qxtppnmqub .gt_left { text-align: left; } #qxtppnmqub .gt_center { text-align: center; } #qxtppnmqub .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #qxtppnmqub .gt_font_normal { font-weight: normal; } #qxtppnmqub .gt_font_bold { font-weight: bold; } #qxtppnmqub .gt_font_italic { font-style: italic; } #qxtppnmqub .gt_super { font-size: 65%; } #qxtppnmqub .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #qxtppnmqub .gt_asterisk { font-size: 100%; vertical-align: 0; } #qxtppnmqub .gt_indent_1 { text-indent: 5px; } #qxtppnmqub .gt_indent_2 { text-indent: 10px; } #qxtppnmqub .gt_indent_3 { text-indent: 15px; } #qxtppnmqub .gt_indent_4 { text-indent: 20px; } #qxtppnmqub .gt_indent_5 { text-indent: 25px; } A: Drug X N = 134 B: Placebo N = 134 C: Combination N = 132 At Least One Concomittant Med 122 (91.0%) 123 (91.8%) 120 (90.9%) medcl A medname A_1/3 54 (40.3%) 49 (36.6%) 69 (52.3%) medname A_2/3 53 (39.6%) 50 (37.3%) 56 (42.4%) medname A_3/3 45 (33.6%) 54 (40.3%) 48 (36.4%) medcl B medname B_1/4 52 (38.8%) 57 (42.5%) 59 (44.7%) medname B_2/4 52 (38.8%) 55 (41.0%) 56 (42.4%) medname B_3/4 47 (35.1%) 47 (35.1%) 52 (39.4%) medname B_4/4 50 (37.3%) 45 (33.6%) 55 (41.7%) medcl C medname C_1/2 51 (38.1%) 50 (37.3%) 56 (42.4%) medname C_2/2 52 (38.8%) 58 (43.3%) 60 (45.5%) 4.5 Disposition 4.5.1 rtables Code resetSession() library(dplyr) library(rtables) data(&quot;cadsl&quot;, package = &quot;random.cdisc.data&quot;) adsl &lt;- cadsl |&gt; select(USUBJID, TRT01A, EOSSTT, DCSREAS, DTHCAUS) top_afun &lt;- function(x, .N_col) { in_rows(Completed = rcell(sum(x==&quot;COMPLETED&quot;) * c(1, 1/.N_col), format = c(&quot;xx (xx.x%)&quot;)), Ongoing = rcell(sum(x==&quot;ONGOING&quot;) * c(1, 1/.N_col), format = c(&quot;xx (xx.x%)&quot;))) } count_pct_afun &lt;- function(x, .N_col) { tbl &lt;- table(x) lst &lt;- lapply(tbl, function(xi) rcell(xi * c(1, 1/.N_col), format = c(&quot;xx (xx.x%)&quot;))) in_rows(.list = lst, .names = names(tbl)) } lyt &lt;- basic_table(show_colcounts = TRUE) |&gt; split_cols_by(&quot;TRT01A&quot;) |&gt; analyze(&quot;EOSSTT&quot;, top_afun) |&gt; split_rows_by(&quot;EOSSTT&quot;, split_fun = keep_split_levels(&quot;DISCONTINUED&quot;)) |&gt; analyze(&quot;DCSREAS&quot;, count_pct_afun) |&gt; split_rows_by(&quot;DCSREAS&quot;, split_fun = keep_split_levels(&quot;DEATH&quot;)) |&gt; analyze(&quot;DTHCAUS&quot;, count_pct_afun) build_table(lyt, adsl) A: Drug X B: Placebo C: Combination (N=134) (N=134) (N=132) —————————————————————————————————————————————————————————————————————————— Completed 68 (50.7%) 66 (49.3%) 73 (55.3%) Ongoing 24 (17.9%) 28 (20.9%) 21 (15.9%) DISCONTINUED ADVERSE EVENT 3 (2.2%) 6 (4.5%) 5 (3.8%) DEATH 25 (18.7%) 23 (17.2%) 22 (16.7%) LACK OF EFFICACY 2 (1.5%) 2 (1.5%) 3 (2.3%) PHYSICIAN DECISION 2 (1.5%) 3 (2.2%) 2 (1.5%) PROTOCOL VIOLATION 5 (3.7%) 3 (2.2%) 4 (3.0%) WITHDRAWAL BY PARENT/GUARDIAN 4 (3.0%) 2 (1.5%) 1 (0.8%) WITHDRAWAL BY SUBJECT 1 (0.7%) 1 (0.7%) 1 (0.8%) DEATH ADVERSE EVENT 9 (6.7%) 7 (5.2%) 10 (7.6%) DISEASE PROGRESSION 8 (6.0%) 6 (4.5%) 6 (4.5%) LOST TO FOLLOW UP 2 (1.5%) 2 (1.5%) 2 (1.5%) MISSING 2 (1.5%) 3 (2.2%) 2 (1.5%) Post-study reporting of death 1 (0.7%) 2 (1.5%) 1 (0.8%) SUICIDE 2 (1.5%) 2 (1.5%) 1 (0.8%) UNKNOWN 1 (0.7%) 1 (0.7%) 0 (0.0%) 4.5.2 tern (+ rtables) tern makes slightly different formatting choices (2 decimals for the percents of completed and ongoing study counts, and not displaying the percent when a cell count is 0), but we can see the table structure and cell values are the same. Code library(tern) lyt &lt;- basic_table(show_colcounts = TRUE) |&gt; split_cols_by(&quot;TRT01A&quot;) |&gt; count_values(&quot;EOSSTT&quot;, values = &quot;COMPLETED&quot;, table_names = &quot;Completed&quot;, .labels = c(count_fraction = &quot;Completed Study&quot;)) |&gt; count_values(&quot;EOSSTT&quot;, values = &quot;ONGOING&quot;, table_names = &quot;Ongoing&quot;, .labels = c(count_fraction = &quot;Ongoing Study&quot;)) |&gt; split_rows_by(&quot;EOSSTT&quot;, split_fun = keep_split_levels(&quot;DISCONTINUED&quot;)) |&gt; summarize_vars(&quot;DCSREAS&quot;, .stats = &quot;count_fraction&quot;, denom = &quot;N_col&quot;) |&gt; split_rows_by(&quot;DCSREAS&quot;, split_fun = keep_split_levels(&quot;DEATH&quot;)) |&gt; summarize_vars(&quot;DTHCAUS&quot;, .stats = &quot;count_fraction&quot;, denom = &quot;N_col&quot;) build_table(lyt = lyt, df = adsl) A: Drug X B: Placebo C: Combination (N=134) (N=134) (N=132) ———————————————————————————————————————————————————————————————————————————— Completed Study 68 (50.75%) 66 (49.25%) 73 (55.30%) Ongoing Study 24 (17.91%) 28 (20.90%) 21 (15.91%) DISCONTINUED ADVERSE EVENT 3 (2.2%) 6 (4.5%) 5 (3.8%) DEATH 25 (18.7%) 23 (17.2%) 22 (16.7%) LACK OF EFFICACY 2 (1.5%) 2 (1.5%) 3 (2.3%) PHYSICIAN DECISION 2 (1.5%) 3 (2.2%) 2 (1.5%) PROTOCOL VIOLATION 5 (3.7%) 3 (2.2%) 4 (3%) WITHDRAWAL BY PARENT/GUARDIAN 4 (3%) 2 (1.5%) 1 (0.8%) WITHDRAWAL BY SUBJECT 1 (0.7%) 1 (0.7%) 1 (0.8%) DEATH ADVERSE EVENT 9 (6.7%) 7 (5.2%) 10 (7.6%) DISEASE PROGRESSION 8 (6%) 6 (4.5%) 6 (4.5%) LOST TO FOLLOW UP 2 (1.5%) 2 (1.5%) 2 (1.5%) MISSING 2 (1.5%) 3 (2.2%) 2 (1.5%) Post-study reporting of death 1 (0.7%) 2 (1.5%) 1 (0.8%) SUICIDE 2 (1.5%) 2 (1.5%) 1 (0.8%) UNKNOWN 1 (0.7%) 1 (0.7%) 0 4.5.3 gt Code resetSession() library(tidyverse) library(gt) adsl_tot &lt;- cadsl |&gt; dplyr::summarize( NTOT = dplyr::n(), NTOTLBL = sprintf(&quot;%s \\n(N=%i)&quot;, unique(TRT01A), dplyr::n()), .by = TRT01A ) header_n &lt;- as.list(adsl_tot$NTOTLBL) names(header_n) &lt;- paste0(&quot;n_&quot;, adsl_tot$TRT01A) disp_df &lt;- merge(cadsl, adsl_tot, by = &quot;TRT01A&quot;) |&gt; dplyr::mutate( EOSSTT = factor(EOSSTT, levels = c(&quot;COMPLETED&quot;, &quot;ONGOING&quot;, &quot;DISCONTINUED&quot;)) ) disc_status &lt;- disp_df |&gt; dplyr::filter(EOSSTT != &quot;DISCONTINUED&quot;) |&gt; dplyr::summarize( n = dplyr::n(), pct = dplyr::n()/mean(NTOT), .by = c(TRT01A, EOSSTT) ) |&gt; tidyr::pivot_wider(id_cols = EOSSTT, names_from = TRT01A, values_from = c(n, pct)) |&gt; dplyr::arrange(EOSSTT) disc_reason &lt;- disp_df |&gt; dplyr::filter(EOSSTT == &quot;DISCONTINUED&quot;) |&gt; dplyr::summarize( n = dplyr::n(), pct = dplyr::n()/mean(NTOT), .by = c(TRT01A, EOSSTT, DCSREAS) ) |&gt; tidyr::pivot_wider(id_cols = c(EOSSTT, DCSREAS), names_from = TRT01A, values_from = c(n, pct)) |&gt; dplyr::arrange(EOSSTT, DCSREAS) disc_death &lt;- disp_df |&gt; dplyr::filter(DCSREAS == &quot;DEATH&quot;) |&gt; dplyr::mutate( EOSSTT = &quot;DEATH&quot;, DCSREAS = DTHCAUS ) |&gt; dplyr::summarize( n = dplyr::n(), pct = dplyr::n()/mean(NTOT), .by = c(TRT01A, EOSSTT, DCSREAS) ) |&gt; tidyr::pivot_wider(id_cols = c(EOSSTT, DCSREAS), names_from = TRT01A, values_from = c(n, pct)) |&gt; dplyr::arrange(EOSSTT, DCSREAS) gt_disp &lt;- dplyr::bind_rows(disc_status, disc_reason, disc_death) gt_disp |&gt; gt(rowname_col = &quot;DCSREAS&quot;) |&gt; tab_row_group( label = &quot;Discontinued&quot;, rows = EOSSTT == &quot;DISCONTINUED&quot; ) |&gt; tab_row_group( label = &quot;Death&quot;, rows = EOSSTT == &quot;DEATH&quot; ) |&gt; row_group_order( groups = c(NA, &quot;Discontinued&quot;, &quot;Death&quot;) ) |&gt; fmt_integer( columns = starts_with(&quot;n_&quot;) ) |&gt; fmt_percent( columns = starts_with(&quot;pct_&quot;), decimals = 2 ) |&gt; cols_merge_n_pct(col_n = &quot;n_A: Drug X&quot;, col_pct = &quot;pct_A: Drug X&quot;) |&gt; cols_merge_n_pct(col_n = &quot;n_B: Placebo&quot;, col_pct = &quot;pct_B: Placebo&quot;) |&gt; cols_merge_n_pct(col_n = &quot;n_C: Combination&quot;, col_pct = &quot;pct_C: Combination&quot;) |&gt; cols_merge( columns = c(&quot;DCSREAS&quot;, &quot;EOSSTT&quot;), rows = EOSSTT %in% c(&quot;COMPLETED&quot;, &quot;ONGOING&quot;), pattern = &quot;&lt;&lt;{1}&gt;&gt;&lt;&lt;{2}&gt;&gt;&quot; ) |&gt; sub_missing( columns = starts_with(&quot;n_&quot;), missing_text = &quot;0&quot; ) |&gt; text_transform( locations = list(cells_body(), cells_stub()), fn = stringr::str_to_title ) |&gt; cols_align( align = &quot;left&quot;, columns = &quot;DCSREAS&quot; ) |&gt; cols_align( align = &quot;center&quot;, columns = starts_with(&quot;n_&quot;) ) |&gt; cols_label( .list = header_n, .fn = md ) |&gt; tab_stub_indent( rows = 3:16, indent = 5 ) |&gt; cols_width( 1 ~ px(200) ) #slvipzxodc table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #slvipzxodc thead, #slvipzxodc tbody, #slvipzxodc tfoot, #slvipzxodc tr, #slvipzxodc td, #slvipzxodc th { border-style: none; } #slvipzxodc p { margin: 0; padding: 0; } #slvipzxodc .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #slvipzxodc .gt_caption { padding-top: 4px; padding-bottom: 4px; } #slvipzxodc .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #slvipzxodc .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #slvipzxodc .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #slvipzxodc .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #slvipzxodc .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #slvipzxodc .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #slvipzxodc .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #slvipzxodc .gt_column_spanner_outer:first-child { padding-left: 0; } #slvipzxodc .gt_column_spanner_outer:last-child { padding-right: 0; } #slvipzxodc .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #slvipzxodc .gt_spanner_row { border-bottom-style: hidden; } #slvipzxodc .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #slvipzxodc .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #slvipzxodc .gt_from_md > :first-child { margin-top: 0; } #slvipzxodc .gt_from_md > :last-child { margin-bottom: 0; } #slvipzxodc .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #slvipzxodc .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #slvipzxodc .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #slvipzxodc .gt_row_group_first td { border-top-width: 2px; } #slvipzxodc .gt_row_group_first th { border-top-width: 2px; } #slvipzxodc .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #slvipzxodc .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #slvipzxodc .gt_first_summary_row.thick { border-top-width: 2px; } #slvipzxodc .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #slvipzxodc .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #slvipzxodc .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #slvipzxodc .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #slvipzxodc .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #slvipzxodc .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #slvipzxodc .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #slvipzxodc .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #slvipzxodc .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #slvipzxodc .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #slvipzxodc .gt_left { text-align: left; } #slvipzxodc .gt_center { text-align: center; } #slvipzxodc .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #slvipzxodc .gt_font_normal { font-weight: normal; } #slvipzxodc .gt_font_bold { font-weight: bold; } #slvipzxodc .gt_font_italic { font-style: italic; } #slvipzxodc .gt_super { font-size: 65%; } #slvipzxodc .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #slvipzxodc .gt_asterisk { font-size: 100%; vertical-align: 0; } #slvipzxodc .gt_indent_1 { text-indent: 5px; } #slvipzxodc .gt_indent_2 { text-indent: 10px; } #slvipzxodc .gt_indent_3 { text-indent: 15px; } #slvipzxodc .gt_indent_4 { text-indent: 20px; } #slvipzxodc .gt_indent_5 { text-indent: 25px; } A: Drug X (N=134) B: Placebo (N=134) C: Combination (N=132) Completed 68 (50.75%) 66 (49.25%) 73 (55.30%) Ongoing 24 (17.91%) 28 (20.90%) 21 (15.91%) Discontinued Adverse Event 3 (2.24%) 6 (4.48%) 5 (3.79%) Death 25 (18.66%) 23 (17.16%) 22 (16.67%) Lack Of Efficacy 2 (1.49%) 2 (1.49%) 3 (2.27%) Physician Decision 2 (1.49%) 3 (2.24%) 2 (1.52%) Protocol Violation 5 (3.73%) 3 (2.24%) 4 (3.03%) Withdrawal By Parent/Guardian 4 (2.99%) 2 (1.49%) 1 (0.76%) Withdrawal By Subject 1 (0.75%) 1 (0.75%) 1 (0.76%) Death Adverse Event 9 (6.72%) 7 (5.22%) 10 (7.58%) Disease Progression 8 (5.97%) 6 (4.48%) 6 (4.55%) Lost To Follow Up 2 (1.49%) 2 (1.49%) 2 (1.52%) Missing 2 (1.49%) 3 (2.24%) 2 (1.52%) Post-Study Reporting Of Death 1 (0.75%) 2 (1.49%) 1 (0.76%) Suicide 2 (1.49%) 2 (1.49%) 1 (0.76%) Unknown 1 (0.75%) 1 (0.75%) 0 4.5.4 flextable Code resetSession() library(survival) library(tidyverse) library(flextable) library(glue) adsl &lt;- cadsl |&gt; select(USUBJID, TRT01A, EOSSTT, DCSREAS) # data parts calculations part_header &lt;- adsl |&gt; count(TRT01A, name = &quot;n_part&quot;) part_completed &lt;- adsl |&gt; filter(EOSSTT %in% &quot;COMPLETED&quot;) |&gt; mutate(DCSREAS = &quot;&quot;) |&gt; count(TRT01A, EOSSTT, DCSREAS) part_ongoing &lt;- adsl |&gt; filter(EOSSTT %in% &quot;ONGOING&quot;) |&gt; mutate(DCSREAS = &quot;&quot;) |&gt; count(TRT01A, EOSSTT, DCSREAS) part_discontinued &lt;- adsl |&gt; filter(EOSSTT %in% &quot;DISCONTINUED&quot;) |&gt; count(TRT01A, EOSSTT, DCSREAS) part_death &lt;- cadsl |&gt; filter(EOSSTT %in% &quot;DISCONTINUED&quot;, DCSREAS %in% &quot;DEATH&quot;) |&gt; count(TRT01A, EOSSTT, DTHCAUS) |&gt; mutate(DTHCAUS = paste0(&quot;\\t&quot;, DTHCAUS)) |&gt; rename(DCSREAS = DTHCAUS) DCSREAS_LEV &lt;- c( &quot;&quot;, &quot;ADVERSE EVENT&quot;, &quot;DEATH&quot;, part_death$DCSREAS, levels(part_discontinued$DCSREAS)) |&gt; unique() EOSSTT_LEV &lt;- c(&quot;COMPLETED&quot;, &quot;ONGOING&quot;, &quot;DISCONTINUED&quot;) dat &lt;- bind_rows( part_completed, part_ongoing, part_discontinued, part_death) |&gt; inner_join(part_header, by = &quot;TRT01A&quot;) |&gt; mutate(percent = n / n_part, n_part = NULL, DCSREAS = factor(DCSREAS, levels = DCSREAS_LEV), EOSSTT = factor(EOSSTT, levels = EOSSTT_LEV) ) # Now the flextable creation with help of `tabulator()`. tab &lt;- tabulator( dat, rows = c(&quot;EOSSTT&quot;, &quot;DCSREAS&quot;), columns = &quot;TRT01A&quot;, `content_cell` = as_paragraph(fmt_n_percent(n, percent)) ) ft &lt;- as_flextable(tab, spread_first_col = TRUE, columns_alignment = &quot;center&quot; ) TRT_COUNTS &lt;- setNames(part_header$n_part, part_header$TRT01A) for (TRT_COD in names(TRT_COUNTS)) { ft &lt;- append_chunks(x = ft, part = &quot;header&quot;, i = 1, j = tabulator_colnames(tab, columns = &quot;content_cell&quot;, TRT01A %in% !!TRT_COD), as_chunk(TRT_COUNTS[TRT_COD], formatter = function(n) sprintf(&quot;\\n(N=%.0f)&quot;, n))) } ft &lt;- labelizor(ft, j = &quot;DCSREAS&quot;, part = &quot;all&quot;, labels = function(x) tools::toTitleCase(tolower(x))) |&gt; labelizor(labels = c(Dcsreas = &quot;&quot;), j = &quot;DCSREAS&quot;, part = &quot;header&quot;) |&gt; align(i = ~!is.na(EOSSTT) | seq_along(EOSSTT) == 1, j = 1, align = &quot;left&quot;) |&gt; prepend_chunks(i = ~is.na(EOSSTT), j = &quot;DCSREAS&quot;, as_chunk(&quot;\\t&quot;)) |&gt; autofit() ft .cl-f1a36c16{}.cl-f19a07de{font-family:'Open Sans';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-f19a07f2{font-family:'Open Sans';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-f19dd850{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:3pt;padding-top:3pt;padding-left:3pt;padding-right:3pt;line-height: 1.4;background-color:transparent;}.cl-f19dd864{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;line-height: 1.4;background-color:transparent;}.cl-f19dd865{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:3pt;padding-top:3pt;padding-left:3pt;padding-right:3pt;line-height: 1.4;background-color:transparent;}.cl-f19dd86e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:3pt;padding-top:3pt;padding-left:3pt;padding-right:3pt;line-height: 1.4;background-color:transparent;}.cl-f19dd878{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;line-height: 1.4;background-color:transparent;}.cl-f19dd879{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:3pt;padding-top:3pt;padding-left:3pt;padding-right:3pt;line-height: 1.4;background-color:transparent;}.cl-f19dd882{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;line-height: 1.4;background-color:transparent;}.cl-f19df632{width:3.196in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 1.5pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df646{width:0.1in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df650{width:0.877in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 1.5pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df651{width:0.882in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 1.5pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df65a{width:1.206in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 1.5pt solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df664{width:3.196in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df66e{width:0.1in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df66f{width:0.877in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df678{width:0.882in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df679{width:1.206in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df682{width:3.196in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df68c{width:0.1in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df696{width:0.877in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df697{width:0.882in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df6a0{width:1.206in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df6a1{width:3.196in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df6aa{width:0.1in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df6b4{width:0.877in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df6be{width:0.882in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df6bf{width:1.206in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df6c0{width:3.196in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df6c8{width:0.1in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df6d2{width:0.877in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df6dc{width:0.882in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df6e6{width:1.206in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df6e7{width:3.196in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df6f0{width:0.1in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df6f1{width:0.877in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df6fa{width:0.882in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df6fb{width:1.206in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df704{width:0.1in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df705{width:0.1in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df70e{width:3.196in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df70f{width:0.1in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df710{width:0.877in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df718{width:0.882in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df722{width:1.206in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df723{width:3.196in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df72c{width:0.1in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(170, 170, 170, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df72d{width:0.877in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df736{width:0.882in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df737{width:1.206in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df740{width:3.196in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df741{width:0.877in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df74a{width:0.882in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19df74b{width:1.206in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(170, 170, 170, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}A: Drug X(N=134)B: Placebo(N=134)C: Combination(N=132)Completed68 (50.7%)66 (49.3%)73 (55.3%)Ongoing24 (17.9%)28 (20.9%)21 (15.9%)Discontinued&emsp;Adverse Event3 (2.2%)6 (4.5%)5 (3.8%)&emsp;Death25 (18.7%)23 (17.2%)22 (16.7%)&emsp;&emsp;Adverse Event9 (6.7%)7 (5.2%)10 (7.6%)&emsp;&emsp;Disease Progression8 (6.0%)6 (4.5%)6 (4.5%)&emsp;&emsp;Lost to Follow Up2 (1.5%)2 (1.5%)2 (1.5%)&emsp;&emsp;Missing2 (1.5%)3 (2.2%)2 (1.5%)&emsp;&emsp;Post-Study Reporting of Death1 (0.7%)2 (1.5%)1 (0.8%)&emsp;&emsp;Suicide2 (1.5%)2 (1.5%)1 (0.8%)&emsp;&emsp;Unknown1 (0.7%)1 (0.7%)&emsp;Lack of Efficacy2 (1.5%)2 (1.5%)3 (2.3%)&emsp;Physician Decision2 (1.5%)3 (2.2%)2 (1.5%)&emsp;Protocol Violation5 (3.7%)3 (2.2%)4 (3.0%)&emsp;Withdrawal by Parent/Guardian4 (3.0%)2 (1.5%)1 (0.8%)&emsp;Withdrawal by Subject1 (0.7%)1 (0.7%)1 (0.8%) 4.5.5 tables Code resetSession() adsl &lt;- cadsl # Change the labels to title case levels(adsl$EOSSTT) &lt;- tools::toTitleCase(tolower(levels(adsl$EOSSTT))) levels(adsl$DCSREAS) &lt;- tools::toTitleCase(tolower(levels(adsl$DCSREAS))) levels(adsl$DTHCAUS) &lt;- tools::toTitleCase(tolower(levels(adsl$DTHCAUS))) library(tables) subject_counts &lt;- table(adsl$ARM) countpercentid &lt;- function(num, ARM) { n &lt;- length(unique(num)) if (n == 0) pct &lt;- 0 else pct &lt;- 100*n/subject_counts[ARM[1]] sprintf(&quot;%d (%.2f%%)&quot;, length(unique(num)), pct) } count &lt;- function(x) sprintf(&quot;(N=%d)&quot;, length(x)) heading &lt;- tabular(Heading(&quot;&quot;)*1*Heading(&quot;&quot;)*count ~ Heading()*TRT01A, data = adsl) part1 &lt;- tabular( Heading(&quot;&quot;)*EOSSTT*DropEmpty(which = &quot;row&quot;)* Heading(&quot;&quot;)*1* Heading()*countpercentid*Arguments(ARM = TRT01A)* Heading()*USUBJID ~ Heading()*TRT01A, data = subset(adsl, EOSSTT != &quot;Discontinued&quot;)) part2 &lt;- tabular( Heading(&quot;&quot;)*EOSSTT* Heading(&quot;&quot;)*DCSREAS*DropEmpty(which = &quot;row&quot;)* Heading()*countpercentid*Arguments(ARM = TRT01A)* Heading()*USUBJID ~ Heading()*TRT01A, data = subset(adsl, EOSSTT == &quot;Discontinued&quot; &amp; DCSREAS != &quot;Death&quot;)) part3 &lt;- tabular( Heading(&quot;&quot;)*DCSREAS* Heading(&quot;&quot;)*DTHCAUS*DropEmpty(which = &quot;row&quot;)* Heading()*countpercentid*Arguments(ARM = TRT01A)* Heading()*USUBJID ~ Heading()*TRT01A, data = subset(adsl, EOSSTT == &quot;Discontinued&quot; &amp; DCSREAS == &quot;Death&quot;)) useGroupLabels(rbind(heading, part1, part2, part3), indent = &quot;&amp;emsp;&quot;) #table39ba4965bb11 .Rtable thead, .Rtable .even { background-color: inherit; } #table39ba4965bb11 .left { text-align:left; } #table39ba4965bb11 .center { text-align:center; } #table39ba4965bb11 .right { text-align:right; } #table39ba4965bb11 .Rtable, #table39ba4965bb11 .Rtable thead { border-collapse: collapse; border-style: solid; border-width: medium 0; border-color: inherit; } #table39ba4965bb11 .Rtable th, #table39ba4965bb11 .Rtable td { padding-left: 0.5em; padding-right: 0.5em; border-width: 0; } A: Drug X B: Placebo C: Combination   (N=134) (N=134) (N=132) Completed 68 (50.75%) 66 (49.25%) 73 (55.30%) Ongoing 24 (17.91%) 28 (20.90%) 21 (15.91%) Discontinued        Adverse Event 3 (2.24%) 6 (4.48%) 5 (3.79%)  Lack of Efficacy 2 (1.49%) 2 (1.49%) 3 (2.27%)  Physician Decision 2 (1.49%) 3 (2.24%) 2 (1.52%)  Protocol Violation 5 (3.73%) 3 (2.24%) 4 (3.03%)  Withdrawal by Parent/Guardian 4 (2.99%) 2 (1.49%) 1 (0.76%)  Withdrawal by Subject 1 (0.75%) 1 (0.75%) 1 (0.76%) Death        Adverse Event 9 (6.72%) 7 (5.22%) 10 (7.58%)  Disease Progression 8 (5.97%) 6 (4.48%) 6 (4.55%)  Lost to Follow Up 2 (1.49%) 2 (1.49%) 2 (1.52%)  Missing 2 (1.49%) 3 (2.24%) 2 (1.52%)  Post-Study Reporting of Death 1 (0.75%) 2 (1.49%) 1 (0.76%)  Suicide 2 (1.49%) 2 (1.49%) 1 (0.76%)  Unknown 1 (0.75%) 1 (0.75%) 0 (0.00%) 4.5.6 tidytlg Code resetSession() library(dplyr) library(tidytlg) data(&quot;cadsl&quot;, package = &quot;random.cdisc.data&quot;) adsl &lt;- cadsl %&gt;% mutate(COMPFL = case_when(EOSSTT == &quot;COMPLETED&quot; ~ &quot;Y&quot;, TRUE ~ &quot;N&quot;)) disc &lt;- adsl %&gt;% filter(EOSSTT == &quot;DISCONTINUED&quot;) dth &lt;- adsl %&gt;% filter(DTHFL == &quot;Y&quot;) # Create analysis population counts tbl1 &lt;- freq(adsl, rowvar = &quot;SAFFL&quot;, colvar = &quot;ARM&quot;, statlist = statlist(&quot;n&quot;), rowtext = &quot;Analysis Set: Safety Population&quot;, subset = SAFFL == &quot;Y&quot;) # Create counts (percentages) for completed patients tbl2 &lt;- freq(adsl, rowvar = &quot;COMPFL&quot;, colvar = &quot;ARM&quot;, statlist = statlist(&quot;n (x.x%)&quot;), rowtext = &quot;Completed&quot;, subset = COMPFL == &quot;Y&quot;) # Create counts (percentages) for discontinued reasons tbl3 &lt;- freq(disc, denom_df = adsl, rowvar = &quot;DCSREAS&quot;, colvar = &quot;ARM&quot;, statlist = statlist(&quot;n (x.x%)&quot;), row_header = &quot;Discontinued&quot;) # Create counts (percentages) for death reasons tbl4 &lt;- freq(dth, denom_df = adsl, rowvar = &quot;DTHCAUS&quot;, colvar = &quot;ARM&quot;, statlist = statlist(&quot;n (x.x%)&quot;), row_header = &quot;Death Cause&quot;) # combine analysis results together tbl &lt;- bind_table(tbl1, tbl2, tbl3, tbl4) # output the analysis results gentlg(huxme = tbl, format = &quot;HTML&quot;, print.hux = FALSE, file = &quot;Table x.x.x.x&quot;, orientation = &quot;portrait&quot;, title = &quot;Study Disposition Summary&quot;, colheader = c(&quot;&quot;,&quot;A: Drug X&quot;,&quot;B: Placebo&quot;,&quot;C: Combination&quot;)) Table 4.5: Table x.x.x.x: &emsp; Study Disposition Summary A: Drug X B: Placebo C: Combination Analysis Set: Safety Population134134132 Completed68 (50.7%)66 (49.3%)73 (55.3%) Discontinued ADVERSE EVENT3 (2.2%)6 (4.5%)5 (3.8%) DEATH25 (18.7%)23 (17.2%)22 (16.7%) LACK OF EFFICACY2 (1.5%)2 (1.5%)3 (2.3%) PHYSICIAN DECISION2 (1.5%)3 (2.2%)2 (1.5%) PROTOCOL VIOLATION5 (3.7%)3 (2.2%)4 (3.0%) WITHDRAWAL BY PARENT/GUARDIAN4 (3.0%)2 (1.5%)1 (0.8%) WITHDRAWAL BY SUBJECT1 (0.7%)1 (0.7%)1 (0.8%) Death Cause ADVERSE EVENT9 (6.7%)7 (5.2%)10 (7.6%) DISEASE PROGRESSION8 (6.0%)6 (4.5%)6 (4.5%) LOST TO FOLLOW UP2 (1.5%)2 (1.5%)2 (1.5%) MISSING2 (1.5%)3 (2.2%)2 (1.5%) Post-study reporting of death1 (0.7%)2 (1.5%)1 (0.8%) SUICIDE2 (1.5%)2 (1.5%)1 (0.8%) UNKNOWN1 (0.7%)1 (0.7%)0 [table x.x.x.x.html][/home/runner/work/_temp/46285d38-8d6e-42ac-8e33-f3279fd14a78] 07SEP2023, 17:42 4.5.7 tfrmt Rather than starting with an ADaM, tfrmt assumes users will start with an ARD (Analysis Results Dataset), because of this, making this table will be split into two parts, first to make the ARD and second to format the table. Code resetSession() library(tidyverse) library(tfrmt) data(&quot;cadsl&quot;, package = &quot;random.cdisc.data&quot;) big_n &lt;- cadsl |&gt; dplyr::group_by(ARM) |&gt; dplyr::summarize( N = dplyr::n_distinct(USUBJID) ) disp_summary &lt;- cadsl |&gt; dplyr::left_join(big_n, by = &quot;ARM&quot;) |&gt; dplyr::group_by(ARM, EOSSTT, DCSREAS, DTHCAUS) |&gt; dplyr::reframe( n_subj = n_distinct(USUBJID), pct_subj = n_subj/N ) |&gt; dplyr::distinct() |&gt; tidyr::pivot_longer(ends_with(&quot;subj&quot;)) |&gt; dplyr::mutate( DCSREAS = if_else(is.na(DCSREAS), EOSSTT, DCSREAS), DTHCAUS = if_else(is.na(DTHCAUS), DCSREAS, DTHCAUS), EOSSTT = forcats::fct_relevel(EOSSTT, &quot;ONGOING&quot;, &quot;COMPLETED&quot;, &quot;DISCONTINUED&quot;) ) %&gt;% dplyr::arrange(EOSSTT, DCSREAS, DTHCAUS) label_N &lt;- big_n |&gt; dplyr::rename(value = N) |&gt; dplyr::mutate(name = &quot;header_n&quot;) disp_ard &lt;- disp_summary |&gt; bind_rows(label_N) ## Format Table tfrmt( column = ARM, group = c(&quot;EOSSTT&quot;, &quot;DCSREAS&quot;), param = name, value = value, label = DTHCAUS ) |&gt; # Then we cam combine it with an n percent template tfrmt_n_pct(n = &quot;n_subj&quot;, pct = &quot;pct_subj&quot;, pct_frmt_when = frmt_when(&quot;==1&quot; ~ &quot;&quot;, &quot;&gt;.99&quot; ~ &quot;(&gt;99%)&quot;, &quot;==0&quot; ~ &quot;&quot;, &quot;&lt;.01&quot; ~ &quot;(&lt;1%)&quot;, &quot;TRUE&quot; ~ frmt(&quot;(xx.x%)&quot;, transform = ~.*100)) ) |&gt; #Finally we are going to add some additional formatting tfrmt( big_n = big_n_structure(&quot;header_n&quot;), # Aligning on decimal places and spaces col_style_plan = col_style_plan( col_style_structure(col = matches(&quot;[A-Z]:.*&quot;), align = c(&quot;.&quot;, &quot; &quot;)) ) )|&gt; print_to_gt(disp_ard) #tfimzjzouf table { font-family: Courier, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #tfimzjzouf thead, #tfimzjzouf tbody, #tfimzjzouf tfoot, #tfimzjzouf tr, #tfimzjzouf td, #tfimzjzouf th { border-style: none; } #tfimzjzouf p { margin: 0; padding: 0; } #tfimzjzouf .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 14px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #tfimzjzouf .gt_caption { padding-top: 4px; padding-bottom: 4px; } #tfimzjzouf .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #tfimzjzouf .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #tfimzjzouf .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #tfimzjzouf .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #tfimzjzouf .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #tfimzjzouf .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #tfimzjzouf .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #tfimzjzouf .gt_column_spanner_outer:first-child { padding-left: 0; } #tfimzjzouf .gt_column_spanner_outer:last-child { padding-right: 0; } #tfimzjzouf .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #tfimzjzouf .gt_spanner_row { border-bottom-style: hidden; } #tfimzjzouf .gt_group_heading { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: rgba(255, 255, 255, 0); border-bottom-style: solid; border-bottom-width: 0px; border-bottom-color: rgba(255, 255, 255, 0); border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #tfimzjzouf .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: rgba(255, 255, 255, 0); border-bottom-style: solid; border-bottom-width: 0px; border-bottom-color: rgba(255, 255, 255, 0); vertical-align: middle; } #tfimzjzouf .gt_from_md > :first-child { margin-top: 0; } #tfimzjzouf .gt_from_md > :last-child { margin-bottom: 0; } #tfimzjzouf .gt_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #tfimzjzouf .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 0px; border-right-color: rgba(255, 255, 255, 0); padding-left: 5px; padding-right: 5px; } #tfimzjzouf .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 0px; border-right-color: rgba(255, 255, 255, 0); padding-left: 5px; padding-right: 5px; vertical-align: top; } #tfimzjzouf .gt_row_group_first td { border-top-width: 2px; } #tfimzjzouf .gt_row_group_first th { border-top-width: 2px; } #tfimzjzouf .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #tfimzjzouf .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #tfimzjzouf .gt_first_summary_row.thick { border-top-width: 2px; } #tfimzjzouf .gt_last_summary_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #tfimzjzouf .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #tfimzjzouf .gt_first_grand_summary_row { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #tfimzjzouf .gt_last_grand_summary_row_top { padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #tfimzjzouf .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #tfimzjzouf .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #tfimzjzouf .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #tfimzjzouf .gt_footnote { margin: 0px; font-size: 90%; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #tfimzjzouf .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #tfimzjzouf .gt_sourcenote { font-size: 90%; padding-top: 1px; padding-bottom: 1px; padding-left: 5px; padding-right: 5px; } #tfimzjzouf .gt_left { text-align: left; } #tfimzjzouf .gt_center { text-align: center; } #tfimzjzouf .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #tfimzjzouf .gt_font_normal { font-weight: normal; } #tfimzjzouf .gt_font_bold { font-weight: bold; } #tfimzjzouf .gt_font_italic { font-style: italic; } #tfimzjzouf .gt_super { font-size: 65%; } #tfimzjzouf .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #tfimzjzouf .gt_asterisk { font-size: 100%; vertical-align: 0; } #tfimzjzouf .gt_indent_1 { text-indent: 5px; } #tfimzjzouf .gt_indent_2 { text-indent: 10px; } #tfimzjzouf .gt_indent_3 { text-indent: 15px; } #tfimzjzouf .gt_indent_4 { text-indent: 20px; } #tfimzjzouf .gt_indent_5 { text-indent: 25px; } A: Drug X N = 134 B: Placebo N = 134 C: Combination N = 132 ONGOING 24 (17.9%) 28 (20.9%) 21 (15.9%) COMPLETED 68 (50.7%) 66 (49.3%) 73 (55.3%) DISCONTINUED ADVERSE EVENT 3 ( 2.2%) 6 ( 4.5%) 5 ( 3.8%) DEATH ADVERSE EVENT 9 ( 6.7%) 7 ( 5.2%) 10 ( 7.6%) DISEASE PROGRESSION 8 ( 6.0%) 6 ( 4.5%) 6 ( 4.5%) LOST TO FOLLOW UP 2 ( 1.5%) 2 ( 1.5%) 2 ( 1.5%) MISSING 2 ( 1.5%) 3 ( 2.2%) 2 ( 1.5%) Post-study reporting of death 1 (&lt;1%) 2 ( 1.5%) 1 (&lt;1%) SUICIDE 2 ( 1.5%) 2 ( 1.5%) 1 (&lt;1%) UNKNOWN 1 (&lt;1%) 1 (&lt;1%) LACK OF EFFICACY 2 ( 1.5%) 2 ( 1.5%) 3 ( 2.3%) PHYSICIAN DECISION 2 ( 1.5%) 3 ( 2.2%) 2 ( 1.5%) PROTOCOL VIOLATION 5 ( 3.7%) 3 ( 2.2%) 4 ( 3.0%) WITHDRAWAL BY PARENT/GUARDIAN 4 ( 3.0%) 2 ( 1.5%) 1 (&lt;1%) WITHDRAWAL BY SUBJECT 1 (&lt;1%) 1 (&lt;1%) 1 (&lt;1%) "],["contributors.html", "A Contributors to this book", " A Contributors to this book This book has had contributions from the following individuals (in alphabetical order): Karima Ahmad, GSK plc. Gabe Becker Emily de la Rua, Roche Christina Fillmore, GSK plc. David Gohel, ArData Richard Iannone, Posit PBC James J. Kim, Pfizer Inc. Alexandra Lauer, Merck KGaA Duncan Murdoch, University of Western Ontario Joseph Rickert, R Consortium Adrian Waddell, Roche Sheng-Wei Wang, Johnson &amp; Johnson Yilong Zhang, Meta The project has been coordinated by the R Tables for Regulatory Submissions (RTRS) Working Group. "],["references.html", "References", " References "]]
